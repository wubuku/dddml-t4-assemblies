//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Dddml.T4.Templates.Java
{
    using Dddml.Core.Dom;
    using System.Collections.Generic;
    using Dddml.T4.Extensions;
    using Dddml.T4.Extensions.Java;
    using System.Linq;
    using System.Text;
    using System;
    using T4Toolbox;


    public partial class AggregateDomainGeneratorImporter : global::Microsoft.VisualStudio.TextTemplating.TextTransformation
    {


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"


        // include file="ValueObjectDtoTemplate.tt" //
        // include file="ValueObjectDtoWrapperTemplate.tt" //
        // include file="ValueObjectFlattenedDtoTemplate.tt" //
        // include file="IdValueObjectFlattenedDtoFormatterTemplate.tt" //

        public class AggregateDomainGenerator : Generator
        {
            AggregateStateDtoTemplate AggregateStateDtoTemplate { get; set; }
            AggregateAbstractCommandDtoTemplate AggregateAbstractCommandDtoTemplate { get; set; }
            AggregateCreateOrMergePatchCommandDtoTemplate AggregateCreateOrMergePatchCommandDtoTemplate { get; set; }
            AggregateDeleteCommandDtoTemplate AggregateDeleteCommandDtoTemplate { get; set; }
            AggregateEventDtoTemplate AggregateEventDtoTemplate { get; set; }
            AggregateEventInterfaceTemplate AggregateEventInterfaceTemplate { get; set; }
            AggregateAbstractEventTemplate AggregateAbstractEventTemplate { get; set; }
            AggregateStateInterfaceTemplate AggregateStateInterfaceTemplate { get; set; }
            //EntityStateCollectionInterfaceTemplate EntityStateCollectionInterfaceTemplate { get; set; }
            EntityAbstractStateCollectionTemplate EntityAbstractStateCollectionTemplate { get; set; }
            EntityStateDaoInterfaceTemplate EntityStateDaoInterfaceTemplate { get; set; }
            AggregateStateRepositoryInterfaceTemplate AggregateStateRepositoryInterfaceTemplate { get; set; }
            AggregateStateQueryRepositoryInterfaceTemplate AggregateStateQueryRepositoryInterfaceTemplate { get; set; }
            AggregateAbstractStateTemplate AggregateAbstractStateTemplate { get; set; }
            EntityEventDaoInterfaceTemplate EntityEventDaoInterfaceTemplate { get; set; }
            AggregateCommandInterfaceTemplate AggregateCommandInterfaceTemplate { get; set; }
            AggregateAbstractCommandTemplate AggregateAbstractCommandTemplate { get; set; }
            AggregateAbstractStateCommandConverterTemplate AggregateAbstractStateCommandConverterTemplate { get; set; }
            AggregateAggregateInterfaceTemplate AggregateAggregateInterfaceTemplate { get; set; }
            AggregateApplicationServiceInterfaceTemplate AggregateApplicationServiceInterfaceTemplate { get; set; }
            AggregateAbstractApplicationServiceTemplate AggregateAbstractApplicationServiceTemplate { get; set; }
            AggregateAbstractAggregateTemplate AggregateAbstractAggregateTemplate { get; set; }
            AggregateStateEventDtoConverterTemplate AggregateStateEventDtoConverterTemplate { get; set; }
            AggregateCommandDtosTemplate AggregateCommandDtosTemplate { get; set; }
            AggregateCommandsTemplate AggregateCommandsTemplate { get; set; }

            Aggregate Aggregate { get; set; }

            public bool OnlyInterfaces { get; set; }

            private bool _excludingDtos;

            public bool ExcludingDtos
            {
                get
                {
                    if (OnlyDtos) { return false; }
                    return _excludingDtos;
                }
                set
                {
                    _excludingDtos = value;
                }
            }

            public bool OnlyDtos { get; set; }


            public AggregateDomainGenerator(Aggregate aggregate)
            {
                this.Aggregate = aggregate;

                if (!OnlyInterfaces)
                {

                    this.AggregateStateDtoTemplate = new AggregateStateDtoTemplate(aggregate);
                    this.AggregateAbstractCommandDtoTemplate = new AggregateAbstractCommandDtoTemplate(aggregate);
                    this.AggregateCreateOrMergePatchCommandDtoTemplate = new AggregateCreateOrMergePatchCommandDtoTemplate(aggregate);
                    this.AggregateDeleteCommandDtoTemplate = new AggregateDeleteCommandDtoTemplate(aggregate);

                    this.AggregateEventDtoTemplate = new AggregateEventDtoTemplate(aggregate);
                    this.AggregateCommandDtosTemplate = new AggregateCommandDtosTemplate(aggregate);
                    this.AggregateCommandsTemplate = new AggregateCommandsTemplate(aggregate);

                    // 总是生成 Event 接口
                    this.AggregateEventInterfaceTemplate = new AggregateEventInterfaceTemplate(aggregate);
                    // /////////////////////
                    if (!OnlyDtos)
                    {
                        // /////////////////////
                        this.AggregateStateEventDtoConverterTemplate = new AggregateStateEventDtoConverterTemplate(aggregate);
                        //this.AggregateEventInterfaceTemplate = new AggregateEventInterfaceTemplate(aggregate);
                        this.AggregateAbstractEventTemplate = new AggregateAbstractEventTemplate(aggregate);
                        this.AggregateStateInterfaceTemplate = new AggregateStateInterfaceTemplate(aggregate);
                        this.AggregateStateRepositoryInterfaceTemplate = new AggregateStateRepositoryInterfaceTemplate(aggregate);
                        this.AggregateStateQueryRepositoryInterfaceTemplate = new AggregateStateQueryRepositoryInterfaceTemplate(aggregate);
                        this.AggregateAbstractStateTemplate = new AggregateAbstractStateTemplate(aggregate);
                        this.AggregateAbstractCommandTemplate = new AggregateAbstractCommandTemplate(aggregate);
                        this.AggregateCommandInterfaceTemplate = new AggregateCommandInterfaceTemplate(aggregate);
                        this.AggregateAggregateInterfaceTemplate = new AggregateAggregateInterfaceTemplate(aggregate);
                        this.AggregateApplicationServiceInterfaceTemplate = new AggregateApplicationServiceInterfaceTemplate(aggregate);
                        this.AggregateAbstractAggregateTemplate = new AggregateAbstractAggregateTemplate(aggregate);
                        this.AggregateAbstractApplicationServiceTemplate = new AggregateAbstractApplicationServiceTemplate(aggregate);
                        this.AggregateAbstractStateCommandConverterTemplate = new AggregateAbstractStateCommandConverterTemplate(aggregate);
                        // /////////////////////
                    }
                    // /////////////////////

                }
            }

            protected override void RunCore()
            {
                if (!OnlyInterfaces)
                {
                    AggregateStateDtoTemplate.OnlyDtos = this.OnlyDtos;
                    AggregateStateDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                    AggregateStateDtoTemplate.RenderToFile(String.Format("{0}StateDto.java", Aggregate.GetNameForState()));

                    AggregateAbstractCommandDtoTemplate.OnlyDtos = this.OnlyDtos;
                    AggregateAbstractCommandDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                    AggregateAbstractCommandDtoTemplate.RenderToFile(String.Format("Abstract{0}CommandDto.java", Aggregate.GetNameForCommand()));

                    AggregateCreateOrMergePatchCommandDtoTemplate.OnlyDtos = this.OnlyDtos;
                    AggregateCreateOrMergePatchCommandDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                    AggregateCreateOrMergePatchCommandDtoTemplate.RenderToFile(String.Format("CreateOrMergePatch{0}Dto.java", Aggregate.GetNameForCommand()));

                    if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                    {
                        AggregateDeleteCommandDtoTemplate.OnlyDtos = this.OnlyDtos;
                        AggregateDeleteCommandDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateDeleteCommandDtoTemplate.RenderToFile(String.Format("Delete{0}Dto.java", Aggregate.GetNameForCommand()));
                    }
                    // ////////////////////////////////////////
                    if (OnlyDtos)
                    { // NOT IN SERVER SIDE
                      // ////////////////////////////////////////

                        // -----------------------------------------------------------
                        if (!Aggregate.IsAbsolutelyNoEventSourcing())
                        {
                            // -----------------------------------------------------------
                            AggregateEventDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            AggregateEventDtoTemplate.RenderToFile(String.Format("{0}EventDto.java", Aggregate.GetNameForEvent()));
                            // -----------------------------------------------------------
                        }
                        // -----------------------------------------------------------

                        // ////////////////////////////////////////
                    }
                    // ////////////////////////////////////////

                    //var aggregateMethods = Aggregate.GetSelfAndAllSubtypeMethods();

                    // ////////////////////////////////////////
                    if (OnlyDtos)
                    { // NOT IN SERVER SIDE
                      // ////////////////////////////////////////
                        if (Aggregate.HasAggregateOrEntityMethods())//(aggregateMethods != null && aggregateMethods.Count > 0)
                        {
                            AggregateCommandDtosTemplate.OnlyDtos = this.OnlyDtos;
                            AggregateCommandDtosTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            AggregateCommandDtosTemplate.RenderToFile(String.Format("{0}CommandDtos.java", Aggregate.Name));
                        }
                        // ////////////////////////////////////////
                    }
                    // ////////////////////////////////////////

                    // -----------------------------------------------------------
                    // 总是生成 Event 接口
                    if (!Aggregate.IsAbsolutelyNoEventSourcing())
                    {
                        AggregateEventInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateEventInterfaceTemplate.RenderToFile(String.Format("{0}Event.java", Aggregate.GetNameForEvent()));
                    }
                    // -----------------------------------------------------------
                    // ///////////////////////////
                    if (Aggregate.IsPolymorphic())
                    {
                        foreach (var subtype in Aggregate.AllSubtypes.Values)
                        {
                            // -----------------------------------------------------------
                            if (!Aggregate.IsAbsolutelyNoEventSourcing())
                            {
                                // -----------------------------------------------------------
                                EntityBaseSubtypeEventInterfaceTemplate aggregateSubtypeEventInterfaceTemplate = new EntityBaseSubtypeEventInterfaceTemplate(Aggregate, subtype);
                                aggregateSubtypeEventInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                aggregateSubtypeEventInterfaceTemplate.RenderToFile(String.Format("{0}Event.java", subtype.GetNameForEvent()));
                                // -----------------------------------------------------------
                            }
                            // -----------------------------------------------------------
                        }
                    }
                    // ///////////////////////////

                    // /////////////////////
                    if (!OnlyDtos)
                    {
                        // /////////////////////

                        // -----------------------------------------------------------
                        if (!Aggregate.IsAbsolutelyNoEventSourcing())
                        {
                            // -----------------------------------------------------------
                            // //AggregateStateEventDtoConverterTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            // //AggregateStateEventDtoConverterTemplate.RenderToFile(String.Format("{0}StateEventDtoConverter.java", Aggregate.Name));
                            // AggregateEventInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            // AggregateEventInterfaceTemplate.RenderToFile(String.Format("{0}Event.java", Aggregate.GetNameForEvent()));
                            // -----------------------------------------------------------
                        }
                        // -----------------------------------------------------------

                        AggregateStateInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateStateInterfaceTemplate.RenderToFile(String.Format("{0}State.java", Aggregate.GetNameForState()));

                        AggregateStateRepositoryInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateStateRepositoryInterfaceTemplate.RenderToFile(String.Format("{0}StateRepository.java", Aggregate.GetNameForState()));

                        AggregateStateQueryRepositoryInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateStateQueryRepositoryInterfaceTemplate.RenderToFile(String.Format("{0}StateQueryRepository.java", Aggregate.GetNameForState()));

                        AggregateAbstractStateTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateAbstractStateTemplate.RenderToFile(String.Format("Abstract{0}State.java", Aggregate.GetNameForState()));

                        AggregateCommandInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateCommandInterfaceTemplate.RenderToFile(String.Format("{0}Command.java", Aggregate.GetNameForCommand()));

                        // -----------------------------------------------------------
                        if (!Aggregate.IsAbsolutelyNoEventSourcing())
                        {
                            // -----------------------------------------------------------
                            AggregateAbstractEventTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            AggregateAbstractEventTemplate.RenderToFile(String.Format("Abstract{0}Event.java", Aggregate.GetNameForEvent()));

                            if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                            {
                                AggregateAbstractCommandTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                AggregateAbstractCommandTemplate.RenderToFile(String.Format("Abstract{0}Command.java", Aggregate.GetNameForCommand()));
                            }
                            if (!Aggregate.BoundedContext.GetNoStateToCommandConverters())
                            {
                                AggregateAbstractStateCommandConverterTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                AggregateAbstractStateCommandConverterTemplate.RenderToFile(String.Format("Abstract{0}StateCommandConverter.java", Aggregate.GetNameForCommand()));
                            }
                            // -----------------------------------------------------------
                        }
                        // -----------------------------------------------------------

                        AggregateApplicationServiceInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateApplicationServiceInterfaceTemplate.RenderToFile(String.Format("{0}ApplicationService.java", Aggregate.Name));

                        // -----------------------------------------------------------
                        if (!Aggregate.IsAbsolutelyNoEventSourcing())
                        {
                            // -----------------------------------------------------------
                            AggregateAggregateInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            AggregateAggregateInterfaceTemplate.RenderToFile(String.Format("{0}Aggregate.java", Aggregate.Name));

                            AggregateAbstractAggregateTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            AggregateAbstractAggregateTemplate.RenderToFile(String.Format("Abstract{0}Aggregate.java", Aggregate.Name));
                            // -----------------------------------------------------------
                        }
                        // -----------------------------------------------------------

                        AggregateAbstractApplicationServiceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        AggregateAbstractApplicationServiceTemplate.RenderToFile(String.Format("Abstract{0}ApplicationService.java", Aggregate.Name));
                        if (Aggregate.HasAggregateOrEntityMethods())//(aggregateMethods != null && aggregateMethods.Count > 0)
                        {
                            AggregateCommandsTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            AggregateCommandsTemplate.RenderToFile(String.Format("{0}Commands.java", Aggregate.Name));
                        }

                        // ///////////////////////////
                        if (Aggregate.IsPolymorphic())
                        {
                            foreach (var subtype in Aggregate.AllSubtypes.Values)
                            {
                                EntityBaseSubtypeStateInterfaceTemplate aggregateSubtypeStateInterfaceTemplate = new EntityBaseSubtypeStateInterfaceTemplate(Aggregate, subtype);
                                aggregateSubtypeStateInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                aggregateSubtypeStateInterfaceTemplate.RenderToFile(String.Format("{0}State.java", subtype.GetNameForState()));

                                EntityBaseSubtypeAbstractStateTemplate aggregateSubtypeAbstractStateTemplate = new EntityBaseSubtypeAbstractStateTemplate(Aggregate, subtype);
                                aggregateSubtypeAbstractStateTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                aggregateSubtypeAbstractStateTemplate.RenderToFile(String.Format("Abstract{0}State.java", subtype.GetNameForState()));

                                AggregateSubtypeStateQueryRepositoryInterfaceTemplate aggregateSubtypeStateQueryRepositoryInterfaceTemplate = new AggregateSubtypeStateQueryRepositoryInterfaceTemplate(Aggregate, subtype);
                                aggregateSubtypeStateQueryRepositoryInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                aggregateSubtypeStateQueryRepositoryInterfaceTemplate.RenderToFile(String.Format("{0}StateQueryRepository.java", subtype.GetNameForState()));

                                // -----------------------------------------------------------
                                if (!Aggregate.IsAbsolutelyNoEventSourcing())
                                {
                                    // -----------------------------------------------------------
                                    //EntityBaseSubtypeEventInterfaceTemplate aggregateSubtypeEventInterfaceTemplate = new EntityBaseSubtypeEventInterfaceTemplate(Aggregate, subtype);
                                    //aggregateSubtypeEventInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                    //aggregateSubtypeEventInterfaceTemplate.RenderToFile(String.Format("{0}Event.java", subtype.GetNameForEvent()));

                                    EntityBaseSubtypeAbstractEventTemplate aggregateSubtypeAbstractEventTemplate = new EntityBaseSubtypeAbstractEventTemplate(Aggregate, subtype);
                                    aggregateSubtypeAbstractEventTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                    aggregateSubtypeAbstractEventTemplate.RenderToFile(String.Format("Abstract{0}Event.java", subtype.GetNameForEvent()));
                                    // -----------------------------------------------------------
                                }
                                // -----------------------------------------------------------

                            }
                        }
                        // ///////////////////////////

                        // /////////////////////
                    }
                    // /////////////////////


                    // ///////////////////////////
                    //if (Aggregate.IsPolymorphic())
                    //{
                    foreach (var subtype in Aggregate.AllSubtypes.Values)
                    {
                        EntityBaseSubtypeStateDtoTemplate aggregateSubtypeStateDtoTemplate = new EntityBaseSubtypeStateDtoTemplate(Aggregate, subtype);
                        aggregateSubtypeStateDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        aggregateSubtypeStateDtoTemplate.OnlyDtos = this.OnlyDtos;
                        aggregateSubtypeStateDtoTemplate.RenderToFile(String.Format("{0}StateDto.java", subtype.GetNameForState()));
                    }
                    //}
                    // ///////////////////////////

                }

                foreach (ValueObject vo in Aggregate.GetAllNestedValueObjects().Values)
                {
                    // ------------------------------------------------------------------------------------
                    if (vo.IsStateEventIdValueObject() && Aggregate.IsAbsolutelyNoEventSourcing())
                    {
                        // ------------------------------------------------------------------------------------
                        continue;
                        // ------------------------------------------------------------------------------------
                    }
                    // ------------------------------------------------------------------------------------

                    // /////////////////////
                    //if (!OnlyDtos) {
                    // /////////////////////
                    var template = new ValueObjectTemplate(vo);
                    template.Output.Encoding = new System.Text.UTF8Encoding(false);
                    template.RenderToFile(String.Format("{0}.java", vo.Name));
                    // /////////////////////
                    //}
                    // /////////////////////

                    if (!ExcludingDtos)
                    {
                        // ///////////////////////////////////////////////////////
                        //var voDtoTemplate = new ValueObjectDtoTemplate(vo);
                        //voDtoTemplate.OnlyDtos = this.OnlyDtos;
                        //voDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        //voDtoTemplate.RenderToFile(String.Format("{0}Dto.java", vo.Name));
                        // ////////////////////////////////////////////////////////
                        //}
                        // ////////////////////////////////////////////////////////

                        // /////////////////////
                        if (!OnlyDtos)
                        {
                            // /////////////////////
                            //var voDtoWrapperTemplate = new ValueObjectDtoWrapperTemplate(vo);
                            //voDtoWrapperTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            //voDtoWrapperTemplate.RenderToFile(String.Format("{0}DtoWrapper.java", vo.Name));
                            // /////////////////////
                        }
                        // /////////////////////
                        //if (vo.IsIdValueObject || vo.IsGlobalIdValueObject) 
                        //{
                        // ///////////////////////////////////////////////////////
                        //if (!OnlyDtos || !vo.IsStateEventIdValueObject()) {
                        // ///////////////////////////////////////////////////////

                        //var flattenedDtoTemplate = new ValueObjectFlattenedDtoTemplate(vo);
                        //flattenedDtoTemplate.OnlyDtos = this.OnlyDtos;
                        //flattenedDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        //flattenedDtoTemplate.RenderToFile(String.Format("{0}FlattenedDto.java", vo.Name));
                        //var flattenedDtoFormatterTemplate = new IdValueObjectFlattenedDtoFormatterTemplate(vo);
                        //flattenedDtoFormatterTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        //flattenedDtoFormatterTemplate.RenderToFile(String.Format("{0}FlattenedDtoFormatter.java", vo.Name));

                        // ////////////////////////////////////////////////////////
                        //}
                        // ////////////////////////////////////////////////////////
                        //}
                    }
                }

                foreach (var e in Aggregate.GetAllObjectsHavingSubtypes().Values)
                {
                    var co = ConstObject.CreateFromDiscriminator(e);
                    var template = new ConstObjectTemplate(co);
                    template.Output.Encoding = new System.Text.UTF8Encoding(false);
                    template.RenderToFile(String.Format("{0}.java", co.Name));
                }

                foreach (EnumObject eo in Aggregate.GetAllNestedEnumObjects().Values)
                {
                    var co = ConstObject.CreateFromEnumObject(eo);
                    var template = new ConstObjectTemplate(co);
                    template.Output.Encoding = new System.Text.UTF8Encoding(false);
                    template.RenderToFile(String.Format("{0}.java", co.Name));
                }


                foreach (Entity e in Aggregate.GetAllNestedEntities().Values)
                {
                    if (!OnlyInterfaces)
                    {

                        var stateDtoTemplate = new EntityStateDtoTemplate(e);
                        stateDtoTemplate.OnlyDtos = this.OnlyDtos;
                        stateDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        stateDtoTemplate.RenderToFile(String.Format("{0}StateDto.java", e.GetNameForState()));

                        var abstractCommandDtoTemplate = new EntityAbstractCommandDtoTemplate(e);
                        abstractCommandDtoTemplate.OnlyDtos = this.OnlyDtos;
                        abstractCommandDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        abstractCommandDtoTemplate.RenderToFile(String.Format("Abstract{0}CommandDto.java", e.GetNameForCommand()));

                        var createOrMergePatchCommandDtoTemplate = new EntityCreateOrMergePatchCommandDtoTemplate(e);
                        createOrMergePatchCommandDtoTemplate.OnlyDtos = this.OnlyDtos;
                        createOrMergePatchCommandDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        createOrMergePatchCommandDtoTemplate.RenderToFile(String.Format("CreateOrMergePatch{0}Dto.java", e.GetNameForCommand()));

                        if (!e.IsImmutableOrOuterEntityImmutable())
                        {
                            var removeCommandDtoTemplate = new EntityRemoveCommandDtoTemplate(e);
                            removeCommandDtoTemplate.OnlyDtos = this.OnlyDtos;
                            removeCommandDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            removeCommandDtoTemplate.RenderToFile(String.Format("Remove{0}Dto.java", e.GetNameForCommand()));
                        }
                        // ////////////////////////////////////////
                        if (OnlyDtos)
                        { // NOT IN SERVER SIDE
                          // ////////////////////////////////////////

                            // -----------------------------------------------------------
                            if (!Aggregate.IsAbsolutelyNoEventSourcing())
                            {
                                // -----------------------------------------------------------
                                var eventDtoTemplate = new EntityEventDtoTemplate(e);
                                eventDtoTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                eventDtoTemplate.RenderToFile(String.Format("{0}EventDto.java", e.GetNameForEvent()));
                                // -----------------------------------------------------------
                            }
                            // -----------------------------------------------------------

                            // ////////////////////////////////////////
                        }
                        // ////////////////////////////////////////

                        //// -----------------------------------------------------------
                        //if (!Aggregate.IsAbsolutelyNoEventSourcing()) {
                        //// -----------------------------------------------------------
                        //var stateEventDtoConverterTemplate = new EntityStateEventDtoConverterTemplate(e);
                        //stateEventDtoConverterTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        //stateEventDtoConverterTemplate.RenderToFile(String.Format("{0}StateEventDtoConverter.java", e.Name));
                        //// -----------------------------------------------------------
                        //}
                        //// -----------------------------------------------------------

                        // 总是生成 Event 接口
                        var stateEventInterfaceTemplate = new EntityEventInterfaceTemplate(e);
                        stateEventInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                        stateEventInterfaceTemplate.RenderToFile(String.Format("{0}Event.java", e.GetNameForEvent()));

                        // /////////////////////
                        if (!OnlyDtos)
                        {
                            // /////////////////////

                            // -----------------------------------------------------------
                            if (!Aggregate.IsAbsolutelyNoEventSourcing())
                            {
                                // -----------------------------------------------------------
                                //var stateEventInterfaceTemplate = new EntityEventInterfaceTemplate(e);
                                //stateEventInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                //stateEventInterfaceTemplate.RenderToFile(String.Format("{0}Event.java", e.GetNameForEvent()));
                                // -----------------------------------------------------------
                            }
                            // -----------------------------------------------------------

                            var stateInterfaceTemplate = new EntityStateInterfaceTemplate(e);
                            stateInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            stateInterfaceTemplate.RenderToFile(String.Format("{0}State.java", e.GetNameForState()));
                            //var entityStateCollectionInterfaceTemplate = new EntityStateCollectionInterfaceTemplate(e);
                            //entityStateCollectionInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            //entityStateCollectionInterfaceTemplate.RenderToFile(String.Format("{0}States.java", e.Name));
                            var entityStateDaoInterfaceTemplate = new EntityStateDaoInterfaceTemplate(e);
                            entityStateDaoInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            entityStateDaoInterfaceTemplate.RenderToFile(String.Format("{0}StateDao.java", e.GetNameForState()));
                            var entityAbstractStateCollectionTemplate = new EntityAbstractStateCollectionTemplate(e);
                            entityAbstractStateCollectionTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            entityAbstractStateCollectionTemplate.RenderToFile(String.Format("Abstract{0}StateCollection.java", e.Name));
                            var abstractStateTemplate = new EntityAbstractStateTemplate(e);
                            abstractStateTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            abstractStateTemplate.RenderToFile(String.Format("Abstract{0}State.java", e.GetNameForState()));

                            var commandInterfaceTemplate = new EntityCommandInterfaceTemplate(e);
                            commandInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            commandInterfaceTemplate.RenderToFile(String.Format("{0}Command.java", e.GetNameForCommand()));

                            // -----------------------------------------------------------
                            if (!Aggregate.IsAbsolutelyNoEventSourcing())
                            {
                                // -----------------------------------------------------------
                                var abstractStateEventTemplate = new EntityAbstractEventTemplate(e);
                                abstractStateEventTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                abstractStateEventTemplate.RenderToFile(String.Format("Abstract{0}Event.java", e.GetNameForEvent()));

                                var entityEventDaoInterfaceTemplate = new EntityEventDaoInterfaceTemplate(e);
                                entityEventDaoInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                entityEventDaoInterfaceTemplate.RenderToFile(String.Format("{0}EventDao.java", e.GetNameForEvent()));

                                if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                                {
                                    var abstractCommandTemplate = new EntityAbstractCommandTemplate(e);
                                    abstractCommandTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                    abstractCommandTemplate.RenderToFile(String.Format("Abstract{0}Command.java", e.GetNameForCommand()));
                                }
                                if (!Aggregate.BoundedContext.GetNoStateToCommandConverters())
                                {
                                    var abstractStateCommandConverterTemplate = new EntityAbstractStateCommandConverterTemplate(e);
                                    abstractStateCommandConverterTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                                    abstractStateCommandConverterTemplate.RenderToFile(String.Format("Abstract{0}StateCommandConverter.java", e.GetNameForCommand()));
                                }
                                // -----------------------------------------------------------
                            }
                            // -----------------------------------------------------------

                            // /////////////////////
                        }
                        // /////////////////////

                    }
                }

                // /////////////////////
                if (!OnlyDtos)
                {
                    // /////////////////////
                    foreach (var t in Aggregate.BoundedContext.Trees.Values)
                    {
                        if (t.NodeContentType == Aggregate.Name && String.IsNullOrWhiteSpace(t.StructureType))
                        {
                            var treeAggregateStateQueryRepositoryInterfaceTemplate = new TreeAggregateStateQueryRepositoryInterfaceTemplate(t);
                            treeAggregateStateQueryRepositoryInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            treeAggregateStateQueryRepositoryInterfaceTemplate.RenderToFile(String.Format("{0}{1}StateQueryRepository.java", t.Name, Aggregate.GetNameForState()));
                        }
                        else if (!String.IsNullOrWhiteSpace(t.StructureType) && t.StructureType == Aggregate.Name)
                        {
                            var treeAggregateStateQueryRepositoryStructureInterfaceTemplate = new TreeAggregateStateQueryRepositoryInterfaceTemplate(t);
                            treeAggregateStateQueryRepositoryStructureInterfaceTemplate.Output.Encoding = new System.Text.UTF8Encoding(false);
                            treeAggregateStateQueryRepositoryStructureInterfaceTemplate.RenderToFile(String.Format("{0}{1}StateQueryRepository.java", t.Name, Aggregate.GetNameForState()));
                        }
                    }
                    // /////////////////////
                }
                // /////////////////////

            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"


        public class ValueObjectTemplate : CSharpTemplate
        {

            ValueObject ValueObject { get; set; }

            BoundedContext BoundedContext
            {
                get
                {
                    return ValueObject.BoundedContext;
                }
            }

            public ValueObjectTemplate(ValueObject valueObject)
            {
                this.ValueObject = valueObject;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = ValueObject.GetUsingClassNames(String.Empty, String.Empty);

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.GetDomainValueObjectPackage()));

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(";\n\nimport java.io.Serializable;\n");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                }

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("\npublic class ");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.Name));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(" implements Serializable\n{\n");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                foreach (Property p in ValueObject.Properties.Values)
                {
                    if (ValueObject.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" = new ");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("();\n\n    public ");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("()\n    {\n        return this.");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(")\n    {\n        this.");

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n\n    public ");

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("()\n    {\n        return this.");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(")\n    {\n        this.");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    }
                }

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                var flattenedProperties = ValueObject.GetFlattenedProperties();

                foreach (var fp in flattenedProperties)
                {
                    if (fp.IsReallyFlattened)
                    {

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.JavaType()));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.PascalCaseName()));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("()\n    {\n        return ");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.GetSourceChainingGetter()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n    }\n\n    protected void set");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.PascalCaseName()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.JavaType()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.CamelCaseName()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(")\n    {\n        ");

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(String.Format(fp.GetSourceChainingSetterFormat(), fp.CamelCaseName())));

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 101 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    }
                }

//line default
//line hidden


//line 105 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("    public ");

//line default
//line hidden


//line 105 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.Name));

//line default
//line hidden


//line 105 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("()\n    {\n    }\n\n    public ");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.Name));

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.GetConstructorParametersString()));

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(")\n    {\n");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                foreach (Property p in ValueObject.Properties.Values)
                {

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("        this.");

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetParameterName()));

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                }

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("    }\n\n    @Override\n    public boolean equals(Object obj)\n    {\n        if (obj " +
                "== this) {\n            return true;\n        }\n        if (obj == null || obj.get" +
                "Class() != this.getClass()) {\n            return false;\n        }\n\n        ");

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.Name));

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.GetGenericTypeParametersString()));

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(" other = (");

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.Name));

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ValueObject.GetGenericTypeParametersString()));

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write(")obj;\n        return true \n");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                foreach (Property p in ValueObject.Properties.Values)
                {

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("            && (");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(" == other.");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(" || (");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(" != null && ");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(".equals(other.");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(")))\n");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                }

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("            ;\n    }\n\n    @Override\n    public int hashCode()\n    {\n        int ha" +
                "sh = 0;\n");

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                foreach (Property p in ValueObject.Properties.Values)
                {

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("        if (this.");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(" != null) {\n            hash += 13 * this.");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write(".hashCode();\n        }\n");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                }

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("        return hash;\n    }\n\n\n");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                // /////////////////////////////////////////////////////////////////////////////////
                if (ValueObject.IsIdValueObject || ValueObject.IsGlobalIdValueObject || ValueObject.IsStateEventIdValueObject())
                {
                    // /////////////////////////////////////////////////////////////////////////////////

                    //var flattenedProperties = ValueObject.GetFlattenedProperties();


//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("    protected static final String[] FLATTENED_PROPERTY_NAMES = new String[]{\n");

//line default
//line hidden


//line 171 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    foreach (var fp in flattenedProperties)
                    {

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("            \"");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.GetPrivateFieldName()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("\",\n");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    }

//line default
//line hidden


//line 179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("    };\n\n    protected static final String[] FLATTENED_PROPERTY_TYPES = new String" +
                    "[]{\n");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    foreach (var fp in flattenedProperties)
                    {

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("            \"");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(fp.JavaType()));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                        this.Write("\",\n");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    }

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    this.Write("    };\n\n    protected static final java.util.Map<String, String> FLATTENED_PROPER" +
                    "TY_TYPE_MAP;\n\n    static {\n        java.util.Map<String, String> m = new java.ut" +
                    "il.HashMap<String, String>();\n        for (int i = 0; i < FLATTENED_PROPERTY_NAM" +
                    "ES.length; i++) {\n            m.put(FLATTENED_PROPERTY_NAMES[i], FLATTENED_PROPE" +
                    "RTY_TYPES[i]);\n        }\n        FLATTENED_PROPERTY_TYPE_MAP = m;\n    }\n\n    pro" +
                    "tected void forEachFlattenedProperty(java.util.function.BiConsumer<String, Objec" +
                    "t> consumer) {\n        for (int i = 0; i < FLATTENED_PROPERTY_NAMES.length; i++)" +
                    " {\n            String pn = FLATTENED_PROPERTY_NAMES[i];\n            if (Characte" +
                    "r.isLowerCase(pn.charAt(0))) {\n                pn = Character.toUpperCase(pn.cha" +
                    "rAt(0)) + pn.substring(1);\n            }\n            java.lang.reflect.Method m " +
                    "= null;\n            try {\n                m = this.getClass().getDeclaredMethod(" +
                    "\"get\" + pn, new Class[0]);\n            } catch (NoSuchMethodException e) {\n     " +
                    "           try {\n                    m = this.getClass().getMethod(\"get\" + pn, n" +
                    "ew Class[0]);\n                } catch (NoSuchMethodException e1) {\n             " +
                    "       throw new RuntimeException(e);\n                }\n            }\n          " +
                    "  Object pv = null;\n            try {\n                pv = m.invoke(this);\n     " +
                    "       } catch (IllegalAccessException | java.lang.reflect.InvocationTargetExcep" +
                    "tion e) {\n                throw new RuntimeException(e);\n            }\n         " +
                    "   consumer.accept(pn, pv);\n        }\n    }\n\n    protected void setFlattenedProp" +
                    "ertyValues(Object... values) {\n        for (int i = 0; i < FLATTENED_PROPERTY_NA" +
                    "MES.length; i++) {\n            String pn = FLATTENED_PROPERTY_NAMES[i];\n        " +
                    "    if (Character.isLowerCase(pn.charAt(0))) {\n                pn = Character.to" +
                    "UpperCase(pn.charAt(0)) + pn.substring(1);\n            }\n            Object v = " +
                    "values[i];\n            Class propCls = v == null ? Object.class : v.getClass();\n" +
                    "            java.lang.reflect.Method setterMethod = null;\n            if (v == n" +
                    "ull) {\n                setterMethod = getNullValueSetterMethod(pn);\n            " +
                    "}\n            if (setterMethod == null) {\n                try {\n                " +
                    "    setterMethod = this.getClass().getDeclaredMethod(\"set\" + pn, new Class[]{pro" +
                    "pCls});\n                } catch (NoSuchMethodException e) {\n                    " +
                    "try {\n                        setterMethod = this.getClass().getMethod(\"set\" + p" +
                    "n, new Class[]{propCls});\n                    } catch (NoSuchMethodException e1)" +
                    " {\n                        throw new RuntimeException(e1);\n                    }" +
                    "\n                }\n            }\n            try {\n                setterMethod." +
                    "invoke(this, v);\n            } catch (IllegalAccessException | java.lang.reflect" +
                    ".InvocationTargetException e) {\n                throw new RuntimeException(e);\n " +
                    "           }\n        }\n    }\n\n    private java.lang.reflect.Method getNullValueS" +
                    "etterMethod(String pascalPropName) {\n        java.lang.reflect.Method m;\n       " +
                    " final String methodName = \"set\" + pascalPropName;\n        m = java.util.Arrays." +
                    "stream(this.getClass().getDeclaredMethods())\n                .filter(me -> me.ge" +
                    "tName().equals(methodName) && me.getParameterCount() == 1)\n                .find" +
                    "First().orElse(null);\n        if (m == null) {\n            m = java.util.Arrays." +
                    "stream(this.getClass().getMethods())\n                    .filter(me -> me.getNam" +
                    "e().equals(methodName) && me.getParameterCount() == 1)\n                    .find" +
                    "First().orElse(null);\n        }\n        return m;\n    }\n");

//line default
//line hidden


//line 272 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                    // /////////////////////////////////////////////////////////////////////////////////
                } //end if
                  // /////////////////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                this.Write("\n}\n\n");

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ValueObjectTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"


        public class EntityBaseStateDtoTemplate : CSharpTemplate
        {

            EntityBase EntityBase { get; set; }

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            public bool OnlyDtos { get; set; }

            protected virtual bool IsEntityBaseSaveable
            {
                get
                {
                    return (this.EntityBase.Entities != null) && (this.EntityBase.Entities.Count > 0);
                }
            }

            // ///////////////////////////////////////////
            protected virtual string TypeName
            {
                get
                {
                    return EntityBase.GetNameForState();
                }
            }

            protected virtual bool IsInSubtype
            {
                get
                {
                    return false;
                }
            }

            protected virtual string ExtendsBaseInterfaceString
            {
                get
                {
                    return String.Empty;
                }
            }

            protected virtual IList<Property> JavaDerivedProperties
            {
                get
                {
                    return new Property[0];//todo
                }
            }

            // ///////////////////////////////////////////

            public EntityBaseStateDtoTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "Dto");
                var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "");


//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(";\r\n\r\nimport java.util.*;\r\n");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(";\r\n");

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                }

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(".*;\r\n\r\n\r\npublic class ");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("StateDto");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ExtendsBaseInterfaceString));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("\r\n{\r\n\r\n");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                var basicProperties = new NamedValueDictionary<Property>();
                basicProperties.Add(EntityBase.Id.Name, EntityBase.Id);

                foreach (Property p in EntityBase.Properties.Values)
                {
                    //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                    if (p.IsCollectionProperty) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {
                        basicProperties.Add(p.Name, p);
                    }
                }
                var reservedPropertyVersion = EntityBase.Properties[EntityBase.ReservedProperties.Version];
                basicProperties.Add(reservedPropertyVersion.Name, reservedPropertyVersion);//basicPropertiesIncludingReserved.Add(reservedPropertyVersion.Name, reservedPropertyVersion);

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                if (EntityBase is Entity)
                {
                    var entity = EntityBase as Entity;
                    foreach (var p in entity.GetTransientOuterIdProperties())
                    {
                        basicProperties.Add(p.Name, p);
                    }
                }

                var basicPropertiesIncludingReserved = new NamedValueDictionary<Property>();
                foreach (var p in basicProperties.Values)
                {
                    basicPropertiesIncludingReserved.Add(p.Name, p);
                }
                var reservedPropertyCreatedBy = EntityBase.Properties[EntityBase.ReservedProperties.CreatedBy];
                var reservedPropertyCreatedAt = EntityBase.Properties[EntityBase.ReservedProperties.CreatedAt];
                var reservedPropertyUpdatedBy = EntityBase.Properties[EntityBase.ReservedProperties.UpdatedBy];
                var reservedPropertyUpdatedAt = EntityBase.Properties[EntityBase.ReservedProperties.UpdatedAt];
                basicPropertiesIncludingReserved.Add(reservedPropertyCreatedBy.Name, reservedPropertyCreatedBy);
                basicPropertiesIncludingReserved.Add(reservedPropertyCreatedAt.Name, reservedPropertyCreatedAt);
                basicPropertiesIncludingReserved.Add(reservedPropertyUpdatedBy.Name, reservedPropertyUpdatedBy);
                basicPropertiesIncludingReserved.Add(reservedPropertyUpdatedAt.Name, reservedPropertyUpdatedAt);


//line default
//line hidden


//line 132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                // //////////////////////////////////////////////////////////
                if (!this.IsInSubtype)
                {
                    // //////////////////////////////////////////////////////////

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    var basicPropertiesIncludingReservedAndInSubtypes = new List<Property>(basicPropertiesIncludingReserved.Values);
                    basicPropertiesIncludingReservedAndInSubtypes.AddRange(EntityBase.AllSubtypes.Values
                        .SelectMany(s => s.Properties == null ? new Property[0] : s.Properties.Values.Where(p => !p.IsHoisted))
                        .Where(p => !basicPropertiesIncludingReservedAndInSubtypes.Contains(p))
                    );
                    foreach (Property p in basicPropertiesIncludingReservedAndInSubtypes)
                    {
                        //if (BoundedContext.IsClrValueType(p.Type))
                        //{
                        //} else {
                        if (false) //if (EntityBase.FindValueObject(p.Type) != null)
                        {

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("Dto ");

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("Dto get");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("Dto ");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" get");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        }
                        //}
                        //if (basicProperties.ContainsKey(p.Name))
                        //{
                        //}
                    }


//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("StateDto[] ");

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("StateDto[] get");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\t\r\n\r\n    public void set");

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("StateDto[] ");

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                    {
                        if (p.IsDerived) { continue; } //todo???
                        if (p.IsValueObjectCollectionProperty())
                        {
                            //var vo = EntityBase.FindValueObject(p.ItemType);
                            //bool needDto = (vo != null);
                            bool needDto = false;

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("[] ");

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("[] get");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("() {\r\n        return this.");

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("[] ");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(") {\r\n        this.");

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 232 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    // //////////////////////////////////////////////////////////
                } //if (!this.IsInSubtype)
                  // //////////////////////////////////////////////////////////

//line default
//line hidden


//line 241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                // ////////////////////////////////////////////////////
                foreach (var p in this.JavaDerivedProperties)
                {

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("    private ");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                }

//line default
//line hidden


//line 261 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                // /////////////////////
                if (!OnlyDtos)
                {
                    // /////////////////////

//line default
//line hidden


//line 266 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("\r\n    public static class DtoConverter extends AbstractStateDtoConverter\r\n    {\r\n" +
                    "");

//line default
//line hidden


//line 269 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    var collectionPropertyNames = new List<string>();
                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)//.Where(e => !e.IsHoisted))
                        {
                            //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                            var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                            //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);
                            collectionPropertyNames.Add(collectionProperty.Name);
                        }
                    }

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("        public static Collection<String> collectionFieldNames = Arrays.asList(new" +
                    " String[]{");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionPropertyNames.Map(p => String.Format("\"{0}\"", p)).ConcatWithSeparator(", ")));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("});\r\n\r\n        @Override\r\n        protected boolean isCollectionField(String fiel" +
                    "dName) {\r\n            return CollectionUtils.collectionContainsIgnoringCase(coll" +
                    "ectionFieldNames, fieldName);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    // /////////////////////////////////////////////////////////////////
                    string[] entityStateNames = new string[] { EntityBase.GetNameForState() };
                    //EntityBase.GetNameForState() != TypeName ? new string[] { EntityBase.GetNameForState(), TypeName } : new string[] { EntityBase.GetNameForState() };
                    // /////////////////////////////////////////////////////////////////
                    foreach (var entityStateName in entityStateNames)
                    {

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("        public ");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDto[] to");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDtoArray(Iterable<");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateName));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("State> states) {\r\n            return to");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDtoList(states).toArray(new ");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDto[0]);\r\n        }\r\n\r\n        public List<");

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDto> to");

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDtoList(Iterable<");

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateName));

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("State> states) {\r\n            ArrayList<");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDto> stateDtos = new ArrayList();\r\n            for (");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("State s : states) {\r\n                ");

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDto dto = to");

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        this.Write("StateDto(s);\r\n                stateDtos.add(dto);\r\n            }\r\n            ret" +
                        "urn stateDtos;\r\n        }\r\n\r\n");

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    }

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("        public ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("StateDto to");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("StateDto(");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("State state)\r\n        {\r\n            if(state == null) {\r\n                return " +
                    "null;\r\n            }\r\n            ");

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("StateDto dto = new ");

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("StateDto();\r\n");

//line default
//line hidden


//line 318 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    foreach (Property p in basicPropertiesIncludingReserved.Values.Where(p => !p.IsHoisted || !EntityBase.IsPolymorphic()))
                    {
                        if (p.IsDerived) { continue; }
                        var stateObjName = "state";
                        WriteSetSimpleProperty(stateObjName, p);
                    }

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    foreach (Property p in EntityBase.Properties.Values.Where(p => !p.IsHoisted || !EntityBase.IsPolymorphic()))
                    {
                        if (p.IsValueObjectCollectionProperty())
                        {
                            var stateObjName = "state";
                            WriteSetVOCollectionProperty(stateObjName, p);
                        }
                    }

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values.Where(e => !e.IsHoisted || !EntityBase.IsPolymorphic()))
                        {
                            var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                            var stateObjName = "state";
                            WriteSetEntityCollectionProperty(stateObjName, collectionProperty);
                        }
                    }

//line default
//line hidden


//line 347 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    // ///////////////////////////
                    if (EntityBase.IsPolymorphic())
                    {
                        IEnumerable<EntityBaseSubtype> subtypes = null;
                        if (!IsInSubtype)
                        {
                            subtypes = EntityBase.AllSubtypes.Values;
                        }
                        else
                        {
                            var ssts = BoundedContext.GetEntitySelfTypeAndAllSupertypes(TypeName);
                            subtypes = ssts.Take(ssts.Count() - 1).Reverse().Select(e => (EntityBaseSubtype)e);
                        }
                        foreach (var subtype in subtypes)
                        {

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("\r\n          // ////////////////\r\n          if (state instanceof ");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.Name));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("State) {\r\n            ");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.Name));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("State ss = (");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.Name));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("State) state;\r\n            ");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.SetDiscriminatorPropertyString("dto", subtype.Name)));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("\r\n");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            if (subtype.Properties != null)
                            {
                                foreach (var p in subtype.Properties.Values)
                                {
                                    // ////////////////////////////////////////////////
                                    if (p.IsDerived && !this.IsInSubtype)
                                    { continue; } // TODO: IS this OK?
                                                  // ////////////////////////////////////////////////
                                    if (p.IsCollectionProperty) { continue; }
                                    WriteSetSimpleProperty("ss", p);
                                }
                            }
                            if (subtype.Properties != null)
                            {
                                foreach (Property p in subtype.Properties.Values)
                                {
                                    if (p.IsDerived) { continue; } //todo???
                                    if (p.IsValueObjectCollectionProperty())
                                    {
                                        WriteSetVOCollectionProperty("ss", p);
                                    }
                                }
                            }
                            if (subtype.Entities != null)
                            {
                                foreach (Entity e in subtype.Entities.Values)
                                {
                                    var collectionProperty = e.GetCollectionPropertyByItemType(e.Name);
                                    WriteSetEntityCollectionProperty("ss", collectionProperty);
                                }
                            }

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                            this.Write("          }\r\n          // ////////////////\r\n");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("            return dto;\r\n        }\r\n\r\n    }\r\n");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    // /////////////////////
                } // end if (!OnlyDtos)
                  // /////////////////////


//line default
//line hidden


//line 415 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("}\r\n\r\n");

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private void WriteSetEntityCollectionProperty(string stateObjName, Property collectionProperty)
            {

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("            if (returnedFieldsContains(\"");

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("\")) {\r\n                ArrayList<");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("StateDto> arrayList = new ArrayList();\r\n                if (");

//line default
//line hidden


//line 426 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 426 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 426 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 426 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("() != null) {\r\n                    ");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("StateDto.DtoConverter conv = new ");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("StateDto.DtoConverter();\r\n                    String returnFS = CollectionUtils.m" +
                "apGetValueIgnoringCase(getReturnedFields(), \"");

//line default
//line hidden


//line 428 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 428 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("\");\r\n                    if(returnFS != null) { conv.setReturnedFieldsString(retu" +
                "rnFS); } else { conv.setAllFieldsReturned(this.getAllFieldsReturned()); }\r\n     " +
                "               for (");

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("State s : ");

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("()) {\r\n                        arrayList.add(conv.to");

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("StateDto(s));\r\n                    }\r\n                }\r\n                dto.set");

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("(arrayList.toArray(new ");

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("StateDto[0]));\r\n            }\r\n");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

            }

            private void WriteSetVOCollectionProperty(string stateObjName, Property p)
            {

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("            if (returnedFieldsContains(\"");

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("\")) {\r\n");

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                //var vo = EntityBase.FindValueObject(p.ItemType);
                //bool needDto = (vo != null);
                bool needDto = false;

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("                ArrayList<");

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("> arrayList = new ArrayList();\r\n                if (");

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("() != null) {\r\n                    for (");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(" s : ");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("()) {\r\n                        arrayList.add(");

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? ("new " + p.ItemType + "DtoWrapper(s)") : "s"));

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(");\r\n                    }\r\n                }\r\n                dto.set");

//line default
//line hidden


//line 454 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 454 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("(arrayList.toArray(new ");

//line default
//line hidden


//line 454 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 454 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 454 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("[0]));\r\n            }\r\n");

//line default
//line hidden


//line 456 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

            }

            private void WriteSetSimpleProperty(string stateObjName, Property p)
            {

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("            if (returnedFieldsContains(\"");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("\")) {\r\n");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                if (false) //if (EntityBase.FindValueObject(p.Type) != null)
                {

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("                dto.set");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("((");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("() == null) ? null : new ");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("DtoWrapper(");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("()));\r\n");

//line default
//line hidden


//line 468 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("                dto.set");

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjName));

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                    this.Write("());\r\n");

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                }

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

                this.Write("            }\r\n");

//line default
//line hidden


//line 476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateDtoTemplate.tt"

            }
        }

//line default
//line hidden


//line 9 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateDtoTemplate.tt"


        public class AggregateStateDtoTemplate : EntityBaseStateDtoTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateStateDtoTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDtoTemplate.tt"


        public class EntityStateDtoTemplate : EntityBaseStateDtoTemplate
        {

            Entity Entity { get; set; }

            public EntityStateDtoTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"


        public class EntityBaseAbstractCommandDtoTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public bool OnlyDtos { get; set; }

            public EntityBaseAbstractCommandDtoTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "Dto");
                var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write(";\r\n\r\n");

//line default
//line hidden


//line 31 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    this.Write(";\r\n");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                }

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write(".AbstractCommand;\r\n\r\npublic abstract class Abstract");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write("CommandDto extends AbstractCommand\r\n{\r\n");

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                var abstractCmdProperties = new NamedValueDictionary<Property>();
                abstractCmdProperties.Add(EntityBase.Id.Name, EntityBase.Id);


//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    var aggregate = ((Aggregate)EntityBase);
                    abstractCmdProperties.Add(aggregate.ReservedProperties.Version, aggregate.Properties[aggregate.ReservedProperties.Version]);
                }

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write("\r\n");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                foreach (Property i in abstractCmdProperties.Values)
                {
                    var p = i;

                    //if (BoundedContext.IsClrValueType(p.Type)) { } else {
                    if (false) //if (EntityBase.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("    /**\r\n     * ");

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("\r\n     */\r\n    private ");

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("Dto ");

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("Dto get");

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("Dto ");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("    /**\r\n     * ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("\r\n     */\r\n    private ");

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    }
                    //}
                }

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                // /////////////////////
                if (!OnlyDtos)
                {
                    //if (!EntityBase.IsNoGeneratingSimpleCommandImplements()) {
                    // /////////////////////

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    /////////////////////////////////////////////////////////////
                    if (!EntityBase.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("\r\n    public void copyTo(");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("Command command) {\r\n");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        foreach (Property i in abstractCmdProperties.Values)
                        {
                            var p = i;

                            //if (BoundedContext.IsClrValueType(p.Type)) { } else {
                            if (false) //if (EntityBase.FindValueObject(p.Type) != null)
                            {

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("        command.set");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("((this.get");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("() == null) ? null : this.get");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("().to");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("());\r\n");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                            }
                            else
                            {

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("        command.set");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("(this.get");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                                this.Write("());\r\n");

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                            }
                            //}
                        }

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("        \r\n        command.set");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetRequesterIdName())));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("(this.get");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetRequesterIdName())));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("());\r\n        command.set");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("(this.get");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        this.Write("());\r\n    }\r\n");

//line default
//line hidden


//line 140 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                      /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                    // /////////////////////
                    //} //if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                } // end if (!OnlyDtos)
                  // /////////////////////

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                this.Write("\r\n}\r\n");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandDtoTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractCommandDtoTemplate.tt"


        public class AggregateAbstractCommandDtoTemplate : EntityBaseAbstractCommandDtoTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateAbstractCommandDtoTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractCommandDtoTemplate.tt"


        public class EntityAbstractCommandDtoTemplate : EntityBaseAbstractCommandDtoTemplate
        {

            Entity Entity { get; set; }

            public EntityAbstractCommandDtoTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"


        public class EntityBaseCreateOrMergePatchCommandDtoTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public bool OnlyDtos { get; set; }

            public bool IsImplementingCommandInterface
            {
                get { return !OnlyDtos && EntityBase.IsCommandDtoImplementingCommandInterface(); }
            }

            public EntityBaseCreateOrMergePatchCommandDtoTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "Dto");
                var PascalCaseCommandTypeDiscriminatorName = ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName());
                var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(";\r\n\r\n");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(";\r\n");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                }

//line default
//line hidden


//line 45 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("\r\npublic class CreateOrMergePatch");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("Dto extends Abstract");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("CommandDto");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsImplementingCommandInterface ? String.Format(" implements {0}Command.CreateOrMergePatch{1}", EntityBase.GetNameForCommand(), EntityBase.GetNameForCommand()) : String.Empty));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("\r\n{\r\n");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                var basicProperties = new NamedValueDictionary<Property>();
                //basicProperties.Add(EntityBase.Id.Name, EntityBase.Id);

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsCollectionProperty) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                    {
                        basicProperties.Add(p.Name, p);
                    }
                }

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                if (EntityBase is Entity)
                {
                    var entity = EntityBase as Entity;
                    //foreach (var p in entity.GetTransientOuterIdProperties())
                    //{
                    //	basicProperties.Add(p.Name, p);
                    //}
                }

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("\r\n");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                foreach (Property i in basicProperties.Values)
                {
                    var p = i;
                    //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                    if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }
                    //if (BoundedContext.IsClrValueType(p.Type)) { } else {
                    if (false) //if (EntityBase.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    /**\r\n     * ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("\r\n     */\r\n    private ");

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto ");

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto get");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto ");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 101 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    /**\r\n     * ");

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("\r\n     */\r\n    private ");

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 106 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 106 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 106 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 106 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }
                    //}
                }

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                foreach (Property p in basicProperties.Values)
                {
                    var cmdPairs = EntityBase.GetPropertyCommandTypeAndNamePairs(p.Name);
                    foreach (Tuple<string, string> cmdPair in cmdPairs)
                    {
                        if (cmdPair != null && cmdPair.Item2 != null)
                        {
                            var cmdType = BoundedContext.GetJavaType(cmdPair.Item1);
                            var cmdName = cmdPair.Item2;
                            var cmdCamelCaseName = BoundedContext.GetCamelCaseName(cmdName);

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" get");

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdName));

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("() {\r\n        return this.");

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdName));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(") {\r\n        this.");

//line default
//line hidden


//line 140 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 140 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 140 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 140 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        }
                    }
                }

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsValueObjectCollectionProperty())
                    {
                        //var vo = EntityBase.FindValueObject(p.ItemType);
                        //bool needDto = (vo != null);
                        //bool needDto = false;

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    /**\r\n     * ");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("\r\n     */\r\n    private ");

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("[] get");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("() {\r\n        return this.");

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(") {\r\n        this.");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("\r\n");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                        //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    private CreateOrMergePatch");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto[] ");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" = new CreateOrMergePatch");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto[0];\r\n\r\n    public CreateOrMergePatch");

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto[] get");

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("()\r\n    {\r\n        return this.");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("(CreateOrMergePatch");

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto[] ");

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(")\r\n    {\r\n        this.");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.CamelCaseName()));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 195 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                foreach (Property i in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    var p = i;
                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                    if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                    {

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    private Boolean isProperty");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Removed;\r\n\r\n    public Boolean getIsProperty");

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Removed()\r\n    {\r\n        return this.isProperty");

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Removed;\r\n    }\r\n\r\n    public void setIsProperty");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Removed(Boolean removed)\r\n    {\r\n        this.isProperty");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Removed = removed;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                // /////////////////////
                if (!OnlyDtos)
                {
                    // /////////////////////

                    /////////////////////////////////////////////////////////////
                    if (!EntityBase.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    public void copyTo(CreateOrMergePatch");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" command)\r\n    {\r\n        ((Abstract");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("CommandDto) this).copyTo(command);\r\n");

//line default
//line hidden


//line 239 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        foreach (Property i in basicProperties.Values)
                        {
                            var p = i;
                            //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                            if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }
                            //if (BoundedContext.IsClrValueType(p.Type)) { } else {

                            //bool noDto = true;
                            //p.ConvertPropertyDtoToDomainModelTypeString("this.get" + p.Name + "()", noDto)

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        command.set");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture("this.get" + p.Name + "()"));

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(");\r\n");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            //}
                        }

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                        {
                            if (p.IsValueObjectCollectionProperty())
                            {
                                //bool noDto = true;
                                //p.ConvertPropertyDtoToDomainModelTypeString("this.get" + p.Name + "()", noDto)

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("        command.set");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture("this.get" + p.Name + "()"));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(");\r\n");

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } // end if(!EntityBase.IsAbsolutelyNoEventSourcing())
                      /////////////////////////////////////////////////////////////
                } // end if (!OnlyDtos)

//line default
//line hidden


//line 276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"


                // /////////////////////
                if (!OnlyDtos)
                {
                    // /////////////////////

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"


                    if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    public ");

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Command toCommand()\r\n    {\r\n");

//line default
//line hidden


//line 289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        if (BoundedContext.GetHttpPutToMergePatchEnabled())
                        {

//line default
//line hidden


//line 293 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        if (get");

//line default
//line hidden


//line 293 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 293 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("() == null) {\r\n            set");

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(COMMAND_TYPE_MERGE_PATCH);\r\n        }\r\n");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        }

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        if (COMMAND_TYPE_CREATE.equals(get");

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("())) {\r\n");

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////

                        if (!EntityBase.IsAbsolutelyNoEventSourcing())
                        {
                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            Abstract");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.SimpleCreate");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" command = new Abstract");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.SimpleCreate");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("();\r\n            copyTo((Abstract");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.AbstractCreate");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(") command);\r\n");

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            if (EntityBase.Entities != null)
                            {
                                foreach (Entity e in EntityBase.Entities.Values)
                                {
                                    var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                                    //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("            if (this.get");

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("() != null) {\r\n                for (CreateOrMergePatch");

//line default
//line hidden


//line 318 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 318 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Dto cmd : this.get");

//line default
//line hidden


//line 318 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 318 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("()) {\r\n                    command.get");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("().add((");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Command.Create");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(") cmd.toCommand());\r\n                }\r\n            }\r\n");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            return command;\r\n");

//line default
//line hidden


//line 327 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        }
                        else
                        { //if 
                          /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            return toCreate");

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("();\r\n");

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        } // end if... 

                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 339 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        ////////////////
                        if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 345 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        } else if (COMMAND_TYPE_MERGE_PATCH.equals(get");

//line default
//line hidden


//line 345 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 345 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("())) {\r\n");

//line default
//line hidden


//line 346 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////

                            if (!EntityBase.IsAbsolutelyNoEventSourcing())
                            {
                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            Abstract");

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(" command = new Abstract");

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 353 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("();\r\n            copyTo((Abstract");

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(") command);\r\n");

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                if (EntityBase.Entities != null)
                                {
                                    foreach (Entity e in EntityBase.Entities.Values)
                                    {
                                        var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                                        //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write("            if (this.get");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write("() != null) {\r\n                for (CreateOrMergePatch");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write("Dto cmd : this.get");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write("()) {\r\n                    command.get");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                        this.Write("Commands().add(cmd.toCommand());\r\n                }\r\n            }\r\n");

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    }
                                }

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            return command;\r\n");

//line default
//line hidden


//line 373 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            }
                            else
                            { // 
                              /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            return toMergePatch");

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("();\r\n");

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            } // end if... 

                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 385 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            ////////////////
                        } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 390 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        } \r\n");

//line default
//line hidden


//line 391 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        if (EntityBase is Entity)
                        {

//line default
//line hidden


//line 395 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            ////////////////
                            if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                            {
                                ////////////////

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("        else if (COMMAND_TYPE_REMOVE.equals(get");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("())) {\r\n");

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////

                                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                                {
                                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("            Abstract");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Command.SimpleRemove");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(" command = new Abstract");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Command.SimpleRemove");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("();\r\n            ((Abstract");

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("CommandDto) this).copyTo(command);\r\n            return command;\r\n");

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    /////////////////////////////////////////////////////////////
                                }
                                else
                                {
                                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("            //todo//return toRemove");

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("();\r\n");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    /////////////////////////////////////////////////////////////
                                } // end if... 

                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("        }\r\n");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                ////////////////
                            } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                              ////////////////

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        }

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        throw new UnsupportedOperationException(\"Unknown command type:\" + get");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("());\r\n    }\r\n\r\n");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }//end if (!EntityBase.IsNoGeneratingSimpleCommandImplements()) {

                    // ////////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("\r\n    public ");

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("Command toSubclass() {\r\n");

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    if (BoundedContext.GetHttpPutToMergePatchEnabled())
                    {

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        if (get");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("() == null) {\r\n            set");

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("(COMMAND_TYPE_MERGE_PATCH);\r\n        }\r\n");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("        if (COMMAND_TYPE_CREATE.equals(get");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("()) || null == get");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("()) {\r\n");

//line default
//line hidden


//line 454 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    /////////////////////////////////////////////////////////////

                    if (!EntityBase.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("            Create");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto command = new Create");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Dto();\r\n            copyTo((Create");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(") command);\r\n");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        if (EntityBase.Entities != null)
                        {
                            foreach (Entity e in EntityBase.Entities.Values)
                            {
                                var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                                //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            if (this.get");

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("() != null) {\r\n                for (CreateOrMergePatch");

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto cmd : this.get");

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("()) {\r\n                    if (cmd.get");

//line default
//line hidden


//line 473 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 473 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("() == null) { cmd.set");

//line default
//line hidden


//line 473 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 473 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("(COMMAND_TYPE_CREATE); }\r\n                    command.getCreate");

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Commands().add((");

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command.Create");

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(") cmd.toSubclass());\r\n                }\r\n            }\r\n");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("            return command;\r\n");

//line default
//line hidden


//line 482 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    }
                    else
                    { //if 
                      /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("            return toCreate");

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("();\r\n");

//line default
//line hidden


//line 488 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } // end if... 

                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 494 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        } else if (COMMAND_TYPE_MERGE_PATCH.equals(get");

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("())) {\r\n");

//line default
//line hidden


//line 501 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////

                        if (!EntityBase.IsAbsolutelyNoEventSourcing())
                        {
                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            MergePatch");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto command = new MergePatch");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto();\r\n            copyTo((MergePatch");

//line default
//line hidden


//line 509 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 509 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(") command);\r\n");

//line default
//line hidden


//line 510 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            if (EntityBase.Entities != null)
                            {
                                foreach (Entity e in EntityBase.Entities.Values)
                                {
                                    var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                                    //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

//line default
//line hidden


//line 518 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("            if (this.get");

//line default
//line hidden


//line 518 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 518 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("() != null) {\r\n                for (CreateOrMergePatch");

//line default
//line hidden


//line 519 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 519 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Dto cmd : this.get");

//line default
//line hidden


//line 519 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 519 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("()) {\r\n                    command.get");

//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Commands().add(cmd.toSubclass());\r\n                }\r\n            }\r\n");

//line default
//line hidden


//line 523 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            return command;\r\n");

//line default
//line hidden


//line 528 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        }
                        else
                        { // 
                          /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 533 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            return toMergePatch");

//line default
//line hidden


//line 533 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 533 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("();\r\n");

//line default
//line hidden


//line 534 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        } // end if... 

                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 540 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("        } \r\n");

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    if (EntityBase is Entity)
                    {

//line default
//line hidden


//line 550 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        ////////////////
                        if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        else if (COMMAND_TYPE_REMOVE.equals(get");

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("())) {\r\n");

//line default
//line hidden


//line 557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////

                            if (!EntityBase.IsAbsolutelyNoEventSourcing())
                            {
                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            Remove");

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto command = new Remove");

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto();\r\n            ((Abstract");

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("CommandDto) this).copyTo(command);\r\n            return command;\r\n");

//line default
//line hidden


//line 567 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            }
                            else
                            {
                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 572 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            //todo//return toRemove");

//line default
//line hidden


//line 572 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 572 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("();\r\n");

//line default
//line hidden


//line 573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            } // end if... 

                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 579 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        }\r\n");

//line default
//line hidden


//line 580 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            ////////////////
                        } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 585 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    }

//line default
//line hidden


//line 588 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("        throw new UnsupportedOperationException(\"Unknown command type:\" + get");

//line default
//line hidden


//line 588 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 588 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("());\r\n    }\r\n\r\n");

//line default
//line hidden


//line 591 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    /////////////////////////////////////////////////////////////

                    if (!EntityBase.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 598 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    public void copyTo(Create");

//line default
//line hidden


//line 598 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 598 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" command)\r\n    {\r\n        copyTo((CreateOrMergePatch");

//line default
//line hidden


//line 600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(") command);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 603 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        ////////////////
                        if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 609 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("    public void copyTo(MergePatch");

//line default
//line hidden


//line 609 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 609 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" command)\r\n    {\r\n        copyTo((CreateOrMergePatch");

//line default
//line hidden


//line 611 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 611 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(") command);\r\n");

//line default
//line hidden


//line 612 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            foreach (Property i in EntityBase.GetSelfAndAllSubtypeProperties())
                            {
                                var p = i;
                                if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                                if (p.IsAccountBalanceProperty()) { continue; }
                                //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                                if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }
                                if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                                {

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("        command.setIsProperty");

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Removed(this.getIsProperty");

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Removed());\r\n");

//line default
//line hidden


//line 624 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 630 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            ////////////////
                        } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 635 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    }
                    else
                    { //if 
                      /////////////////////////////////////////////////////////////

                        var enclosingClassName = "CreateOrMergePatch" + EntityBase.GetNameForCommand() + "Dto";


//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" toCreate");

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("() {\r\n        return new ");

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("() {\r\n");

//line default
//line hidden


//line 645 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.CreateOrMergePatchCommandDtoNestedCommandClassPropertiesString(enclosingClassName)));

//line default
//line hidden


//line 645 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("\r\n");

//line default
//line hidden


//line 646 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        if (EntityBase.Entities != null)
                        {
                            foreach (Entity e in EntityBase.Entities.Values)
                            {
                                var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                                //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);
                                // ///////////////////////////////////////////////
                                // todo todo todo
                                throw new NotSupportedException();
                                // ///////////////////////////////////////////////
                            }
                        }

//line default
//line hidden


//line 660 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        };\r\n    }\r\n\r\n");

//line default
//line hidden


//line 663 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        ////////////////
                        if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" toMergePatch");

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("() {\r\n        return new ");

//line default
//line hidden


//line 670 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 670 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 670 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 670 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("() {\r\n");

//line default
//line hidden


//line 671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.MergePatchCommandDtoNestedCommandClassPropertiesString(enclosingClassName)));

//line default
//line hidden


//line 671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("\r\n");

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            if (EntityBase.Entities != null)
                            {
                                foreach (Entity e in EntityBase.Entities.Values)
                                {
                                    var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                                    //var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);
                                    // ///////////////////////////////////////////////
                                    // todo todo todo
                                    throw new NotSupportedException();
                                    // ///////////////////////////////////////////////
                                }
                            }

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        };\r\n    }\r\n\r\n");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            ////////////////
                        } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 694 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } // end if... 

                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    // /////////////////////

                } // end if (!OnlyDtos)
                  // /////////////////////

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("    public static class Create");

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("Dto extends CreateOrMergePatch");

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("Dto");

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsImplementingCommandInterface ? String.Format(" implements {0}Command.Create{1}", EntityBase.GetNameForCommand(), EntityBase.GetNameForCommand()) : String.Empty));

//line default
//line hidden


//line 706 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("\r\n    {\r\n        public Create");

//line default
//line hidden


//line 708 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 708 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("Dto() {\r\n            this.");

//line default
//line hidden


//line 709 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 709 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(" = COMMAND_TYPE_CREATE;\r\n        }\r\n\r\n        @Override\r\n        public String ge" +
                "t");

//line default
//line hidden


//line 713 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 713 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("() {\r\n            return COMMAND_TYPE_CREATE;\r\n        }\r\n");

//line default
//line hidden


//line 716 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                // /////////////////////
                if (!OnlyDtos)
                {
                    if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                    {
                        // /////////////////////

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        public ");

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(" toCreate");

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("()\r\n        {\r\n");

//line default
//line hidden


//line 724 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        /////////////////////////////////////////////////////////////
                        //if (!EntityBase.IsNoGeneratingSimpleCommandImplements()) {
                        if (!EntityBase.IsAbsolutelyNoEventSourcing())
                        {
                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 731 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            return (");

//line default
//line hidden


//line 731 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 731 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 731 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 731 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(") toCommand();\r\n");

//line default
//line hidden


//line 732 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        }
                        else
                        { //if (!EntityBase...
                          /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 737 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("            return super.toCreate");

//line default
//line hidden


//line 737 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 737 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("();\r\n");

//line default
//line hidden


//line 738 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        } // end if... 
                          //} // end if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                          /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 744 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        this.Write("        }\r\n");

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        // /////////////////////
                    } //if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                } // end if (!OnlyDtos)
                  // /////////////////////

//line default
//line hidden


//line 751 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("\r\n");

//line default
//line hidden


//line 752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                // ///////////////////////////////////////////////
                if (IsImplementingCommandInterface)
                {
                    // ///////////////////////////////////////////////

                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 763 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("\r\n        @Override\r\n        public Create");

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("CommandCollection getCreate");

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Commands() {\r\n            return new Create");

//line default
//line hidden


//line 766 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 766 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("CommandCollection() {\r\n                @Override\r\n                public void add" +
                            "(");

//line default
//line hidden


//line 768 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 768 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 768 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 768 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" c) {\r\n                    java.util.List<CreateOrMergePatch");

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto> list = new java.util.ArrayList<>(java.util.Arrays.asList(get");

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("()));\r\n                    list.add((CreateOrMergePatch");

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto) c);\r\n                    set");

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(list.toArray(new CreateOrMergePatch");

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto[0]));\r\n                }\r\n\r\n                @Override\r\n                public" +
                            " void remove(");

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" c) {\r\n                    java.util.List<CreateOrMergePatch");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto> list = new java.util.ArrayList<>(java.util.Arrays.asList(get");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("()));\r\n                    list.remove((CreateOrMergePatch");

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto) c);\r\n                    set");

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(list.toArray(new CreateOrMergePatch");

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto[0]));\r\n                }\r\n\r\n                @Override\r\n                public" +
                            " void clear() {\r\n                    set");

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(new CreateOrMergePatch");

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto[]{});\r\n                }\r\n\r\n                @Override\r\n                public" +
                            " java.util.Iterator<");

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("> iterator() {\r\n                    return java.util.Arrays.stream(get");

//line default
//line hidden


//line 788 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 788 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("())\r\n                            .map(e -> {if (e.get");

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("()==null) e.set");

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("(COMMAND_TYPE_CREATE);return (");

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 789 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(") e.toSubclass();}).iterator();\r\n                }\r\n            };\r\n        }\r\n\r\n" +
                            "        @Override\r\n        public ");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" newCreate");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("() {\r\n            return new CreateOrMergePatch");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto.Create");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Dto();\r\n        }\r\n\r\n");

//line default
//line hidden


//line 799 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                        }
                    }
                    // //////////////////////////////////////////////////
                } // end if (IsImplementingCommandInterface)
                  // //////////////////////////////////////////////////

//line default
//line hidden


//line 806 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 808 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("    public static class MergePatch");

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("Dto extends CreateOrMergePatch");

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("Dto");

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsImplementingCommandInterface ? String.Format(" implements {0}Command.MergePatch{1}", EntityBase.GetNameForCommand(), EntityBase.GetNameForCommand()) : String.Empty));

//line default
//line hidden


//line 814 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("\r\n    {\r\n        public MergePatch");

//line default
//line hidden


//line 816 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 816 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("Dto() {\r\n            this.");

//line default
//line hidden


//line 817 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 817 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(" = COMMAND_TYPE_MERGE_PATCH;\r\n        }\r\n\r\n        @Override\r\n        public Stri" +
                    "ng get");

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("() {\r\n            return COMMAND_TYPE_MERGE_PATCH;\r\n        }\r\n");

//line default
//line hidden


//line 824 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    // /////////////////////
                    if (!OnlyDtos)
                    {
                        if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                        {
                            // /////////////////////

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        public ");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(" toMergePatch");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("()\r\n        {\r\n");

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            /////////////////////////////////////////////////////////////
                            //if (!EntityBase.IsNoGeneratingSimpleCommandImplements()) {
                            if (!EntityBase.IsAbsolutelyNoEventSourcing())
                            {
                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 839 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            return (");

//line default
//line hidden


//line 839 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 839 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command.MergePatch");

//line default
//line hidden


//line 839 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 839 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(") toCommand();\r\n");

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            }
                            else
                            {
                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 845 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("            return super.toMergePatch");

//line default
//line hidden


//line 845 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 845 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("();\r\n");

//line default
//line hidden


//line 846 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            } // end if... 

                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 852 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            this.Write("        }\r\n");

//line default
//line hidden


//line 853 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                            // /////////////////////
                        } //if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                    } // end if (!OnlyDtos)
                      // /////////////////////

//line default
//line hidden


//line 859 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("\r\n");

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    // ///////////////////////////////////////////////
                    if (IsImplementingCommandInterface)
                    {
                        // ///////////////////////////////////////////////

                        if (EntityBase.Entities != null)
                        {
                            foreach (Entity e in EntityBase.Entities.Values)
                            {
                                var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 871 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("\r\n        @Override\r\n        public ");

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("CommandCollection get");

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Commands() {\r\n            return new ");

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("CommandCollection() {\r\n                @Override\r\n                public void add" +
                                "(");

//line default
//line hidden


//line 876 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 876 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command c) {\r\n                    java.util.List<CreateOrMergePatch");

//line default
//line hidden


//line 877 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 877 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto> list = new java.util.ArrayList<>(java.util.Arrays.asList(get");

//line default
//line hidden


//line 877 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 877 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("()));\r\n                    list.add((CreateOrMergePatch");

//line default
//line hidden


//line 878 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 878 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto) c);\r\n                    set");

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("(list.toArray(new CreateOrMergePatch");

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto[0]));\r\n                }\r\n\r\n                @Override\r\n                public" +
                                " void remove(");

//line default
//line hidden


//line 883 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 883 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command c) {\r\n                    java.util.List<CreateOrMergePatch");

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto> list = new java.util.ArrayList<>(java.util.Arrays.asList(get");

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("()));\r\n                    list.remove((CreateOrMergePatch");

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto) c);\r\n                    set");

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("(list.toArray(new CreateOrMergePatch");

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto[0]));\r\n                }\r\n\r\n                @Override\r\n                public" +
                                " void clear() {\r\n                    set");

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("(new CreateOrMergePatch");

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto[]{});\r\n                }\r\n\r\n                @Override\r\n                public" +
                                " java.util.Iterator<");

//line default
//line hidden


//line 895 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 895 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command> iterator() {\r\n                    return java.util.Arrays.stream(get");

//line default
//line hidden


//line 896 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.PascalCaseName()));

//line default
//line hidden


//line 896 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("())\r\n                            .map(e -> (");

//line default
//line hidden


//line 897 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 897 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command) e.toSubclass()).iterator();\r\n                }\r\n            };\r\n        " +
                                "}\r\n\r\n        @Override\r\n        public ");

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Command.Create");

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(" newCreate");

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("() {\r\n            return new CreateOrMergePatch");

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto.Create");

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                this.Write("Dto();\r\n        }\r\n\r\n");

//line default
//line hidden


//line 907 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                if (!e.Immutable)
                                {

//line default
//line hidden


//line 911 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("        @Override\r\n        public ");

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Command.MergePatch");

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(" newMergePatch");

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("() {\r\n            return new CreateOrMergePatch");

//line default
//line hidden


//line 913 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 913 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Dto.MergePatch");

//line default
//line hidden


//line 913 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 913 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Dto();\r\n        }\r\n\r\n        @Override\r\n        public ");

//line default
//line hidden


//line 917 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 917 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Command.Remove");

//line default
//line hidden


//line 917 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 917 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(" newRemove");

//line default
//line hidden


//line 917 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 917 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("() {\r\n            return new Remove");

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                    this.Write("Dto();\r\n        }\r\n\r\n");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                                }
                            }
                        }
                        // //////////////////////////////////////////////////
                    } // end if (IsImplementingCommandInterface)
                      // //////////////////////////////////////////////////

//line default
//line hidden


//line 929 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 931 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 936 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                this.Write("}\r\n\r\n");

//line default
//line hidden


//line 938 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCreateOrMergePatchCommandDtoTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToCamelCase(string name)
            {
                return BoundedContext.GetCamelCaseName(name);
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCreateOrMergePatchCommandDtoTemplate.tt"


        public class AggregateCreateOrMergePatchCommandDtoTemplate : EntityBaseCreateOrMergePatchCommandDtoTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateCreateOrMergePatchCommandDtoTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityCreateOrMergePatchCommandDtoTemplate.tt"


        public class EntityCreateOrMergePatchCommandDtoTemplate : EntityBaseCreateOrMergePatchCommandDtoTemplate
        {

            Entity Entity { get; set; }

            public EntityCreateOrMergePatchCommandDtoTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"


        public class EntityBaseDeleteOrRemoveCommandDtoTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public bool OnlyDtos { get; set; }

            public bool IsImplementingCommandInterface
            {
                get { return !OnlyDtos && EntityBase.IsCommandDtoImplementingCommandInterface(); }
            }

            public EntityBaseDeleteOrRemoveCommandDtoTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames(String.Empty, String.Empty);
                var PascalCaseCommandTypeDiscriminatorName = ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName());
                var namedDeleteOrRemove = (EntityBase is Aggregate) ? "Delete" : "Remove";
                var extendsBaseClassName = (EntityBase is Aggregate) ? ("Abstract" + EntityBase.GetNameForCommand() + "CommandDto") : ("CreateOrMergePatch" + EntityBase.GetNameForCommand() + "Dto");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(";\r\n\r\n");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                //		foreach (var n in usingClassNames)
                //		{

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                //		}

//line default
//line hidden


//line 45 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("\r\npublic class ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("Dto extends ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(extendsBaseClassName));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsImplementingCommandInterface ? String.Format(" implements {0}Command.{1}{2}", EntityBase.GetNameForCommand(), namedDeleteOrRemove, EntityBase.GetNameForCommand()) : String.Empty));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("\r\n{\r\n\r\n    public ");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("Dto() {\r\n        this.");

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(" = COMMAND_TYPE_");

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove.ToUpperInvariant()));

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(";\r\n    }\r\n\r\n    @Override\r\n    public String get");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("() {\r\n        return COMMAND_TYPE_");

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove.ToUpperInvariant()));

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                    if (EntityBase.IsPolymorphic() || EntityBase.Subtypes != null && EntityBase.Subtypes.Count > 0)
                    {
                        var p = EntityBase.DiscriminatorProperty;

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(";\r\n\r\n    public ");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write("() {\r\n        return this.");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n    public void set");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(") {\r\n        this.");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                        this.Write(";\r\n    }\r\n\r\n");

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                    }

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                    // /////////////////////
                    if (!OnlyDtos)
                    {
                        // /////////////////////
                        /////////////////////////////////////////////////////////////
                        if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                        {

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write("    public ");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write("Command.");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write(" to");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write("()\r\n    {\r\n");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            if (!EntityBase.IsAbsolutelyNoEventSourcing())
                            {
                                /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("        Abstract");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("Command.Simple");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(" command = new Abstract");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("Command.Simple");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("();\r\n        ((Abstract");

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("CommandDto)this).copyTo(command);\r\n");

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                if (EntityBase.IsPolymorphic())
                                {
                                    var p = EntityBase.DiscriminatorProperty;

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                    this.Write("        command.set");

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                    this.Write("(this.get");

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                    this.Write("());\r\n");

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                }

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("        return command;\r\n");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            }
                            else
                            {
                                /////////////////////////////////////////////////////////////

                                var enclosingClassName = namedDeleteOrRemove + EntityBase.GetNameForCommand() + "Dto";

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("        return new ");

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("Command.");

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("() {\r\n");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.AbstractCommandDtoNestedCommandClassPropertiesString(enclosingClassName)));

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                this.Write("\r\n        };\r\n");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                                /////////////////////////////////////////////////////////////
                            } // end if... 
                              /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 123 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            this.Write("    }\r\n");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                            // /////////////////////
                        } // end if (!EntityBase.IsNoGeneratingSimpleCommandImplements())
                    } // end if (!OnlyDtos)
                      // /////////////////////

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                this.Write("}\r\n\r\n");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseDeleteOrRemoveCommandDtoTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToCamelCase(string name)
            {
                return BoundedContext.GetCamelCaseName(name);
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDeleteCommandDtoTemplate.tt"


        public class AggregateDeleteCommandDtoTemplate : EntityBaseDeleteOrRemoveCommandDtoTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateDeleteCommandDtoTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityRemoveCommandDtoTemplate.tt"


        public class EntityRemoveCommandDtoTemplate : EntityBaseDeleteOrRemoveCommandDtoTemplate
        {

            Entity Entity { get; set; }

            public EntityRemoveCommandDtoTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"


        public class EntityBaseEventDtoTemplate : CSharpTemplate
        {

            EntityBase EntityBase { get; set; }

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected virtual bool IsEntityBaseSaveable
            {
                get
                {
                    return (this.EntityBase.Entities != null) && (this.EntityBase.Entities.Count > 0);
                }
            }

            public EntityBaseEventDtoTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            protected virtual IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                            es.Add(e);
                        }
                    }
                    return es;
                }
            }

            protected bool IncludingHoistedProperties
            {
                get { return !EntityBase.IsPolymorphic(); }
            }

            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "Dto");
                var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(";\n\n");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                }

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                var stateDeletedOrRemovedName = EntityBase.GetNameForEvent() + "StateRemoved";
                if (EntityBase is Aggregate)
                {
                    stateDeletedOrRemovedName = EntityBase.GetNameForEvent() + "StateDeleted";
                }

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(".AbstractEvent;\n\npublic class ");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("EventDto extends AbstractEvent implements ");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("Event.");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("StateEvent {\n");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                var stateEventDtoTypeDiscriminatorName = ToPascalCase(BoundedContext.GetEventTypeDiscriminatorName());
                var stateEventDtoTypeDiscriminatorPrivateFieldName = ToCamelCase(stateEventDtoTypeDiscriminatorName);
                string eventIdType = EntityBase.GetStateEventIdValueObjectName(); // + "Dto";
                var allPropertiesExludingEntities = new List<Property>();

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("    public static class ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("StateEventDto extends ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("EventDto {\n    }\n\n    private ");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdType));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" ");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPrivateFieldName()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(";\n\n    ");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdType));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" get");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("() {\n        if (");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPrivateFieldName()));

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" == null) { ");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPrivateFieldName()));

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" = new ");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdType));

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("(); }\n        return ");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPrivateFieldName()));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(";\n    }\n\n    void set");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdType));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" eventId) {\n        this.");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPrivateFieldName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" = eventId;\n    }\n\n");

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                var eventIdEntityIdPropertyName = (EntityBase is Aggregate) ? EntityBase.Id.Name : ((Entity)EntityBase).GetGlobalIdPropertyLocalIdName();
                bool needLocalIdDto = false;
                if (false) //if (EntityBase.FindValueObject(EntityBase.Id.Type) != null)
                {
                    needLocalIdDto = true;
                }
                // //////////////////
                allPropertiesExludingEntities.Add(EntityBase.Id);

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("    public ");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needLocalIdDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" get");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("() {\n        return get");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("().get");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdEntityIdPropertyName));

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("();\n    }\n\n    public void set");

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needLocalIdDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(" ");

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.CamelCaseName()));

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(") {\n        get");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("().set");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdEntityIdPropertyName));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.CamelCaseName()));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(");\n    }\n\n");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    Aggregate aggregate = (Aggregate)EntityBase;
                    var aggregateVersionProperty = aggregate.Properties[aggregate.ReservedProperties.Version];
                    // //////////////////
                    allPropertiesExludingEntities.Add(aggregateVersionProperty);


//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("() {\n        return get");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("().get");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("();\n    }\n    \n    public void set");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.CamelCaseName()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(") {\n        get");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("().set");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.CamelCaseName()));

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(");\n    }\n\n");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                }

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                var properties = new List<Property>();
                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsCollectionProperty) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {
                        properties.Add(p);
                    }
                }
                properties.Add(EntityBase.Properties[EntityBase.ReservedProperties.CreatedBy]);
                properties.Add(EntityBase.Properties[EntityBase.ReservedProperties.CreatedAt]);

                if (EntityBase is Entity)
                {
                    properties.Add(EntityBase.Properties[EntityBase.ReservedProperties.Version]);
                }

                // ////////////////////////////////
                allPropertiesExludingEntities.AddRange(properties);
                // ////////////////////////////////

                foreach (Property p in properties)
                {
                    bool needDto = false;
                    if (false) //if (EntityBase.FindValueObject(p.Type) != null)
                    {
                        needDto = true;
                    }
                    if (needDto)
                    {

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto ");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = new ");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto();\n\n    public ");

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto get");

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("() {\n        return this.");

//line default
//line hidden


//line 171 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 171 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto ");

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(") {\n        this.");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                    else
                    {
                        //if (BoundedContext.IsClrValueType(p.Type))
                        //{
                        //} else {

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n\n    public ");

//line default
//line hidden


//line 188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("() {\n        return this.");

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(") {\n        this.");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        //}
                    }
                }


//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsValueObjectCollectionProperty())
                    {
                        //var vo = EntityBase.FindValueObject(p.ItemType);
                        //bool needDto = (vo != null);
                        bool needDto = false;
                        // /////////////////////////////////////
                        allPropertiesExludingEntities.Add(p);

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n\n    public java.util.Set<");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("> get");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("() {\n        return this.");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" == null ? null : java.util.Arrays.stream(this.");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(").collect(java.util.stream.Collectors.toSet());\n    }\n\n    public void set");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(") {\n        this.");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    private Boolean isProperty");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed;\n\n    public Boolean getIsProperty");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed() {\n        return this.isProperty");

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed;\n    }\n\n    public void setIsProperty");

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed(Boolean removed) {\n        this.isProperty");

//line default
//line hidden


//line 241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed = removed;\n    }\n\n");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in this.InnerEntities)
                    {
                        var eCollectionFieldName = ToCamelCase(e.GetNameForEvent() + "Events");


//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto[] ");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n\n");

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 262 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in this.InnerEntities)
                    {
                        var eCollectionFieldName = ToCamelCase(e.GetNameForEvent() + "Events");


//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    //public ");

//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto[] get");

//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventArray() {\n    //    return this.");

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n    //}\n\n    public void set");

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Events(");

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto[] events) {\n        this.");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = events;\n    }\n\n");

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }

                }

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                // //////////////////////////////////
                var generatedAllPropertyNames = new HashSet<string>(allPropertiesExludingEntities.Select(p => p.Name));
                // //////////////////////////////////
                var javaMutationLogicEventAllProperties = new Dictionary<string, Property>();//ExcludingAggregateIdAndVersionAndCommandIdAndRequesterId
                if (EntityBase is Aggregate)
                {
                    // ///////////////////////////////////
                    foreach (var m in (EntityBase as Aggregate).GetJavaMutationLogicMethods())
                    {

                        foreach (var p in m.GetEventPropertiesExcludingAggregateIdAndVersionAndCommandIdAndRequesterId())
                        {
                            if (!javaMutationLogicEventAllProperties.ContainsKey(p.Name))
                            {
                                if (!generatedAllPropertyNames.Contains(p.Name))
                                {
                                    javaMutationLogicEventAllProperties.Add(p.Name, p);
                                }
                            }
                            else
                            {
                                continue;
                            }
                            var camelCasePN = BoundedContext.GetCamelCaseName(p.Name);

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(";\n\n    public ");

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(" get");

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("() {\n        return ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(") {\n        this.");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(";\n    }\n\n");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        }

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("    public static class ");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto extends ");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto {\n\n        @Override\n        public String getEventType() {\n            " +
                        "return \"");

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("\";\n        }\n\n    }\n\n");

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                    // ///////////////////////////////////

                }


//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("    public ");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("EventDto toSubclass() {\n        if (STATE_EVENT_TYPE_CREATED.equals(getEventType(" +
                "))) {\n            ");

//line default
//line hidden


//line 340 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 340 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("StateCreatedDto e = new ");

//line default
//line hidden


//line 340 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 340 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("StateCreatedDto();\n            copyTo(e);\n            return e;\n        }\n");

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("        else if (STATE_EVENT_TYPE_MERGE_PATCHED.equals(getEventType())) {\n       " +
                    "     ");

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateMergePatchedDto e = new ");

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateMergePatchedDto();\n            copyTo(e);\n            return e;\n        }\n");

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!EntityBase.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////
                        if (EntityBase is Aggregate)
                        {

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("        else if (STATE_EVENT_TYPE_DELETED.equals(getEventType())) {\n            ");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateDeletedDto e = new ");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateDeletedDto();\n            copyTo(e);\n            return e;\n        }\n");

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 371 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("        else if (STATE_EVENT_TYPE_REMOVED.equals(getEventType())) {\n            ");

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateRemovedDto e = new ");

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateRemovedDto();\n            copyTo(e);\n            return e;\n        }\n");

//line default
//line hidden


//line 376 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        }
                        // /////////////////////////////////////////////////////
                    }//end if (!EntityBase.ReservedProperties.NoDeleted)
                     // /////////////////////////////////////////////////////

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    ////////////////
                }//end if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                 ////////////////

//line default
//line hidden


//line 387 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    // ///////////////////////////////////
                    foreach (var m in (EntityBase as Aggregate).GetJavaMutationLogicMethods())
                    {

//line default
//line hidden


//line 394 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("        else if (\"");

//line default
//line hidden


//line 394 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 394 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("\".equals(getEventType())) {\n            ");

//line default
//line hidden


//line 395 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 395 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto e = new ");

//line default
//line hidden


//line 395 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 395 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Dto();\n            copyTo(e);\n            return e;\n        }\n");

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("\n        throw new UnsupportedOperationException(\"Unknown event type:\" + getEvent" +
                "Type());\n    }\n\n    public void copyTo(");

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("EventDto e) {\n");

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                // ///////////////////////////////////////////////////////////////
                allPropertiesExludingEntities.AddRange(javaMutationLogicEventAllProperties.Values);
                // ///////////////////////////////////////////////////////////////

                foreach (Property p in allPropertiesExludingEntities)
                {
                    if (p.IsValueObjectCollectionProperty())
                    {

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("        e.");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = this.");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n");

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("        e.set");

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("(this.get");

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("());\n");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 429 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("        e.setIsProperty");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed(this.getIsProperty");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Removed());\n");

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }
                }

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in this.InnerEntities)
                    {
                        var eCollectionFieldName = ToCamelCase(e.GetNameForEvent() + "Events");
                        var eCollectionTempVarName = ToCamelCase(e.GetNameForEvent() + "StateEventDtos");


//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("        if (this.");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" != null) {\n            ");

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto[] ");

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionTempVarName));

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = new ");

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto[this.");

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(".length];\n            for (int i = 0; i < this.");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(".length; i++) {\n                ");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionTempVarName));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("[i] = this.");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("[i].toSubclass();\n            }\n            e.");

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionTempVarName));

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(";\n        }\n");

//line default
//line hidden


//line 457 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    }

                }

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("    }\n\n\tpublic static class ");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("StateCreatedDto extends ");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("EventDto implements ");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("Event.");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("StateCreated {\n\n        @Override\n        public String get");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateEventDtoTypeDiscriminatorName));

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("()\n        {\n            return STATE_EVENT_TYPE_CREATED;\n        }\n");

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {
                    var intfPrefix = e.GetNameForEvent() + "Event.";
                    var eCollectionFieldName = ToCamelCase(e.GetNameForEvent() + "Events");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("\n        @Override\n        public Iterable<");

//line default
//line hidden


//line 479 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 479 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 479 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateCreated> get");

//line default
//line hidden


//line 479 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 479 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("Events() {\n            if (");

//line default
//line hidden


//line 480 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 480 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(" == null) return null;\n            return java.util.Arrays.stream(");

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(").map(i -> (");

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateCreated)i).collect(java.util.stream.Collectors.toList());\n        }\n\n       " +
                    " @Override\n        public void add");

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("Event(");

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateCreated e) {\n            java.util.List<");

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("EventDto> events = ");

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(" == null ? new java.util.ArrayList<>() : new java.util.ArrayList<>(java.util.Arra" +
                    "ys.asList(");

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("));\n            events.add((");

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("EventDto)e);\n            ");

//line default
//line hidden


//line 488 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 488 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(" = events.toArray(new ");

//line default
//line hidden


//line 488 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 488 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("EventDto[0]);\n        }\n\n        @Override\n        public ");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateCreated new");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateCreated(");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(") {\n            return new ");

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("EventDto.");

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateCreatedDto();\n        }\n");

//line default
//line hidden


//line 495 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                }

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("\n\t}\n\n");

//line default
//line hidden


//line 501 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("\n\tpublic static class ");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateMergePatchedDto extends ");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateEventDto implements ");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("StateMergePatched {\n\n        @Override\n        public String get");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateEventDtoTypeDiscriminatorName));

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("()\n        {\n            return STATE_EVENT_TYPE_MERGE_PATCHED;\n        }\n");

//line default
//line hidden


//line 515 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    foreach (Entity e in this.InnerEntities)
                    {
                        var intfPrefix = e.GetNameForEvent() + "Event.";
                        var eCollectionFieldName = ToCamelCase(e.GetNameForEvent() + "Events");

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("\n        @Override\n        public Iterable<");

//line default
//line hidden


//line 523 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 523 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Event> get");

//line default
//line hidden


//line 523 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 523 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Events() {\n            if (");

//line default
//line hidden


//line 524 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 524 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" == null) return null;\n            return java.util.Arrays.stream(");

//line default
//line hidden


//line 525 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 525 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(").map(i -> (");

//line default
//line hidden


//line 525 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 525 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Event)i).collect(java.util.stream.Collectors.toList());\n        }\n        \n      " +
                        "  @Override\n        public void add");

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Event(");

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("Event e) {\n            java.util.List<");

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto> events = ");

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" == null ? new java.util.ArrayList<>() : new java.util.ArrayList<>(java.util.Arra" +
                        "ys.asList(");

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("));\n            events.add((");

//line default
//line hidden


//line 531 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 531 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto)e);\n            ");

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" = events.toArray(new ");

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto[0]);\n        }\n\n        @Override\n        public ");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("StateCreated new");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("StateCreated(");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(") {\n            return new ");

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("EventDto.");

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("StateCreatedDto();\n        }\n\n");

//line default
//line hidden


//line 540 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        if (!e.Immutable)
                        {

//line default
//line hidden


//line 544 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("        @Override\n        public ");

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateMergePatched new");

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateMergePatched(");

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 545 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(") {\n            return new ");

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("EventDto.");

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateMergePatchedDto();\n        }\n\n");

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            // /////////////////////////////////////////////////////
                            if (!e.ReservedProperties.NoDeleted)
                            {
                                // /////////////////////////////////////////////////////

//line default
//line hidden


//line 555 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write("        @Override\n        public ");

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write("StateRemoved new");

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write("StateRemoved(");

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(") {\n            return new ");

//line default
//line hidden


//line 557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write("EventDto.");

//line default
//line hidden


//line 557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                this.Write("StateRemovedDto();\n        }\n\n");

//line default
//line hidden


//line 560 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                // /////////////////////////////////////////////////////
                            }
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    this.Write("\n\t}\n\n\n");

//line default
//line hidden


//line 573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!EntityBase.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////
                        if (EntityBase is Aggregate)
                        {

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("\tpublic static class ");

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateDeletedDto extends ");

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateEventDto implements ");

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 581 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateDeleted {\n\n        @Override\n        public String get");

//line default
//line hidden


//line 584 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateEventDtoTypeDiscriminatorName));

//line default
//line hidden


//line 584 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("()\n        {\n            return STATE_EVENT_TYPE_DELETED;\n        }\n\t\n\n");

//line default
//line hidden


//line 590 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("\tpublic static class ");

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateRemovedDto extends ");

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateEventDto implements ");

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("StateRemoved {\n        @Override\n        public String get");

//line default
//line hidden


//line 595 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateEventDtoTypeDiscriminatorName));

//line default
//line hidden


//line 595 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            this.Write("()\n        {\n            return STATE_EVENT_TYPE_REMOVED;\n        }\n\n");

//line default
//line hidden


//line 600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        }

                        foreach (Entity e in this.InnerEntities)
                        {
                            var intfPrefix = e.Name + "Event.";
                            var eCollectionFieldName = ToCamelCase(e.GetNameForEvent() + "Events");

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            if (!e.Immutable)
                            {

//line default
//line hidden


//line 612 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                // /////////////////////////////////////////////////////
                                if (!e.ReservedProperties.NoDeleted)
                                {
                                    // /////////////////////////////////////////////////////

//line default
//line hidden


//line 618 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("        @Override\n        public Iterable<");

//line default
//line hidden


//line 619 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 619 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 619 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("StateRemoved> get");

//line default
//line hidden


//line 619 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 619 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("Events() {\n            if (");

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(" == null) return null;\n            return java.util.Arrays.stream(");

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(").map(i -> (");

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("StateRemoved)i).collect(java.util.stream.Collectors.toList());\n        }\n        " +
                                    "\n        @Override\n        public void add");

//line default
//line hidden


//line 625 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 625 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("Event(");

//line default
//line hidden


//line 625 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 625 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 625 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("StateRemoved e) {\n            java.util.List<");

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("EventDto> events = ");

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(" == null ? new java.util.ArrayList<>() : new java.util.ArrayList<>(java.util.Arra" +
                                    "ys.asList(");

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("));\n            events.add((");

//line default
//line hidden


//line 627 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 627 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("EventDto)e);\n            ");

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionFieldName));

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(" = events.toArray(new ");

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("EventDto[0]);\n        }\n        \n        @Override\n        public ");

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("StateRemoved new");

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("StateRemoved(");

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 632 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(") {\n            return new ");

//line default
//line hidden


//line 633 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 633 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("EventDto.");

//line default
//line hidden


//line 633 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 633 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    this.Write("StateRemovedDto();\n        }\n        \n");

//line default
//line hidden


//line 636 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                                    // /////////////////////////////////////////////////////
                                }
                                // /////////////////////////////////////////////////////

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 645 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                        this.Write("\n\t}\n");

//line default
//line hidden


//line 647 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"


                        // /////////////////////////////////////////////////////
                    }//end if (!EntityBase.ReservedProperties.NoDeleted)
                     // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////


//line default
//line hidden


//line 658 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                this.Write("\n}\n\n");

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventDtoTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToCamelCase(string name)
            {
                return BoundedContext.GetCamelCaseName(name);
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }

        }

//line default
//line hidden


//line 9 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateEventDtoTemplate.tt"


        public class AggregateEventDtoTemplate : EntityBaseEventDtoTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateEventDtoTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDtoTemplate.tt"


        public class EntityEventDtoTemplate : EntityBaseEventDtoTemplate
        {

            Entity Entity { get; set; }

            public EntityEventDtoTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"


        public class EntityBaseEventInterfaceTemplate : CSharpTemplate
        {

            protected EntityBase EntityBase { get; set; }

            protected BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected bool IncludingHoistedProperties
            {
                get { return !EntityBase.IsPolymorphic(); }
            }

            public EntityBaseEventInterfaceTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            protected virtual IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (EntityBase is Entity)
                    {
                        properties.Add(EntityBase.Properties[EntityBase.ReservedProperties.Version]);
                    }
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsCollectionProperty) { continue; }
                        if (p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) { continue; }
                        if (!p.IsReservedProperty || (p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive))
                        //|| p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) 
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsValueObjectCollectionProperty())
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                            es.Add(e);
                        }
                    }
                    return es;
                }
            }

            protected virtual IList<Property> RemovableProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                        if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual string TypeName
            {
                get
                {
                    return EntityBase.GetNameForEvent();
                }
            }

            protected virtual string BaseInterfaceName
            {
                get
                {
                    return "Event";
                }
            }

            protected virtual string StateEventBaseInterfaceNames
            {
                get
                {
                    return this.TypeName + "Event" + EntityBase.GetGenericTypeParametersString();
                }
            }

            protected virtual bool IsInSubtype
            {
                get
                {
                    return false;
                }
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(".Event;\n\npublic interface ");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("Event");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(" extends ");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.BaseInterfaceName));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(" {\n\n");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                if (!this.IsInSubtype)
                {

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("    interface Sql");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("Event");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" extends ");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("Event");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" {\n        ");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdGenericTypeParametersString()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("();\n\n        boolean get");

//line default
//line hidden


//line 164 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 164 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("();\n\n        void set");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("(boolean readOnly);\n    }\n\n");

//line default
//line hidden


//line 169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                if (!this.IsInSubtype)
                {
                    var eventIdEntityIdPropertyName = (EntityBase is Aggregate) ? EntityBase.Id.Name : ((Entity)EntityBase).GetGlobalIdPropertyLocalIdName();
                    bool needLocalIdDto = false;
                    if (false) //if (EntityBase.FindValueObject(EntityBase.Id.Type) != null)
                    {
                        needLocalIdDto = true;
                    }

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needLocalIdDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("();\n\n    //void set");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(needLocalIdDto ? "Dto" : String.Empty));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.CamelCaseName()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    if (EntityBase is Aggregate)
                    {
                        Aggregate aggregate = (Aggregate)EntityBase;
                        var aggregateVersionProperty = aggregate.Properties[aggregate.ReservedProperties.Version];

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("    ");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("();\n    \n    //void set");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.CamelCaseName()));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    }

                } // end if (!this.IsInSubtype)

                //if (EntityBase is Entity) {
                //var entity = EntityBase as Entity;
                //foreach (var p in entity.GetTransientOuterIdProperties()) {
                //properties.Add(p);
                //}
                //}

                if (!this.IsInSubtype)
                {
                    var reservedProps = new List<Property>();
                    reservedProps.Add(EntityBase.Properties[EntityBase.ReservedProperties.CreatedBy]);
                    reservedProps.Add(EntityBase.Properties[EntityBase.ReservedProperties.CreatedAt]);
                    foreach (var p in reservedProps)
                    {

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("    ");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("();\n\n    void set");

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("    String get");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("();\n\n    void set");

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("(String commandId);\n\n");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("    interface ");

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("StateEvent");

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(" extends ");

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.StateEventBaseInterfaceNames));

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(" {\n");

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                foreach (Property p in this.ValueObjectProperties)
                {
                    if (p.IsDerived) { continue; }

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("();\n\n        void set");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                foreach (Property p in this.ValueObjectCollectionProperties)
                {

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("();\n\n        //void set");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("    }\n\n    interface ");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("StateCreated");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(" extends ");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("StateEvent");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("\n    {\n");

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {
                    var intfPrefix = e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("        Iterable<");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("StateCreated> get");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("Events();\n        \n        void add");

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("Event(");

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("StateCreated e);\n\n        ");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("StateCreated new");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("StateCreated(");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 269 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 272 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("    \n    }\n\n");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("\n    interface ");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("StateMergePatched");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(" extends ");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("StateEvent");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("\n    {\n");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    foreach (Property p in this.RemovableProperties)
                    {
                        if (p.IsDerived) { continue; }

//line default
//line hidden


//line 289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("        Boolean getIsProperty");

//line default
//line hidden


//line 289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("Removed();\n\n        void setIsProperty");

//line default
//line hidden


//line 291 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 291 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("Removed(Boolean removed);\n\n");

//line default
//line hidden


//line 293 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("\n");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    foreach (Entity e in this.InnerEntities)
                    {
                        var intfPrefix = e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("        Iterable<");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("Event> get");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("Events();\n        \n        void add");

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("Event(");

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("Event e);\n\n        ");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("StateCreated new");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("StateCreated(");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        if (!e.Immutable)
                        {

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write("StateMergePatched new");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write("StateMergePatched(");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            this.Write(");\n\n");

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            // /////////////////////////////////////////////////////
                            if (!e.ReservedProperties.NoDeleted)
                            {
                                // /////////////////////////////////////////////////////

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write("StateRemoved new");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write("StateRemoved(");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                this.Write(");\n\n");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                // /////////////////////////////////////////////////////
                            }
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 327 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    this.Write("\n    }\n\n");

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!EntityBase.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

                        string namedDeletedOrRemoved;
                        if (EntityBase is Aggregate)
                        {
                            namedDeletedOrRemoved = "Deleted";
                        }
                        else
                        {
                            namedDeletedOrRemoved = "Removed";
                        }

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("    interface ");

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("State");

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(" extends ");

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("StateEvent");

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("\n    {\n");

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        foreach (Entity e in this.InnerEntities)
                        {
                            var intfPrefix = e.Name + "Event.";

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            if (!e.Immutable)
                            {

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                // /////////////////////////////////////////////////////
                                if (!e.ReservedProperties.NoDeleted)
                                {
                                    // /////////////////////////////////////////////////////

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("        Iterable<");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("StateRemoved> get");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("Events();\n        \n        void add");

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("Event(");

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("StateRemoved e);\n        \n        ");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("StateRemoved new");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write("StateRemoved(");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    this.Write(");\n\n");

//line default
//line hidden


//line 371 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                                    // /////////////////////////////////////////////////////
                                }
                                // /////////////////////////////////////////////////////

//line default
//line hidden


//line 376 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 380 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        this.Write("    }\n\n");

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!EntityBase.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 391 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                this.Write("\n}\n\n");

//line default
//line hidden


//line 394 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseEventInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateEventInterfaceTemplate.tt"


        public class AggregateEventInterfaceTemplate : EntityBaseEventInterfaceTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateEventInterfaceTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }


//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventInterfaceTemplate.tt"


        public class EntityEventInterfaceTemplate : EntityBaseEventInterfaceTemplate
        {

            Entity Entity { get; set; }

            public EntityEventInterfaceTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }


//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"


        public class EntityBaseStateInterfaceTemplate : CSharpTemplate
        {

            protected EntityBase EntityBase { get; set; }

            protected BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected bool IncludingHoistedProperties
            {
                get { return !EntityBase.IsPolymorphic(); }
            }

            protected virtual IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    properties.Add(EntityBase.Id);

                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsCollectionProperty) { continue; }
                        // //////////////////////////////////////////////
                        if (p.IsCopyOfSuperObjectProperty && !EntityBase.HasStateInterfaceOwnProperty(p.Name))
                        {
                            continue;
                        }
                        // //////////////////////////////////////////////
                        if (p.IsReservedPropertyActive && EntityBase.ReservedProperties.NoActive) { continue; }
                        if (p.IsReservedPropertyDeleted && (EntityBase.ReservedProperties.NoDeleted || EntityBase.IsImmutableOrOuterEntityImmutable())) { continue; }

                        //if (!p.IsReservedProperty || p.IsReservedPropertyActive || p.IsReservedPropertyVersion) 
                        //{
                        properties.Add(p);
                        //}			
                    }

                    if (EntityBase is Entity)
                    {
                        var entity = EntityBase as Entity;
                        foreach (var p in entity.GetTransientOuterIdProperties())
                        {
                            // Outer Id:
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }


            protected virtual IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsValueObjectCollectionProperty())
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual IList<Property> DerivedCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (var p in EntityBase.GetDerivedCollectionProperties())
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                        properties.Add(p);
                    }
                    return properties;
                }
            }

            protected virtual IList<Property> JavaDerivedProperties
            {
                get
                {
                    return new Property[0];//todo
                }
            }

            protected virtual IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                            es.Add(e);
                        }
                    }
                    return es;
                }
            }

            protected virtual string TypeName
            {
                get
                {
                    return EntityBase.GetNameForState();
                }
            }

            protected virtual string TypeNameForEvent
            {
                get
                {
                    return EntityBase.GetNameForEvent();
                }
            }

            protected virtual bool IsInSubtype
            {
                get
                {
                    return false;
                }
            }

            protected virtual string ExtendsBaseInterfaceString
            {
                get
                {
                    //return String.Empty;
                    string extendedInterfacesString = String.Empty;
                    if (EntityBase.Implements != null && !this.IsInSubtype)
                    {
                        extendedInterfacesString = " extends " + EntityBase.Implements.Map(i => i).ConcatWithSeparator(", ");
                    }
                    return extendedInterfacesString;
                }
            }

            protected virtual string MutableStateBaseInterfaceString
            {
                get
                {
                    //return String.Empty;
                    string extendedInterfacesString = String.Empty;
                    if (EntityBase.Implements != null && !this.IsInSubtype)
                    {
                        extendedInterfacesString = ", " + EntityBase.Implements.Map(i => String.Format("{0}.Mutable{1}", i, i)).ConcatWithSeparator(", ");
                    }
                    return extendedInterfacesString;
                }
            }

            protected virtual string BaseSqlStateInterfaceString
            {
                get
                {
                    return String.Empty;
                }
            }

            // //////////////

            public EntityBaseStateInterfaceTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.Set;\n");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

                var versionProperty = EntityBase.Properties[EntityBase.ReservedProperties.Version];


//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(".Event;\n");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////
                    //import <$= EntityBase.Aggregate.GetDomainAggregatePackage() $>.<$= EntityBase.Name $>Event.*;
                    /////////////////////////////////////////////////////////////
                } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("\npublic interface ");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.ExtendsBaseInterfaceString));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("\n{\n");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                if (!this.IsInSubtype)
                {

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(versionProperty.JavaType()));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(" VERSION_ZERO = ");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetVersionZero()));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(";\n\n    ");

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(versionProperty.JavaType()));

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(" VERSION_NULL = VERSION_ZERO - 1;\n\n");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                } //end if (!this.IsInSubtype)

                // //////////////////////////////

                foreach (Property p in this.ValueObjectProperties)
                {
                    if (p.IsDerived) { continue; }

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("();\n\n");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

                // //////////////////////////////////
                foreach (Property p in this.JavaDerivedProperties)
                {

//line default
//line hidden


//line 245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("();\n\n");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }
                // //////////////////////////////////

                foreach (Property p in this.ValueObjectCollectionProperties)
                {
                    if (p.IsDerived) { continue; }

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("    Set<");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("> get");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("();\n\n");

//line default
//line hidden


//line 257 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                if (!this.IsInSubtype)
                {
                    ////////////////////////////////
                    if (EntityBase.IsImmutableOrOuterEntityImmutable() || EntityBase.IsNoEventSourcing())
                    {
                        ////////////////////////////////
                        var commandIdPrivateFieldName = BoundedContext.GetPrivateFieldName(BoundedContext.GetCommandIdName());

//line default
//line hidden


//line 269 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("    String get");

//line default
//line hidden


//line 269 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 269 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("();\n\n");

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        ////////////////////////////////
                    } //if (EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////////////////////

//line default
//line hidden


//line 276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {

                    var p = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("    EntityStateCollection<");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("();\n\n");

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 290 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                foreach (var p in this.DerivedCollectionProperties)
                {
                    if (!EntityBase.Entities.ContainsKey(p.ItemType)) { continue; }
                    if (!p.Filter.ContainsKey("Java")) { continue; }
                    var baseCollectionProperty = EntityBase.GetCollectionPropertyByItemType(p.ItemType);

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("();\n\n");

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("    interface Mutable");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(" extends ");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.MutableStateBaseInterfaceString));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(" {\n");

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"


                // //////////////////////////////

                foreach (Property p in this.ValueObjectProperties)
                {
                    if (p.IsDerived) { continue; }

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("        void set");

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

                foreach (Property p in this.ValueObjectCollectionProperties)
                {
                    if (p.IsDerived) { continue; }

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("        void set");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("(Set<");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("> ");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(p.Name)));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 325 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                ////////////////////////////////
                if (EntityBase.IsImmutableOrOuterEntityImmutable() || EntityBase.IsNoEventSourcing())
                {
                    ////////////////////////////////
                    var commandIdPrivateFieldName = BoundedContext.GetPrivateFieldName(BoundedContext.GetCommandIdName());

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("        void set");

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("(String ");

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    ////////////////////////////////
                } //if (EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////////////////////

//line default
//line hidden


//line 339 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 345 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    if (!this.IsInSubtype)
                    {

//line default
//line hidden


//line 349 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("\n        void mutate(Event e);\n\n");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("        //void when(");

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("StateCreated");

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write(" e);\n\n");

//line default
//line hidden


//line 357 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("        //void when(");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("StateMergePatched");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(" e);\n\n");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!EntityBase.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

                            if (EntityBase is Aggregate)
                            {

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write("        //void when(");

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write("StateDeleted");

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(" e);\n");

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                            }
                            else
                            {

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write("        //void when(");

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write("StateRemoved");

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                                this.Write(" e);\n");

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                            }

                            // /////////////////////////////////////////////////////
                        } // end if (!EntityBase.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 390 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 395 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("    }\n\n    interface Sql");

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(" extends Mutable");

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BaseSqlStateInterfaceString));

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write(" {\n");

//line default
//line hidden


//line 398 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                if (!this.IsInSubtype)
                {
                    if (!(EntityBase is Aggregate)) // is entity
                    {
                        var entity = EntityBase as Entity;

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Type));

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Name));

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("();\n\n        void set");

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Name));

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Type));

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.CamelCaseName()));

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                    this.Write("\n        boolean isStateUnsaved();\n\n        boolean getForReapplying();\n");

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                } //end if (!this.IsInSubtype)

                // ///////////////////////////////////
                //if (!this.IsInSubtype)
                //{
                //if (!(EntityBase is Aggregate)) // is entity
                //{
                //    var entity = EntityBase as Entity;		    
                //}
                //} //end if (!this.IsInSubtype)


//line default
//line hidden


//line 429 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                this.Write("    }\n}\n\n");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateInterfaceTemplate.tt"


        public class AggregateStateInterfaceTemplate : EntityBaseStateInterfaceTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateStateInterfaceTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateInterfaceTemplate.tt"


        public class EntityStateInterfaceTemplate : EntityBaseStateInterfaceTemplate
        {

            Entity Entity { get; set; }

            public EntityStateInterfaceTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"


        public class EntityStateDaoInterfaceTemplate : CSharpTemplate
        {

            Entity Entity { get; set; }

            BoundedContext BoundedContext { get { return Entity.Aggregate.BoundedContext; } }

            public EntityStateDaoInterfaceTemplate(Entity entity)
            {
                this.Entity = entity;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Entity.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(";\n\n");

//line default
//line hidden


//line 28 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("\npublic interface ");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("StateDao");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(" {\n\n    /**\n     * Get entity state.\n     * @param id Entity global Id.\n     * @p" +
                "aram nullAllowed If returning null is a allowed. It is true for query.\n     * @p" +
                "aram aggregateState Aggregate state.\n     * @return Entity state.\n     */\n    ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("State get(");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GlobalId.Type));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(" id, boolean nullAllowed, ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("State aggregateState);\n\n    void save(");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("State state);\n\n");

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"


                var outerIdProperties = Entity.GetGlobalIdValueObjectOuterIdProperties();
                var findBySuffix = outerIdProperties.Map(p => p.Name).ConcatWithSeparator("And");
                var findByParametersString = outerIdProperties.GetParametersString();

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("    Iterable<");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("State> findBy");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(findBySuffix));

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(findByParametersString));

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("State aggregateState);\n\n    void delete(");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                this.Write("State state);\n}\n\n\n");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDaoInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"


        public class AggregateStateRepositoryInterfaceTemplate : CSharpTemplate
        {

            Aggregate Aggregate { get; set; }

            BoundedContext BoundedContext { get { return Aggregate.BoundedContext; } }

            public AggregateStateRepositoryInterfaceTemplate(Aggregate aggregate)
            {
                this.Aggregate = aggregate;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Aggregate.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.*;\nimport org.dddml.support.criterion.Criterion;\n");

//line default
//line hidden


//line 30 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("\npublic interface ");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("StateRepository");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("\n{\n    ");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(" get(");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(" id, boolean nullAllowed);\n\n");

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                if (Aggregate.IsPolymorphic())
                {

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(" get(Class<? extends ");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write("> type, ");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                    this.Write(" id, boolean nullAllowed);\n\n");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("    void save(");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                this.Write(" state);\n\n}\n\n");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateRepositoryInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"


        public class AggregateStateQueryRepositoryInterfaceTemplate : CSharpTemplate
        {

            Aggregate Aggregate { get; set; }

            BoundedContext BoundedContext { get { return Aggregate.BoundedContext; } }

            // ///////////////////////////////////////////
            protected virtual string TypeName
            {
                get
                {
                    return Aggregate.GetNameForState();
                }
            }

            protected virtual bool IsInSubtype
            {
                get
                {
                    return false;
                }
            }

            protected virtual string ExtendsBaseInterfaceString
            {
                get
                {
                    return String.Empty;
                }
            }
            // ///////////////////////////////////////////

            public AggregateStateQueryRepositoryInterfaceTemplate(Aggregate aggregate)
            {
                this.Aggregate = aggregate;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Aggregate.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.Map;\nimport java.util.List;\nimport org.dddml.support.criterio" +
                "n.Criterion;\n");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("\npublic interface ");

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("StateQueryRepository");

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("\n{\n    ");

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(" get(");

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(" id);\n\n");

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                var stateTypeParamStrings = new string[] { String.Empty };
                if (Aggregate.IsPolymorphic())
                {
                    if (!IsInSubtype)
                    {
                        stateTypeParamStrings = new string[] { String.Empty, String.Format(@"Class<? extends {0}State> stateType, ", Aggregate.GetNameForState()) };
                    }
                    //else
                }
                foreach (var stateTypeParamString in stateTypeParamStrings)
                {

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> getAll(");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Integer firstResult, Integer maxResults);\n    \n    Iterable<");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> get(");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter, List<String> orders, Integer firstRes" +
                    "ult, Integer maxResults);\n\n    Iterable<");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> get(");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Criterion filter, List<String> orders, Integer firstResult, Integer maxResults);\n" +
                    "\n    ");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(" getFirst(");

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 89 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter, List<String> orders);\n\n    ");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(" getFirst(");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Map.Entry<String, Object> keyValue, List<String> orders);\n\n    Iterable<");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(TypeName));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> getByProperty(");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("String propertyName, Object propertyValue, List<String> orders, Integer firstResu" +
                    "lt, Integer maxResults);\n\n    long getCount(");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter);\n\n    long getCount(");

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Criterion filter);\n\n");

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                foreach (var p in Aggregate.GetDerivedCollectionProperties())
                {
                    if (!BoundedContext.AllEntities.ContainsKey(p.ItemType)) { continue; }
                    if (p.ItemPropertyMap == null || p.ItemPropertyMap.Count == 0) { continue; }
                    EntityBase itemEntity = BoundedContext.AllEntities[p.ItemType];
                    var aggIdName = BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name);

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggIdName));

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                foreach (var entity in Aggregate.GetAllNestedEntities().Values)
                {
                    var globalIdVO = entity.GetGlobalIdValueObject();
                    var globalIdVOProperties = globalIdVO.Properties.Values.ToList();
                    var getByParametersString = globalIdVOProperties
                            .Map(p => String.Format("{0} {1}", p.JavaType(), BoundedContext.GetParameterOrArgumentName(p.Name)))
                            .ConcatWithSeparator(", ");
                    //var getByArgumentsString = globalIdVOProperties
                    //		.Map(p => String.Format("{0}", BoundedContext.GetParameterOrArgumentName(p.Name)))
                    //		.ConcatWithSeparator(", ");  

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForState()));

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State get");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForState()));

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByParametersString));

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    var globalIdVOOuterIdProperties = globalIdVO.Properties.Values.SkipLastProperty().ToList();
                    var getEntitiesByParametersString = globalIdVOOuterIdProperties.Map(p => String.Format("{0} {1}",
                                p.JavaType(),
                                BoundedContext.GetPrivateFieldName(p.Name)))//和 GetSourceChainingGetter() 的处理一致
                            .ConcatWithSeparator(", ");
                    var entityCollectionName = BoundedContext.Pluralize(entity.GetNameForState());

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForState()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityCollectionName));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getEntitiesByParametersString));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(", Criterion filter, List<String> orders);\n\n");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    foreach (var collectionP in entity.GetRecursiveCollectionProperties())
                    {
                        Entity itemEntity = entity;
                        var referenceProperty = entity.GetPropertyByReferenceName(collectionP.InverseOf);

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write("    Iterable<");

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(itemEntity.GetNameForState()));

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write("State> get");

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForState()));

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionP.Name));

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByParametersString));

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 147 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("}\n\n");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateQueryRepositoryInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"


        public class EntityAbstractStateCollectionTemplate : CSharpTemplate
        {

            Entity Entity { get; set; }

            BoundedContext BoundedContext { get { return Entity.Aggregate.BoundedContext; } }

            public EntityAbstractStateCollectionTemplate(Entity entity)
            {
                this.Entity = entity;
            }


            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Entity.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 27 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 27 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 27 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 30 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                }

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".ApplicationContext;\nimport ");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".Saveable;\n\npublic abstract class Abstract");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("StateCollection implements EntityStateCollection.ModifiableEntityStateCollection<" +
                "");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.JavaType()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State>, Saveable\n{\n");

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                var e = Entity;
                var collectionName = Entity.GetNameForState() + "States";//inner collection name.
                var outerEntityStateFieldName = BoundedContext.GetPrivateFieldName(e.OuterEntity.GetNameForState() + "State");
                var entityStateDaoName = e.GetNameForState() + "StateDao";
                var getAggregateStateInvokeString = (e.OuterEntity is Entity)
                    ? "((Abstract" + e.OuterEntity.GetNameForState() + "State)" + outerEntityStateFieldName + ").get" + e.OuterEntity.Aggregate.GetNameForState() + "State()"
                    : outerEntityStateFieldName;


//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("    protected ");

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("StateDao get");

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateDaoName));

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()\n    {\n        return (");

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("StateDao)ApplicationContext.current.get(\"");

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(e.GetNameForState())));

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("StateDao\");\n    }\n\n    private ");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State ");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(";\n\n    private Map<");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Type));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> loaded");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" = new HashMap<");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Type));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State>();\n\n    private Map<");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Type));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> removed");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" = new HashMap<");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Type));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State>();\n\n    protected Iterable<");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> getLoaded");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("() {\n        return this.loaded");

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values();\n    }\n\n    private boolean forReapplying;\n\n    public boolean getForRe" +
                "applying() {\n        return forReapplying;\n    }\n\n    public void setForReapplyi" +
                "ng(boolean forReapplying) {\n        this.forReapplying = forReapplying;\n    }\n\n");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                var stateCollectionReadOnlyPrivateFieldName = BoundedContext.GetPrivateFieldName(BoundedContext.GetStateCollectionReadOnlyPropertyName());

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("    private Boolean ");

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateCollectionReadOnlyPrivateFieldName));

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(";\n\n    public Boolean get");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("() {\n        if (this.");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" instanceof Abstract");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State) {\n            if (((Abstract");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)this.");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(").get");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("() != null && ((Abstract");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)this.");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(").get");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()) \n            { return true; }\n        }\n        if (this.");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateCollectionReadOnlyPrivateFieldName));

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" == null) {\n            return false;\n        }\n        return this.");

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateCollectionReadOnlyPrivateFieldName));

//line default
//line hidden


//line 91 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(Boolean readOnly) {\n        this.");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateCollectionReadOnlyPrivateFieldName));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" = readOnly;\n    }\n\n");

//line default
//line hidden


//line 98 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                //if (Entity.IsOuterEntityImmutable())
                //{

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("    private boolean allLoaded;\n\n    public boolean isAllLoaded() {\n        return" +
                " this.allLoaded;\n    }\n\n");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                //}

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("    protected Iterable<");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> getInnerIterable() {\n        if (!getForReapplying()) {\n");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                var outerIdProperties = e.GetGlobalIdValueObjectOuterIdProperties();
                var findBySuffix = outerIdProperties.Map(p => p.Name).ConcatWithSeparator("And");
                var outerEntityGlobalIdPropsAsArgumentsString = e.GetOuterEntityGlobalIdPropertiesAsArgumentsString(outerEntityStateFieldName);

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                if (Entity.IsOuterEntityImmutable())
                {

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("            assureAllLoaded();\n            return this.loaded");

//line default
//line hidden


//line 123 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 123 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(".values();\n");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("            //if (!get");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("()) {\n            //    throw new UnsupportedOperationException(\"State collection" +
                    " is NOT ReadOnly.\");\n            //}\n            assureAllLoaded();\n            " +
                    "return this.loaded");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(".values();\n");

//line default
//line hidden


//line 134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                }

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("        } else {\n            List<");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> ss = new ArrayList<");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State>();\n            for (");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State s : loaded");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values()) {\n");

//line default
//line hidden


//line 140 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                if (!e.IsImmutableOrOuterEntityImmutable())
                {
                    var moreFilterStr = " && s.get" + Entity.ReservedProperties.Deleted + "()";
                    if (e.ReservedProperties.NoDeleted)
                    {
                        moreFilterStr = String.Empty;
                    }

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("                if (!(removed");

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(".containsKey(((");

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State.Sql");

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State)s).get");

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("())");

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(moreFilterStr));

//line default
//line hidden


//line 149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(")) {\n                    ss.add(s);\n                }\n");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("                ss.add(s);\n");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                }

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("            }\n            return ss;\n        }\n    }\n\n    public boolean isLazy()" +
                " {\n        return true;\n    }\n\n    protected void assureAllLoaded() {\n        if" +
                " (!allLoaded) {\n            Iterable<");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> ss = get");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateDaoName));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("().findBy");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(findBySuffix));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityGlobalIdPropsAsArgumentsString));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getAggregateStateInvokeString));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(");\n            for (");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State s : ss) {\n");

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                if (Entity.NeedOuterEntityReference())
                {

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("                if (s instanceof Abstract");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State) { ((Abstract");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State)s).set");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State(");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("); }\n");

//line default
//line hidden


//line 179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                }

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("                if (!this.loaded");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".containsKey(((");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)s).get");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Name));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()) \n                    && !this.removed");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".containsKey(((");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)s).get");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Name));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("())) {\n                    this.loaded");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".put(((");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)s).get");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Name));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(), s);\n                }\n            }\n            allLoaded = true;\n        }\n " +
                "   }\n\n    public Abstract");

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("StateCollection(");

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State outerState) {\n        this.");

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" = outerState;\n        this.setForReapplying(((");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)outerState).getForReapplying());\n    }\n\n    @Override\n    public Iterator<");

//line default
//line hidden


//line 197 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 197 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> iterator() {\n        return getInnerIterable().iterator();\n    }\n\n    publ" +
                "ic ");

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" get(");

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.JavaType()));

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" ");

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.GetParameterName()));

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(") {\n        return get(");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.GetParameterName()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", true, false);\n    }\n\n    public ");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" getOrAdd(");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.JavaType()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" ");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.GetParameterName()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(") {\n        return get(");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.GetParameterName()));

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", false, false);\n    }\n\n    protected ");

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" get(");

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.JavaType()));

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" ");

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Id.GetParameterName()));

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", boolean nullAllowed, boolean forCreation) {\n        ");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Type));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" globalId = new ");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Type));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityGlobalIdPropsAsArgumentsString));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(", ");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.GetParameterName()));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(");\n        if (loaded");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".containsKey(globalId)) {\n            ");

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State state = loaded");

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".get(globalId);\n            if (state instanceof Abstract");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State) {\n                ((Abstract");

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).set");

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(get");

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 214 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("());\n            }\n            return state;\n        }\n        boolean justNewIfN" +
                "otLoaded = forCreation || getForReapplying();\n        if (justNewIfNotLoaded) {\n" +
                "            if (get");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()) {\n                throw new UnsupportedOperationException(\"State collection i" +
                "s ReadOnly.\");\n            }\n            ");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State state = Abstract");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Simple");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.newForReapplying();\n            ((");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).set");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GlobalId.Name));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(globalId);\n            loaded");

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".put(globalId, state);\n            return state;\n        } else {\n            ");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State state = get");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateDaoName));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("().get(globalId, nullAllowed, ");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getAggregateStateInvokeString));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(");\n            if (state != null) {\n                if (state instanceof Abstract" +
                "");

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State) {\n                    ((Abstract");

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetNameForState()));

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).set");

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(get");

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("());\n                }\n                if (((");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).isStateUnsaved() && get");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()) {\n                    return state;//throw new UnsupportedOperationException(" +
                "\"State collection is ReadOnly.\");\n                }\n                loaded");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".put(globalId, state);\n            }\n            return state;\n        }\n\n    }\n\n" +
                "    public boolean remove(");

//line default
//line hidden


//line 243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" state) {\n        if (get");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()) {\n            throw new UnsupportedOperationException(\"State collection is Re" +
                "adOnly.\");\n        }\n        this.loaded");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".remove(((");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).get");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("());\n        if (this.removed");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".containsKey(((");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).get");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("())) {\n            return false;\n        }\n        this.removed");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".put(((");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).get");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(), state);\n        return true;\n    }\n\n    public boolean add(");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(" state) {\n        if (get");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateCollectionReadOnlyPropertyName()));

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("()) {\n            throw new UnsupportedOperationException(\"State collection is Re" +
                "adOnly.\");\n        }\n        this.removed");

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".remove(((");

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).get");

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("());\n        if (this.loaded");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".containsKey(((");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).get");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("())) {\n            return false;\n        }\n        this.loaded");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".put(((");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)state).get");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdName()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(), state);\n        return true;\n    }\n\n    public Collection<");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> getLoadedStates() {\n        return Collections.unmodifiableCollection(this" +
                ".loaded");

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values());\n    }\n\n    public Collection<");

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> getRemovedStates() {\n        return Collections.unmodifiableCollection(thi" +
                "s.removed");

//line default
//line hidden


//line 272 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 272 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values());\n    }\n\n    public int size() {\n        assureAllLoaded();\n        ret" +
                "urn this.loaded");

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".size();\n    }\n\n    public boolean isEmpty() {\n        assureAllLoaded();\n       " +
                " return this.loaded");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".isEmpty();\n    }\n\n    public boolean contains(Object o) {\n        if (loaded");

//line default
//line hidden


//line 286 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 286 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values().contains(o)) {\n            return true;\n        }\n        assureAllLoad" +
                "ed();\n        return this.loaded");

//line default
//line hidden


//line 290 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 290 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".containsValue(o);\n    }\n\n    public Object[] toArray() {\n        assureAllLoaded" +
                "();\n        return this.loaded");

//line default
//line hidden


//line 295 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 295 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values().toArray();\n    }\n\n    public <T> T[] toArray(T[] a) {\n        assureAll" +
                "Loaded();\n        return this.loaded");

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values().toArray(a);\n    }\n\n    public boolean containsAll(Collection<?> c) {\n  " +
                "      assureAllLoaded();\n        return this.loaded");

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values().containsAll(c);\n    }\n\n    public boolean addAll(Collection<? extends ");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State> c) {\n        boolean b = false;\n        for (");

//line default
//line hidden


//line 310 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 310 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State s : c) {\n            if (add(s)) {\n                b = true;\n            }\n" +
                "        }\n        return b;\n    }\n\n    public boolean remove(Object o) {\n       " +
                " return remove((");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(@"State)o);
    }

    public boolean removeAll(Collection<?> c) {
        boolean b = false;
        for (Object s : c) {
            if (remove(s)) {
                b = true;
            }
        }
        return b;
    }

    public boolean retainAll(Collection<?> c) {
        throw new UnsupportedOperationException();
    }

    public void clear() {
        assureAllLoaded();
        this.loaded");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".values().forEach(s -> this.removed");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".put(((");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("State)s).get");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GlobalId.Name));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("(), s));\n        this.loaded");

//line default
//line hidden


//line 339 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 339 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write(".clear();\n    }\n\n    //region Saveable Implements\n\n    public void save ()\n    {\n" +
                "");

//line default
//line hidden


//line 346 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                // /////////////////////////////
                if (!e.Immutable || e.IsNoEventSourcing())
                {
                    // ////////////////////////////         

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("        for (");

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State s : this.getLoaded");

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("()) {\n            get");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateDaoName));

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("().save(s);\n        }\n        for (");

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("State s : this.removed");

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionName));

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(".values()) {\n            get");

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateDaoName));

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    this.Write("().delete(s);\n        }\n");

//line default
//line hidden


//line 357 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                    // /////////////////////////////
                }
                // ////////////////////////////         

//line default
//line hidden


//line 362 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                this.Write("    }\n\n    //endregion\n\n}\n\n\n");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCollectionTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"


        public class EntityBaseAbstractStateTemplate : CSharpTemplate
        {

            protected EntityBase EntityBase { get; set; }

            protected BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected bool IncludingHoistedProperties
            {
                get { return !EntityBase.IsPolymorphic(); }
            }

            protected virtual bool IsEntityBaseSaveable
            {
                get
                {
                    return (this.EntityBase.Entities != null) && (this.EntityBase.Entities.Count > 0);
                }
            }

            protected virtual IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();

                    if (EntityBase is Aggregate)
                    {
                        //region IIdentity implementation
                        properties.Add(EntityBase.Id);
                        //endregion
                    }
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsCollectionProperty) { continue; }
                        if (p.IsReservedPropertyActive && EntityBase.ReservedProperties.NoActive) { continue; }
                        if (p.IsReservedPropertyDeleted && (EntityBase.ReservedProperties.NoDeleted || EntityBase.IsImmutableOrOuterEntityImmutable())) { continue; }

                        //if (!p.IsReservedProperty || p.IsReservedPropertyActive || p.IsReservedPropertyVersion) 
                        //{
                        properties.Add(p);
                        //}			
                    }
                    if (EntityBase.IsDiscriminatorBaseMultiTenancyEnabled())
                    {
                        properties.Add(EntityBase.CreateTenantIdProperty());
                    }
                    return properties;
                }
            }


            protected virtual IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsValueObjectCollectionProperty())
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                            es.Add(e);
                        }
                    }
                    return es;
                }
            }

            protected virtual IList<Entity> SelfAndSupertypeInnerEntities
            {
                get { return InnerEntities; }
            }

            protected virtual IList<Entity> EntitiesToRemoved
            {
                get
                {
                    return InnerEntities;
                }
            }

            protected virtual string TypeName
            {
                get
                {
                    return EntityBase.GetNameForState();
                }
            }

            protected virtual string TypeNameForEvent
            {
                get
                {
                    return EntityBase.GetNameForEvent();
                }
            }

            protected virtual bool IsInSubtype
            {
                get
                {
                    return false;
                }
            }

            protected virtual IList<Property> DerivedCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (var p in EntityBase.GetDerivedCollectionProperties())
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                        properties.Add(p);
                    }
                    return properties;
                }
            }

            protected virtual IList<Property> JavaDerivedProperties
            {
                get
                {
                    return new Property[0];//todo
                }
            }

            protected virtual IList<Property> PropertiesSetByStateCreatedEvent
            {
                get
                {
                    return EntityBase.GetPropertiesSetByStateCreatedEvent();
                }
            }

            protected virtual IList<Property> PropertiesSetByStateMergePatchedEvent
            {
                get
                {
                    return PropertiesSetByStateCreatedEvent;
                }
            }

            public virtual bool IsAbstract
            {
                get
                {
                    return EntityBase.Abstract;
                }
            }

            protected virtual string ExtendsBaseClassString
            {
                get
                {
                    return String.Empty;
                }
            }

            protected virtual string StateInterfacesString
            {
                get
                {
                    return this.TypeName + "State" //+ EntityBase.GetGenericTypeParametersString() 
                        + ".Sql" + this.TypeName + "State";
                }
            }

            public EntityBaseAbstractStateTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(".*;\n");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(".");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("Event.*;\n");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 232 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("\npublic abstract class Abstract");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.ExtendsBaseClassString));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(" implements ");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StateInterfacesString));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsEntityBaseSaveable ? ", Saveable" : ""));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.IsDiscriminatorBaseMultiTenancyEnabled() ? ", TenantSupport" : ""));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(" {\n\n");

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                //var properties = new List<Property>();
                //if (EntityBase is Aggregate) 
                //{
                //    properties.Add(EntityBase.Id);
                //}

                if (!this.IsInSubtype && EntityBase is Entity)
                {
                    var entity = EntityBase as Entity;
                    var aggregateStateFieldName = BoundedContext.GetPrivateFieldName(entity.Aggregate.GetNameForState() + "State");


//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    private ");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Type));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.GetPrivateFieldName()));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = new ");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Type));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("();\n\n    public ");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Type));

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Name));

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() {\n        return this.");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.GetPrivateFieldName()));

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Name));

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Type));

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.CamelCaseName()));

//line default
//line hidden


//line 254 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(") {\n        this.");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.GetPrivateFieldName()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.CamelCaseName()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n    private transient ");

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State ");

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateStateFieldName));

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n\n    public ");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State get");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State() {\n        return ");

//line default
//line hidden


//line 261 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateStateFieldName));

//line default
//line hidden


//line 261 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State(");

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Aggregate.GetNameForState()));

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State s) {\n        ");

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateStateFieldName));

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = s;\n    }\n    \n");

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    //foreach (var p in entity.GetTransientOuterIdProperties())
                    //{
                    // Outer Id:
                    //}

                    foreach (var p in BoundedContext.GetAllNestedValueObjects()[entity.GlobalId.Type].Properties.Values)
                    {
                        var originProperty = p.OriginalProperty;
                        if (originProperty == null) { originProperty = p; }

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    public ");

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(originProperty.JavaType()));

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(originProperty.Name));

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() {\n        return this.get");

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Name));

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("();\n    }\n        \n    public void set");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(originProperty.Name));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(originProperty.JavaType()));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(originProperty.CamelCaseName()));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(") {\n        this.get");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GlobalId.Name));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().set");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(originProperty.CamelCaseName()));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(");\n    }\n\n");

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }
                }

//line default
//line hidden


//line 291 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"


                foreach (Property p in this.ValueObjectProperties)
                {
                    if (p.IsDerived) { continue; }
                    var pType = p.JavaType();
                    var assignedFromDefaultLogic = !String.IsNullOrWhiteSpace(p.JavaDefaultLogic()) ? " = " + p.JavaDefaultLogic() : String.Empty;

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    private ");

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(assignedFromDefaultLogic));

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n\n    public ");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() {\n        return this.");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(") {\n        this.");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n");

//line default
//line hidden


//line 309 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

                // ///////////////////////////////////
                foreach (Property p in this.JavaDerivedProperties)
                {

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() {\n        return (");

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaDerivationLogic()));

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(");\n    }\n\n");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

                foreach (Property p in this.ValueObjectCollectionProperties)
                {
                    if (p.IsDerived) { continue; }
                    if (p.IsValueObjectCollectionProperty())
                    {

//line default
//line hidden


//line 329 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    private Set<");

//line default
//line hidden


//line 329 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 329 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("> ");

//line default
//line hidden


//line 329 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 329 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(";\n\n    public Set<");

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("> get");

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() {\n        return this.");

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(Set<");

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("> ");

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(p.Name)));

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(") {\n        this.");

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(p.Name)));

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 339 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }
                }

                if (!this.IsInSubtype)
                {
                    var versionProperty = EntityBase.Properties[EntityBase.ReservedProperties.Version];

//line default
//line hidden


//line 347 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    public boolean isStateUnsaved() {\n        return this.get");

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(versionProperty.Name));

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() == null;\n    }\n\n");

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

                foreach (Entity e in this.InnerEntities)
                {

                    var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    private EntityStateCollection<");

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State> ");

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(collectionProperty.Name)));

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n\n    public EntityStateCollection<");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() {\n        return this.");

//line default
//line hidden


//line 362 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(collectionProperty.Name)));

//line default
//line hidden


//line 362 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(EntityStateCollection<");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State> ");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.GetParameterName()));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(") {\n        this.");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(collectionProperty.Name)));

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.GetParameterName()));

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n    }\n\n");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (!this.IsInSubtype)
                {
                    var stateReadOnlyPrivateFieldName = BoundedContext.GetPrivateFieldName(BoundedContext.GetStateReadOnlyPropertyName());

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    private Boolean ");

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateReadOnlyPrivateFieldName));

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(";\n\n    public Boolean get");

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() { return this.");

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateReadOnlyPrivateFieldName));

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("; }\n\n    public void set");

//line default
//line hidden


//line 381 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 381 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(Boolean readOnly) { this.");

//line default
//line hidden


//line 381 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateReadOnlyPrivateFieldName));

//line default
//line hidden


//line 381 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = readOnly; }\n\n    private boolean forReapplying;\n\n    public boolean getForReap" +
                    "plying() {\n        return forReapplying;\n    }\n\n    public void setForReapplying" +
                    "(boolean forReapplying) {\n        this.forReapplying = forReapplying;\n    }\n\n");

//line default
//line hidden


//line 393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    if (EntityBase is Entity)
                    {
                        var entity = (Entity)EntityBase;
                        if (entity.OuterEntity != entity.Aggregate && entity.NeedOuterEntityReference())
                        {
                            var outerEntityStateFieldName = BoundedContext.GetPrivateFieldName(entity.OuterEntity.GetNameForState() + "State");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State ");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(";\n\n    public ");

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State get");

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State() {\n        return ");

//line default
//line hidden


//line 404 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 404 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State(");

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State s) {\n        ");

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityStateFieldName));

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" = s; \n    }\n\n");

//line default
//line hidden


//line 411 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            foreach (var p in entity.GetRecursiveCollectionProperties())
                            {
                                var referenceProperty = entity.GetPropertyByReferenceName(p.InverseOf);
                                var outerCollectionProperty = entity.OuterEntity.GetCollectionPropertyByItemType(entity.Name);

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("    public Iterable<");

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State> get");

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("() {\n        if (get");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State() != null) {\n            return java.util.stream.StreamSupport.stream(get");

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State().get");

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerCollectionProperty.Name));

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().spliterator(), false)\n                    .filter(m -> Objects.equals(m.get");

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(referenceProperty.Name));

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("(), this.get");

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Id.Name));

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("())).collect(java.util.stream.Collectors.toList());\n        }\n        return Coll" +
                                "ections.emptyList();\n    }\n\n");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"


                    ////////////////
                    if (EntityBase.IsImmutableOrOuterEntityImmutable() || EntityBase.IsNoEventSourcing())
                    {
                        var commandIdPrivateFieldName = BoundedContext.GetPrivateFieldName(BoundedContext.GetCommandIdName());

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    private String ");

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandIdPrivateFieldName));

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(";\n\n    public String get");

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() {\n        return this.");

//line default
//line hidden


//line 440 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandIdPrivateFieldName));

//line default
//line hidden


//line 440 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(String ");

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(") {\n        this.");

//line default
//line hidden


//line 444 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandIdPrivateFieldName));

//line default
//line hidden


//line 444 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 444 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 444 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        ////////////////
                    } //if (EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

                }


//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                foreach (var p in this.DerivedCollectionProperties)
                {

                    if (!EntityBase.Entities.ContainsKey(p.ItemType)) { continue; }
                    if (!p.Filter.ContainsKey("Java")) { continue; }
                    var baseCollectionProperty = EntityBase.GetCollectionPropertyByItemType(p.ItemType);

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    public Iterable<");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() {\n        if (get");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(baseCollectionProperty.Name));

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("() != null) {\n            return java.util.stream.StreamSupport.stream(this.get");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(baseCollectionProperty.Name));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("().spliterator(), false)\n                    .filter(");

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Filter["Java"]));

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(")\n                    .collect(java.util.stream.Collectors.toList());\n        }\n " +
                    "       return Arrays.asList(new ");

//line default
//line hidden


//line 469 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 469 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State[0]);\n    }\n\n");

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 481 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    // //////////////////
                    if (EntityBase is Aggregate)
                    {

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    public Abstract");

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State(List<Event> events) {\n        initializeForReapplying();\n        if (events" +
                        " != null && events.size() > 0) {\n            this.set");

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(((");

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event) events.get(0)).get");

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 489 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n            for (Event e : events) {\n                mutate(e);\n            " +
                        "    this.set");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("((this.get");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() == null ? ");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State.VERSION_NULL : this.get");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()) + 1);\n            }\n        }\n    }\n\n");

//line default
//line hidden


//line 497 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"


                    }
                    // //////////////////

//line default
//line hidden


//line 502 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("\n    public Abstract");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("State() {\n        initializeProperties();\n    }\n\n    protected void initializeFor" +
                "Reapplying() {\n");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (!this.IsInSubtype)
                {

//line default
//line hidden


//line 517 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        this.forReapplying = true;\n");

//line default
//line hidden


//line 518 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 523 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        super.setForReapplying(true);\n");

//line default
//line hidden


//line 524 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("\n        initializeProperties();\n    }\n    \n    protected void initializeProperti" +
                "es() {\n");

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (this.IsInSubtype)
                {

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        super.initializeProperties();\n");

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 540 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {

                    var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(collectionProperty.Name)));

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" = new Simple");

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("StateCollection(this);\n");

//line default
//line hidden


//line 547 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 550 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("    }\n");

//line default
//line hidden


//line 551 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (EntityBase is Aggregate && !this.IsInSubtype)
                {

//line default
//line hidden


//line 555 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("\n    @Override\n    public int hashCode() {\n        return get");

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("().hashCode();\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n     " +
                    "   if (this == obj) { return true; }\n        if (obj instanceof ");

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State) {\n            return Objects.equals(this.get");

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(), ((");

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State)obj).get");

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("());\n        }\n        return false;\n    }\n\n");

//line default
//line hidden


//line 570 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }
                else if (EntityBase is Entity)
                {
                    var e = (Entity)EntityBase;

//line default
//line hidden


//line 576 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("\n    @Override\n    public int hashCode() {\n        return get");

//line default
//line hidden


//line 579 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 579 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("().hashCode();\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n     " +
                    "   if (this == obj) { return true; }\n        if (obj instanceof ");

//line default
//line hidden


//line 585 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 585 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State) {\n            return Objects.equals(this.get");

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(), ((");

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State)obj).get");

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("());\n        }\n        return false;\n    }\n\n");

//line default
//line hidden


//line 591 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 594 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                var namedDeletedOrRemoved = (EntityBase is Aggregate) ? "Deleted" : "Removed";

//line default
//line hidden


//line 597 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 603 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("\n    public void mutate(Event e) {\n        set");

//line default
//line hidden


//line 605 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetStateReadOnlyPropertyName()));

//line default
//line hidden


//line 605 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(false);\n        if (e instanceof ");

//line default
//line hidden


//line 606 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 606 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("StateCreated) {\n            when((");

//line default
//line hidden


//line 607 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 607 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("StateCreated) e);\n");

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("        } else if (e instanceof ");

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateMergePatched) {\n            when((");

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateMergePatched) e);\n");

//line default
//line hidden


//line 616 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!EntityBase.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        } else if (e instanceof ");

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(") {\n            when((");

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(") e);\n");

//line default
//line hidden


//line 624 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            if (this.IsInSubtype)
                            {

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        } else if (e instanceof ");

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State");

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 628 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(") {\n            when((");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(") e);\n");

//line default
//line hidden


//line 630 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }

//line default
//line hidden


//line 633 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            // /////////////////////////////////////////////////////
                        } // end if (!Aggregate.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////
                          ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    // ///////////////////////
                    if (EntityBase is Aggregate)
                    {
                        foreach (var m in (EntityBase as Aggregate).GetJavaMutationLogicMethods())
                        {

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        } else if (e instanceof Abstract");

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(") {\n            when((Abstract");

//line default
//line hidden


//line 649 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 649 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 649 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 649 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(")e);\n");

//line default
//line hidden


//line 650 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 654 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        } else {\n            throw new UnsupportedOperationException(String.forma" +
                    "t(\"Unsupported event type: %1$s\", e.getClass().getName()));\n        }\n");

//line default
//line hidden


//line 657 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    var constraintsLogic = EntityBase.GetConstraintsJavaValidationLogic();
                    foreach (string v in constraintsLogic)
                    {
                        var logic = v.Replace("{this}", "this");

//line default
//line hidden


//line 663 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("        if (!(");

//line default
//line hidden


//line 663 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(logic));

//line default
//line hidden


//line 663 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(")) {\n            throw DomainError.named(\"constraintViolated\", \"Violated validati" +
                        "on logic: %1$s\", \"");

//line default
//line hidden


//line 664 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(logic.Replace("\"", "\\\"")));

//line default
//line hidden


//line 664 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\");\n        }\n");

//line default
//line hidden


//line 666 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    }\n\n    public void when(");

//line default
//line hidden


//line 671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("StateCreated");

//line default
//line hidden


//line 671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" e) {\n");

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    //if (this.IsInSubtype)
                    //{
                    //}
                    //else
                    //{

//line default
//line hidden


//line 679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        throwOnWrongEvent(e);\n\n");

//line default
//line hidden


//line 681 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    //}
                    foreach (Property p in this.PropertiesSetByStateCreatedEvent)
                    {
                        if (p.IsDerived) { continue; }
                        if (!String.IsNullOrWhiteSpace(p.JavaDefaultLogic()))
                        {

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        if(e.get");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("() != null) { this.set");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(e.get");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("()); }\n");

//line default
//line hidden


//line 690 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 695 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        this.set");

//line default
//line hidden


//line 695 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 695 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(e.get");

//line default
//line hidden


//line 695 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 695 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("());\n");

//line default
//line hidden


//line 696 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }
                    }
                    //聚合内的实体可能会软删除后重新创建，只是简单地重置 Deleted 就好？

                    // /////////////////////////////////////////////////////
                    if (!(EntityBase.ReservedProperties.NoDeleted || EntityBase.IsImmutableOrOuterEntityImmutable()))
                    {
                        // /////////////////////////////////////////////////////


//line default
//line hidden


//line 707 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n        this.set");

//line default
//line hidden


//line 708 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Deleted));

//line default
//line hidden


//line 708 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(false);\n");

//line default
//line hidden


//line 709 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!EntityBase.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

//line default
//line hidden


//line 714 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("\n        this.set");

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(e.get");

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("());\n        this.set");

//line default
//line hidden


//line 716 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 716 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("(e.get");

//line default
//line hidden


//line 716 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 716 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("());\n\n");

//line default
//line hidden


//line 718 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    foreach (Entity e in this.SelfAndSupertypeInnerEntities)
                    {

                        var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);


//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("        for (");

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateCreated innerEvent : e.get");

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Events()) {\n            ");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State innerState = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State>)this.get");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).getOrAdd(((");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event)innerEvent).get");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdPropertyLocalIdName()));

//line default
//line hidden


//line 726 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n            ((");

//line default
//line hidden


//line 727 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 727 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State.Sql");

//line default
//line hidden


//line 727 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 727 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State)innerState).mutate(innerEvent);\n        }\n");

//line default
//line hidden


//line 729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }

//line default
//line hidden


//line 732 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    }\n\n");

//line default
//line hidden


//line 734 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    if (this.IsInSubtype)
                    {

//line default
//line hidden


//line 738 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    @Override\n    protected void merge(");

//line default
//line hidden


//line 739 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 739 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State s) {\n        merge((");

//line default
//line hidden


//line 740 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 740 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State)s);\n    }\n\n");

//line default
//line hidden


//line 743 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    protected void merge(");

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State s) {\n        if (s == this) {\n            return;\n        }\n");

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    foreach (Property p in this.PropertiesSetByStateCreatedEvent)
                    {
                        if (p.IsDerived) { continue; }

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("        this.set");

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(s.get");

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n");

//line default
//line hidden


//line 756 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }


//line default
//line hidden


//line 760 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    foreach (Entity e in this.SelfAndSupertypeInnerEntities)
                    {

                        var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);


//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n        if (s.get");

//line default
//line hidden


//line 768 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 768 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() != null) {\n            Iterable<");

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State> iterable;\n            if (s.get");

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().isLazy()) {\n                iterable = s.get");

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().getLoadedStates();\n            } else {\n                iterable = s.get");

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("();\n            }\n            if (iterable != null) {\n                for (");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State ss : iterable) {\n                    ");

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State thisInnerState = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State>)this.get");

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).getOrAdd(ss.get");

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 777 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n                    ((Abstract");

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State) thisInnerState).merge(ss);\n                }\n            }\n        }\n     " +
                        "   if (s.get");

//line default
//line hidden


//line 782 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 782 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() != null) {\n            if (s.get");

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() instanceof EntityStateCollection.ModifiableEntityStateCollection) {\n          " +
                        "      if (((EntityStateCollection.ModifiableEntityStateCollection)s.get");

//line default
//line hidden


//line 784 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 784 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).getRemovedStates() != null) {\n                    for (");

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State ss : ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State>)s.get");

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 785 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).getRemovedStates()) {\n                        ");

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State thisInnerState = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State>)this.get");

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).getOrAdd(ss.get");

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n                        ((Abstract");

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateCollection)this.get");

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).remove(thisInnerState);\n                    }\n                }\n            }" +
                        " else {\n                if (s.get");

//line default
//line hidden


//line 791 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 791 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().isAllLoaded()) {\n                    Set<");

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("> removedStateIds = new HashSet<>(this.get");

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().stream().map(i -> i.get");

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).collect(java.util.stream.Collectors.toList()));\n                    s.get");

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("().forEach(i -> removedStateIds.remove(i.get");

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()));\n                    for (");

//line default
//line hidden


//line 794 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 794 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" i : removedStateIds) {\n                        ");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State thisInnerState = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State>)this.get");

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).getOrAdd(i);\n                        ((Abstract");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateCollection)this.get");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("()).remove(thisInnerState);\n                    }\n                }\n            }" +
                        "\n        }\n");

//line default
//line hidden


//line 801 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }

//line default
//line hidden


//line 804 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    }\n\n");

//line default
//line hidden


//line 806 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    public void when(");

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateMergePatched");

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" e) {\n        throwOnWrongEvent(e);\n\n");

//line default
//line hidden


//line 815 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        foreach (Property p in this.PropertiesSetByStateMergePatchedEvent)
                        {
                            if (p.IsDerived) { continue; }

//line default
//line hidden


//line 820 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        if (e.get");

//line default
//line hidden


//line 820 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 820 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("() == null) {\n            if (e.getIsProperty");

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Removed() != null && e.getIsProperty");

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Removed()) {\n                this.set");

//line default
//line hidden


//line 822 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 822 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(null);\n            }\n        } else {\n            this.set");

//line default
//line hidden


//line 825 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 825 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(e.get");

//line default
//line hidden


//line 825 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 825 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("());\n        }\n");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n        this.set");

//line default
//line hidden


//line 831 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.UpdatedBy));

//line default
//line hidden


//line 831 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 831 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 831 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n        this.set");

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.UpdatedAt));

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n\n");

//line default
//line hidden


//line 834 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        foreach (Entity e in this.SelfAndSupertypeInnerEntities)
                        {

                            var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);


//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        for (");

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event innerEvent : e.get");

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Events()) {\n            ");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State innerState = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State>)this.get");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("()).getOrAdd(((");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event.Sql");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event)innerEvent).get");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("().get");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGlobalIdPropertyLocalIdName()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("());\n            ((");

//line default
//line hidden


//line 843 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 843 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State.Sql");

//line default
//line hidden


//line 843 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 843 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State)innerState).mutate(innerEvent);\n");

//line default
//line hidden


//line 844 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            if (EntityBase.Aggregate.GetSoftDeleteCurrentState())
                            {

//line default
//line hidden


//line 848 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("            //Just Soft Delete Current State\n");

//line default
//line hidden


//line 849 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }
                            else
                            {
                                // /////////////////////////////////
                                if (!e.IsImmutableOrOuterEntityImmutable())
                                {

//line default
//line hidden


//line 855 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    // /////////////////////////////////////////////////////
                                    if (!e.ReservedProperties.NoDeleted)
                                    {
                                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("            if (innerEvent instanceof ");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("Event.");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("StateRemoved) {\n                //");

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("Event.");

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("StateRemoved removed = (");

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("Event.");

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("StateRemoved)innerEvent;\n                ((Abstract");

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("StateCollection)this.get");

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("()).remove(innerState);\n            }\n");

//line default
//line hidden


//line 865 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        // /////////////////////////////////////////////////////
                                    }
                                    // /////////////////////////////////////////////////////

//line default
//line hidden


//line 870 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        }\n");

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }

//line default
//line hidden


//line 878 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    }\n\n");

//line default
//line hidden


//line 880 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!EntityBase.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

                            //if (EntityBase is Aggregate) 


//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("    public void when(");

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeNameForEvent));

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" e) {\n        throwOnWrongEvent(e);\n\n        this.set");

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Deleted));

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(true);\n        this.set");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.UpdatedBy));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(e.get");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("());\n        this.set");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.UpdatedAt));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(e.get");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("());\n\n");

//line default
//line hidden


//line 896 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            foreach (Entity e in this.EntitiesToRemoved)
                            {

                                var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);


//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        for (");

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.ItemType));

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State innerState : this.get");

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 903 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("()) {\n");

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                if (EntityBase.Aggregate.GetSoftDeleteCurrentState())
                                {

//line default
//line hidden


//line 908 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("            this.get");

//line default
//line hidden


//line 908 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 908 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("().add(innerState);\n");

//line default
//line hidden


//line 909 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                }
                                else
                                {

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("            ((Abstract");

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("StateCollection)this.get");

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("()).remove(innerState);\n");

//line default
//line hidden


//line 913 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                }

//line default
//line hidden


//line 916 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                if (!e.IsImmutableOrOuterEntityImmutable() && !e.ReservedProperties.NoDeleted)
                                {

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("        \n            ");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("StateRemoved innerE = e.new");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("StateRemoved(innerState.get");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.Name));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("());\n            innerE.set");

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("(e.get");

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("());\n            innerE.set");

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("(e.get");

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("());\n            ((");

//line default
//line hidden


//line 924 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 924 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("State.Mutable");

//line default
//line hidden


//line 924 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 924 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    this.Write("State)innerState).mutate(innerE);\n");

//line default
//line hidden


//line 925 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    if (EntityBase.Aggregate.GetCascadeStateEvent()) // ???
                                    {

//line default
//line hidden


//line 929 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("            e.add");

//line default
//line hidden


//line 929 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 929 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("Event(innerE);\n");

//line default
//line hidden


//line 930 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    }
                                    else
                                    {

//line default
//line hidden


//line 933 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("            //e.add");

//line default
//line hidden


//line 933 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 933 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                        this.Write("Event(innerE);\n");

//line default
//line hidden


//line 934 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                    }

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                }

//line default
//line hidden


//line 940 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        }\n");

//line default
//line hidden


//line 941 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("    }\n\n");

//line default
//line hidden


//line 946 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            // ////////////////////

                            // /////////////////////////////////////////////////////
                        } // end if (!EntityBase.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 957 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////


//line default
//line hidden


//line 963 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                // ///////////////////////
                if (EntityBase is Aggregate)
                {
                    foreach (var m in (EntityBase as Aggregate).GetJavaMutationLogicMethods())
                    {
                        // ///////////////////////////////////////////
                        if (!m.IsReturnVoid()) { continue; }
                        // ///////////////////////////////////////////


//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    public void when(Abstract");

//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" e) {\n        throwOnWrongEvent(e);\n\n");

//line default
//line hidden


//line 977 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        foreach (var p in m.GetEventPropertiesExcludingAggregateIdAndVersionAndCommandIdAndRequesterId())
                        {
                            var camelCasePN = BoundedContext.GetCamelCaseName(p.Name);

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" = e.get");

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 982 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("();\n");

//line default
//line hidden


//line 983 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            if (camelCasePN != p.Name)
                            {

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" = ");

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(";\n");

//line default
//line hidden


//line 988 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 992 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n        if (this.get");

//line default
//line hidden


//line 993 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 993 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() == null){\n            this.set");

//line default
//line hidden


//line 994 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 994 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 994 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 994 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n        }\n        if (this.get");

//line default
//line hidden


//line 996 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 996 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("() == null){\n            this.set");

//line default
//line hidden


//line 997 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 997 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 997 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 997 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n        }\n        this.set");

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.UpdatedBy));

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n        this.set");

//line default
//line hidden


//line 1000 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.UpdatedAt));

//line default
//line hidden


//line 1000 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 1000 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 1000 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("());\n\n        ");

//line default
//line hidden


//line 1002 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetJavaMutationLogicInvokeString()));

//line default
//line hidden


//line 1002 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n    }\n\n");

//line default
//line hidden


//line 1005 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }

                    // ///////////////////////////////////////
                    foreach (var m in (EntityBase as Aggregate).GetJavaStaticInvokingMutationLogicMethods())
                    {

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    public interface ");

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.Name));

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Mutation {\n        ");

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.Entity.Aggregate.EntityName));

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State mutate(");

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetJavaStaticMutationMethodParametersString()));

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(");\n    }\n\n");

//line default
//line hidden


//line 1016 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }

                }
                // ///////////////////////


//line default
//line hidden


//line 1023 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("    public void save() {\n");

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (this.IsInSubtype)
                {

//line default
//line hidden


//line 1028 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("       super.save();\n");

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 1032 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {

                    var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);

//line default
//line hidden


//line 1038 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        ((Saveable)");

//line default
//line hidden


//line 1038 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(collectionProperty.Name)));

//line default
//line hidden


//line 1038 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(").save();\n\n");

//line default
//line hidden


//line 1040 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 1043 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("    }\n\n");

//line default
//line hidden


//line 1045 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!EntityBase.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 1051 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    if (!this.IsInSubtype)
                    {

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    protected void throwOnWrongEvent(");

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("Event event) {\n");

//line default
//line hidden


//line 1056 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        if (EntityBase is Aggregate)
                        {

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" stateEntityId = this.get");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(); // Aggregate Id\n        ");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" eventEntityId = ((");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event.Sql");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("Event)event).get");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("().get");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(@"(); // EntityBase.Aggregate.GetEventIdPropertyIdName();
        if (!stateEntityId.equals(eventEntityId)) {
            throw DomainError.named(""mutateWrongEntity"", ""Entity Id %1$s in state but entity id %2$s in event"", stateEntityId, eventEntityId);
        }

");

//line default
//line hidden


//line 1066 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }
                        else
                        {
                            var entity = EntityBase as Entity;
                            foreach (var p in BoundedContext.GetAllNestedValueObjects()[entity.GlobalId.Type].Properties.Values)
                            {

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" stateEntityId");

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" = this.get");

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetGlobalIdName()));

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().get");

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1072 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("();\n        ");

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" eventEntityId");

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" = ((");

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event.Sql");

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event)event).get");

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().get");

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1073 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("();\n        if (!stateEntityId");

//line default
//line hidden


//line 1074 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1074 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(".equals(eventEntityId");

//line default
//line hidden


//line 1074 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1074 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(")) {\n            throw DomainError.named(\"mutateWrongEntity\", \"Entity Id ");

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" %1$s in state but entity id ");

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" %2$s in event\", stateEntityId");

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(", eventEntityId");

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1075 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(");\n        }\n\n");

//line default
//line hidden


//line 1078 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n");

//line default
//line hidden


//line 1083 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        if (EntityBase is Aggregate)
                        {
                            var aggregateVersionProperty = EntityBase.Properties[EntityBase.ReservedProperties.Version];

//line default
//line hidden


//line 1088 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 1088 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 1088 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" stateVersion = this.get");

//line default
//line hidden


//line 1088 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 1088 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("();\n");

//line default
//line hidden


//line 1089 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            // /////////////////////////////////////////////////////////////////
                            if (((Aggregate)EntityBase).GetIgnoringConcurrencyConflict())
                            {

//line default
//line hidden


//line 1094 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        if (stateVersion == null) {\n            ((");

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event.Sql");

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event)event).get");

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().set");

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State.VERSION_NULL);\n        } else {\n            ((");

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event.Sql");

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event)event).get");

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().set");

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 1097 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("(stateVersion);\n        }\n");

//line default
//line hidden


//line 1099 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }
                            else
                            {

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(" eventVersion = ((");

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event.Sql");

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("Event)event).get");

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().get");

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdAggregateVersionPropertyName()));

//line default
//line hidden


//line 1102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("();// Aggregate Version\n        if (eventVersion == null) {\n            throw new" +
                                " NullPointerException(\"event.get");

//line default
//line hidden


//line 1104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("().get");

//line default
//line hidden


//line 1104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdAggregateVersionPropertyName()));

//line default
//line hidden


//line 1104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("() == null\");\n        }\n        if (!(stateVersion == null && eventVersion.equals" +
                                "(");

//line default
//line hidden


//line 1106 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 1106 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                                this.Write("State.VERSION_NULL)) && !eventVersion.equals(stateVersion)) {\n            throw D" +
                                "omainError.named(\"concurrencyConflict\", \"Conflict between state version (%1$s) a" +
                                "nd event version (%2$s)\", stateVersion, eventVersion);\n        }\n");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            }
                            // /////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 1113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }
                        else // if (EntityBase is Entity) 
                        {
                            var entityVersionProperty = EntityBase.Properties[EntityBase.ReservedProperties.Version];
                            //这里取得的是（聚合内）实体的 version，不是聚合（根）的 version。

//line default
//line hidden


//line 1120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        if (getForReapplying()) { return; }\n\n        ");

//line default
//line hidden


//line 1122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 1122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("StateEvent stateEvent = event instanceof ");

//line default
//line hidden


//line 1122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 1122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("StateEvent ? (");

//line default
//line hidden


//line 1122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 1122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("StateEvent)event : null;\n        if (stateEvent == null) { return; }\n\n        ");

//line default
//line hidden


//line 1125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityVersionProperty.JavaType()));

//line default
//line hidden


//line 1125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" stateVersion = this.get");

//line default
//line hidden


//line 1125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 1125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("();\n        ");

//line default
//line hidden


//line 1126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityVersionProperty.JavaType()));

//line default
//line hidden


//line 1126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(" stateEventStateVersion = stateEvent.get");

//line default
//line hidden


//line 1126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 1126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("();\n        //if (stateEventStateVersion == null) {\n        stateEventStateVersio" +
                            "n = stateVersion == null ? ");

//line default
//line hidden


//line 1128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 1128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State.VERSION_NULL : stateVersion;\n        stateEvent.set");

//line default
//line hidden


//line 1129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 1129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("(stateEventStateVersion);\n        //}\n        //if (!(stateVersion == null && sta" +
                            "teEventStateVersion.equals(");

//line default
//line hidden


//line 1131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 1131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(@"State.VERSION_NULL)) && !stateEventStateVersion.equals(stateVersion))
        //{
        //    throw DomainError.named(""concurrencyConflict"", ""Conflict between stateVersion (%1$s) and stateEventStateVersion (%2$s)"", stateVersion, stateEventStateVersion);
        //}
");

//line default
//line hidden


//line 1135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }

                        // ////////////////////////////////////
                        //if (!(EntityBase is Aggregate && ((Aggregate)EntityBase).GetIgnoringConcurrencyConflict())) 
                        //{
                        // do version check! 
                        //}
                        // /////////////////////////////////////

//line default
//line hidden


//line 1145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("\n    }\n\n");

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    } // end if (!this.IsInSubtype)

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 1156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 1157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (!this.IsAbstract)
                {

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("    public static class Simple");

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State extends Abstract");

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetGenericTypeParametersString()));

//line default
//line hidden


//line 1161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(" {\n\n        public Simple");

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State() {\n        }\n\n");

//line default
//line hidden


//line 1166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    /////////////////////////////////////////////////////////////
                    if (!EntityBase.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 1172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        if (EntityBase is Aggregate)
                        {

//line default
//line hidden


//line 1176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("        public Simple");

//line default
//line hidden


//line 1176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                            this.Write("State(List<Event> events) {\n            super(events);\n        }\n\n");

//line default
//line hidden


//line 1180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        }

//line default
//line hidden


//line 1183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } //if (!EntityBase.IsAbsolutelyNoEventSourcing())
                      /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 1188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("        public static Simple");

//line default
//line hidden


//line 1188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State newForReapplying() {\n            Simple");

//line default
//line hidden


//line 1189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State s = new Simple");

//line default
//line hidden


//line 1189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    this.Write("State();\n            s.initializeForReapplying();\n            return s;\n        }" +
                    "\n\n    }\n\n");

//line default
//line hidden


//line 1196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                }

//line default
//line hidden


//line 1199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 1200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in this.InnerEntities)
                    {


//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("    static class Simple");

//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateCollection extends Abstract");

//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateCollection");

//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetGenericTypeParametersString()));

//line default
//line hidden


//line 1207 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(" {\n        public Simple");

//line default
//line hidden


//line 1208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForState()));

//line default
//line hidden


//line 1208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("StateCollection(Abstract");

//line default
//line hidden


//line 1208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.OuterEntity.GetNameForState()));

//line default
//line hidden


//line 1208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                        this.Write("State outerState) {\n            super(outerState);\n        }\n    }\n\n");

//line default
//line hidden


//line 1213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                    }
                }

//line default
//line hidden


//line 1217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                this.Write("\n}\n\n");

//line default
//line hidden


//line 1220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractStateTemplate.tt"


        public class AggregateAbstractStateTemplate : EntityBaseAbstractStateTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateAbstractStateTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateTemplate.tt"


        public class EntityAbstractStateTemplate : EntityBaseAbstractStateTemplate
        {

            Entity Entity { get; set; }

            public EntityAbstractStateTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"


        public class EntityBaseAbstractEventTemplate : CSharpTemplate
        {

            protected EntityBase EntityBase { get; set; }

            protected BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected virtual bool IsEntityBaseSaveable
            {
                get
                {
                    if (EntityBase.IsNoEventSourcing()) { return false; }
                    return (this.EntityBase.Entities != null) && (this.EntityBase.Entities.Count > 0);
                }
            }

            protected bool IncludingHoistedProperties
            {
                get { return !EntityBase.IsPolymorphic(); }
            }

            protected virtual IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (EntityBase is Entity)
                    {
                        properties.Add(EntityBase.Properties[EntityBase.ReservedProperties.Version]);
                    }
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsCollectionProperty) { continue; }
                        if (p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) { continue; }
                        if (!p.IsReservedProperty || (p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                            || p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt)
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsValueObjectCollectionProperty())
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                            es.Add(e);
                        }
                    }
                    return es;
                }
            }

            protected virtual IList<Property> RemovableProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                        if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                        {
                            properties.Add(p);
                        }
                    }
                    return properties;
                }
            }

            protected virtual string TypeName
            {
                get
                {
                    return EntityBase.GetNameForEvent();
                }
            }

            protected virtual string BaseClassName
            {
                get
                {
                    return "AbstractEvent";
                }
            }

            protected virtual string StateEventBaseClassName
            {
                get
                {
                    return "Abstract" + this.TypeName + "Event";
                }
            }

            protected virtual string BaseInterfaceName
            {
                get
                {
                    //return EntityBase.GetNameForEvent() + "Event";
                    return EntityBase.GetNameForEvent() + "Event.Sql" + EntityBase.GetNameForEvent() + "Event";
                }
            }

            protected virtual bool IsInSubtype
            {
                get
                {
                    return false;
                }
            }

            public virtual bool IsAbstract
            {
                get
                {
                    return EntityBase.Abstract;
                }
            }

            // //////////////////////

            public EntityBaseAbstractEventTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 170 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 177 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 177 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 177 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

                //var commandIdPrivateFieldName = BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName());

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(".*;\nimport ");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(".AbstractEvent;\n\npublic abstract class Abstract");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("Event extends ");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.BaseClassName));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(" implements ");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.BaseInterfaceName));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(" \n{\n");

//line default
//line hidden


//line 188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                if (!this.IsInSubtype)
                {

//line default
//line hidden


//line 192 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPrivateFieldName()));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n\n    public ");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("() {\n        return this.");

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPrivateFieldName()));

//line default
//line hidden


//line 201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" eventId) {\n        this.");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPrivateFieldName()));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" = eventId;\n    }\n    \n");

//line default
//line hidden


//line 208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    }
                    else
                    {
                        ////////////////

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State.Mutable");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State state;\n\n    public ");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State.Mutable");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State get");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State() {\n        return state;\n    }\n\n");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        IList<string> idPropertyNames;
                        if (EntityBase is Aggregate)
                        {
                            idPropertyNames = new string[] { EntityBase.Id.Name };
                        }
                        else
                        {
                            idPropertyNames = ((Entity)EntityBase).GetIdPropertyNames();
                        }
                        string stateIdPropertiesAsArgumentString = idPropertyNames.Map(pName => String.Format("state.get{0}()", pName)).ConcatWithSeparator(", ");
                        var eventIdProperties = EntityBase.GetEventIdValueObject().Properties.Values.SkipLastProperty().ToList();
                        // version is null??? default value of EntityBase.GetReservedPropertyVersionType()???

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    public ");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("() {\n        ");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" eventId = new ");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateIdPropertiesAsArgumentString));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetNameForState()));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State.VERSION_NULL);\n        return eventId;\n    }\n\n    public void set");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" eventId) {\n");

//line default
//line hidden


//line 239 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"


                        for (int i = 0; i < eventIdProperties.Count; i++)
                        {

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("        this.state.set");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idPropertyNames[i]));

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(eventId.get");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdProperties[i].Name));

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("());\n");

//line default
//line hidden


//line 245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    }\n\n");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    var eventIdEntityIdPropertyName = (EntityBase is Aggregate) ? EntityBase.Id.Name : ((Entity)EntityBase).GetGlobalIdPropertyLocalIdName();
                    //bool needLocalIdDto = false;
                    //if (EntityBase.FindValueObject(EntityBase.Id.Type) != null)
                    //{
                    //needLocalIdDto = true;
                    //}

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" get");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("() {\n        return get");

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("().get");

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdEntityIdPropertyName));

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("();\n    }\n\n    public void set");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.JavaType()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.CamelCaseName()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(") {\n        get");

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("().set");

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdEntityIdPropertyName));

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.CamelCaseName()));

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(");\n    }\n\n    private boolean ");

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(BoundedContext.GetEventReadOnlyPropertyName())));

//line default
//line hidden


//line 271 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(";\n\n    public boolean get");

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("() { return this.");

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(BoundedContext.GetEventReadOnlyPropertyName())));

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("; }\n\n    public void set");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(boolean readOnly) { this.");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(BoundedContext.GetEventReadOnlyPropertyName())));

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" = readOnly; }\n\n");

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    if (EntityBase is Aggregate)
                    {
                        Aggregate aggregate = (Aggregate)EntityBase;
                        var aggregateVersionProperty = aggregate.Properties[aggregate.ReservedProperties.Version];

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    public ");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("() {\n        return get");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("();\n    }\n    \n    public void set");

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.CamelCaseName()));

//line default
//line hidden


//line 287 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(") {\n        get");

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().set");

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.Name));

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.CamelCaseName()));

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(");\n    }\n\n");

//line default
//line hidden


//line 291 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    } //end if (EntityBase is Aggregate)

                } //if (!this.IsInSubtype)

                //if (EntityBase is Entity)
                //{
                //var entity = EntityBase as Entity;
                //foreach (var p in entity.GetTransientOuterIdProperties())
                //{
                //properties.Add(p);
                //}
                //}

                if (!this.IsInSubtype)
                {
                    var reservedProps = new List<Property>();
                    reservedProps.Add(EntityBase.Properties[EntityBase.ReservedProperties.CreatedBy]);
                    reservedProps.Add(EntityBase.Properties[EntityBase.ReservedProperties.CreatedAt]);
                    foreach (var p in reservedProps)
                    {

//line default
//line hidden


//line 313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                        if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("    private ");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(";\n\n    public ");

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" get");

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("()\n    {\n        return this.");

//line default
//line hidden


//line 323 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 323 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(")\n    {\n        this.");

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(";\n    }\n\n");

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            ////////////////
                        }
                        else
                        {
                            ////////////////

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("    public ");

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" get");

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("()\n    {\n        return this.state.get");

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 338 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("();\n    }\n\n    public void set");

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(")\n    {\n        this.state.set");

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(");\n    }\n\n");

//line default
//line hidden


//line 346 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            ////////////////
                        } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 351 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"


                    }

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("\n    private String ");

//line default
//line hidden


//line 362 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 362 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n\n    public String get");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("() {\n        return ");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(String commandId) {\n        this.");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" = commandId;\n    }\n\n");

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        // //////////////////////////////////////////////////////
                        if (EntityBase.GetGeneratingClobEventProperties())
                        {

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("    private String ");

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(";\n\n    public String get");

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandTypeDiscriminatorName()));

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("() {\n        return ");

//line default
//line hidden


//line 380 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 380 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 383 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandTypeDiscriminatorName()));

//line default
//line hidden


//line 383 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(String commandType) {\n        this.");

//line default
//line hidden


//line 384 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 384 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" = commandType;\n    }\n\n");

//line default
//line hidden


//line 387 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }
                        // //////////////////////////////////////////////////////

//line default
//line hidden


//line 391 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    }
                    else
                    {
                        ////////////////

//line default
//line hidden


//line 396 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("\n    public String get");

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("() {\n        return this.state.get");

//line default
//line hidden


//line 398 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 398 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("();\n    }\n\n    public void set");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(String commandId) {\n        this.state.set");

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPascalCaseName(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(commandId);\n    }\n\n");

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("    protected Abstract");

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("Event() {\n");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////
                    // do nothing
                    ////////////////
                }
                else
                {
                    ////////////////

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        this(new Abstract");

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State.Simple");

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State());\n");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("    }\n\n    protected Abstract");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("Event(");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(" eventId) {\n");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                if (!this.IsInSubtype)
                {

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        this.");

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPrivateFieldName()));

//line default
//line hidden


//line 443 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" = eventId;\n");

//line default
//line hidden


//line 444 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    }
                    else
                    {
                        ////////////////

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        this(new Abstract");

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State.Simple");

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State());\n        set");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(eventId);\n");

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 456 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 459 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        super(eventId);\n");

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("    }\n\n");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////
                    // do nothing
                    ////////////////
                }
                else
                {
                    ////////////////

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    protected Abstract");

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event(");

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State s) {\n        if (s == null) { throw new IllegalArgumentException(); }\n     " +
                    "   this.state = (");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State.Mutable");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State)s;\n    }\n\n");

//line default
//line hidden


//line 480 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {

                    if (!e.IsNoEventSourcing())
                    {

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao get");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao() {\n        return (");

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao)ApplicationContext.current.get(\"");

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(e.GetNameForEvent())));

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao\");\n    }\n\n");

//line default
//line hidden


//line 496 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    protected ");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" new");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(")\n    {\n");

//line default
//line hidden


//line 501 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    var eventIdPropertiesAsArgumentString = EntityBase.GetEventIdValueObject().Properties.Values.SkipLastProperty()
                            .Map(p => String.Format("this.get{0}().get{1}()", EntityBase.GetEventIdPropertyName(), p.Name)).ConcatWithSeparator(", ");

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" eventId = new ");

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventIdPropertiesAsArgumentString));

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(", \n            ");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(", \n            this.get");

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("().get");

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObject().Properties.Values.GetLastProperty().Name));

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("());\n        return eventId;\n    }\n\n    protected void throwOnInconsistentEventId" +
                    "s(");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event.Sql");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event e)\n    {\n        throwOnInconsistentEventIds(this, e);\n    }\n\n    public st" +
                    "atic void throwOnInconsistentEventIds(");

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event.Sql");

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event oe, ");

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event.Sql");

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 516 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event e)\n    {\n");

//line default
//line hidden


//line 518 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    var outerIdVO = BoundedContext.GetAllNestedValueObjects()[EntityBase.GetEventIdValueObjectName()];
                    var outerIdPropertyNames = outerIdVO.GetPropertyNameList();
                    var innerIdVO = BoundedContext.GetAllNestedValueObjects()[e.GetEventIdValueObjectName()];
                    var innerIdPropertyNames = innerIdVO.GetPropertyNameList();
                    for (int i = 0; i < outerIdPropertyNames.Count - 1; i++)
                    {

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        if (!oe.get");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerIdPropertyNames[i]));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().equals(e.get");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerIdPropertyNames[i]));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("()))\n        { \n            throw DomainError.named(\"inconsistentEventIds\", \"Oute" +
                        "r Id ");

//line default
//line hidden


//line 528 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerIdPropertyNames[i]));

//line default
//line hidden


//line 528 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" %1$s but inner id ");

//line default
//line hidden


//line 528 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerIdPropertyNames[i]));

//line default
//line hidden


//line 528 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" %2$s\", \n                oe.get");

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerIdPropertyNames[i]));

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(), e.get");

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerIdPropertyNames[i]));

//line default
//line hidden


//line 529 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("());\n        }\n");

//line default
//line hidden


//line 531 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

//line default
//line hidden


//line 534 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    }\n\n");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"


                }


//line default
//line hidden


//line 541 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {

                    var intfPrefix = e.GetNameForEvent() + "Event.";
                    var classPrefix = "Abstract" + e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated new");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated(");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(") {\n        return new ");

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(classPrefix));

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Simple");

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated(new");

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 549 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("));\n    }\n\n");

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!e.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    public ");

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched new");

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched(");

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(") {\n        return new ");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(classPrefix));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Simple");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched(new");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("));\n    }\n\n");

//line default
//line hidden


//line 562 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!e.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("    public ");

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("StateRemoved new");

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("StateRemoved(");

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Id.JavaType()));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(") {\n        return new ");

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(classPrefix));

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Simple");

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("StateRemoved(new");

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(e.Id.Name)));

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("));\n    }\n\n");

//line default
//line hidden


//line 572 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            // /////////////////////////////////////////////////////
                        }
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } // end if (!e.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 582 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

                if (!this.IsInSubtype)
                {

//line default
//line hidden


//line 588 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("\n    public abstract String getEventType();\n\n");

//line default
//line hidden


//line 591 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

//line default
//line hidden


//line 594 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                // //////////////////////////////////////////////////////
                if (EntityBase.GetGeneratingClobEventProperties())
                {

//line default
//line hidden


//line 599 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    public static class ");

//line default
//line hidden


//line 599 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 599 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("ClobEvent extends  Abstract");

//line default
//line hidden


//line 599 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 599 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(@"Event {

        protected Map<String, Object> getLobProperties() {
            return lobProperties;
        }

        protected void setLobProperties(Map<String, Object> lobProperties) {
            if (lobProperties == null) {
                throw new IllegalArgumentException(""lobProperties is null."");
            }
            this.lobProperties = lobProperties;
        }

        private Map<String, Object> lobProperties = new HashMap<>();

        protected String getLobText() {
            return ApplicationContext.current.getClobConverter().toString(getLobProperties());
        }

        protected void setLobText(String text) {
            getLobProperties().clear();
            Map<String, Object> ps = ApplicationContext.current.getClobConverter().parseLobProperties(text);
            if (ps != null) {
                for (Map.Entry<String, Object> kv : ps.entrySet()) {
                    getLobProperties().put(kv.getKey(), kv.getValue());
                }
            }
        }

        @Override
        public String getEventType() {
            return """);

//line default
//line hidden


//line 630 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 630 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("ClobEvent\";\n        }\n\n    }\n\n");

//line default
//line hidden


//line 635 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    // //////////////////////////////////////////////////////
                } //end if 


//line default
//line hidden


//line 640 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                if (EntityBase is Aggregate)
                {

                    // ///////////////////////////////////
                    foreach (var m in (EntityBase as Aggregate).GetJavaMutationLogicMethods())
                    {

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    public static class ");

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" extends ");

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("ClobEvent {\n\n        @Override\n        public String getEventType() {\n           " +
                        " return \"");

//line default
//line hidden


//line 652 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 652 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("\";\n        }\n\n");

//line default
//line hidden


//line 655 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        foreach (var p in m.GetEventPropertiesExcludingAggregateIdAndVersionAndCommandIdAndRequesterId())
                        {
                            var camelCasePN = BoundedContext.GetCamelCaseName(p.Name);
                            // todo Is this Cast OK???

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("        public ");

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" get");

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("() {\n            Object val = getLobProperties().get(\"");

//line default
//line hidden


//line 662 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 662 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("\");\n            if (val instanceof ");

//line default
//line hidden


//line 663 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 663 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(") {\n                return (");

//line default
//line hidden


//line 664 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 664 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(") val;\n            }\n            return ApplicationContext.current.getTypeConvert" +
                            "er().convertValue(val, ");

//line default
//line hidden


//line 666 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 666 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(".class);\n        }\n\n        public void set");

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 669 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" value) {\n            getLobProperties().put(\"");

//line default
//line hidden


//line 670 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 670 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("\", value);\n        }\n\n");

//line default
//line hidden


//line 673 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }

//line default
//line hidden


//line 676 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    }\n\n");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }
                    // ///////////////////////////////////

                }


//line default
//line hidden


//line 685 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("\n    public static abstract class Abstract");

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateEvent extends ");

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.StateEventBaseClassName));

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(" implements ");

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("Event.");

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 686 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateEvent {\n");

//line default
//line hidden


//line 687 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                foreach (Property p in this.ValueObjectProperties)
                {
                    if (p.IsDerived) { continue; }

//line default
//line hidden


//line 692 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 698 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        private ");

//line default
//line hidden


//line 698 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 698 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 698 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 698 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n\n        public ");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("()\n        {\n            return this.");

//line default
//line hidden


//line 702 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 702 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 705 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 705 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 705 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 705 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 705 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 705 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(")\n        {\n            this.");

//line default
//line hidden


//line 707 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 707 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 707 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 707 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 710 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    }
                    else
                    {
                        ////////////////

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        public ");

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("()\n        {\n            return this.get");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State().get");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("();\n        }\n\n        public void set");

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(")\n        {\n            this.get");

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State().set");

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 722 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(");\n        }\n\n");

//line default
//line hidden


//line 725 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 730 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

//line default
//line hidden


//line 733 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                foreach (Property p in this.ValueObjectCollectionProperties)
                {

//line default
//line hidden


//line 737 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 743 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        private ");

//line default
//line hidden


//line 743 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 743 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 743 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 743 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n\n        public ");

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("()\n        {\n            return this.");

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(")\n        {\n            this.");

//line default
//line hidden


//line 752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    }
                    else
                    {
                        ////////////////

//line default
//line hidden


//line 760 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        public ");

//line default
//line hidden


//line 760 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 760 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 760 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 760 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("()\n        {\n            return this.get");

//line default
//line hidden


//line 762 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 762 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State().get");

//line default
//line hidden


//line 762 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 762 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("();\n        }\n\n        public void set");

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetValueObjectCollectionPropertyType()));

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(")\n        {\n            this.get");

//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State().set");

//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 767 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(");\n        }\n\n");

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }


//line default
//line hidden


//line 779 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("        protected Abstract");

//line default
//line hidden


//line 779 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 779 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateEvent(");

//line default
//line hidden


//line 779 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 779 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(" eventId) {\n            super(eventId);\n        }\n");

//line default
//line hidden


//line 782 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////
                    // do nothing
                    ////////////////
                }
                else
                {
                    ////////////////

//line default
//line hidden


//line 792 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("\n        public Abstract");

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateEvent(");

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 793 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State s) {\n            super(s);\n        }\n");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 801 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("    }\n\n    public static abstract class Abstract");

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateCreated extends Abstract");

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateEvent implements ");

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("Event.");

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateCreated");

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsEntityBaseSaveable ? ", Saveable" : ""));

//line default
//line hidden


//line 803 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("\n    {\n        public Abstract");

//line default
//line hidden


//line 805 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 805 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateCreated() {\n            this(new ");

//line default
//line hidden


//line 806 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 806 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("());\n        }\n\n        public Abstract");

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("StateCreated(");

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write(" eventId) {\n            super(eventId);\n        }\n\n");

//line default
//line hidden


//line 813 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////
                    // do nothing
                    ////////////////
                }
                else
                {
                    ////////////////

//line default
//line hidden


//line 823 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        public Abstract");

//line default
//line hidden


//line 823 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 823 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated(");

//line default
//line hidden


//line 823 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 823 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("State s) {\n            super(s);\n        }\n\n");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("        public String getEventType() {\n            return StateEventType.CREATED;" +
                "\n        }\n\n");

//line default
//line hidden


//line 836 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                foreach (Entity e in this.InnerEntities)
                {

                    var intfPrefix = e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        private Map<");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated> ");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" = new HashMap<");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 842 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated>();\n        \n        private Iterable<");

//line default
//line hidden


//line 844 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 844 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 844 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated> readOnly");

//line default
//line hidden


//line 844 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 844 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Events;\n\n        public Iterable<");

//line default
//line hidden


//line 846 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 846 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 846 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated> get");

//line default
//line hidden


//line 846 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 846 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Events()\n        {\n");

//line default
//line hidden


//line 848 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    if (!e.IsNoEventSourcing())
                    {

//line default
//line hidden


//line 852 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("            if (!get");

//line default
//line hidden


//line 852 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 852 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("())\n            {\n                return this.");

//line default
//line hidden


//line 854 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 854 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(".values();\n            }\n            else\n            {\n                if (readO" +
                        "nly");

//line default
//line hidden


//line 858 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 858 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events != null) { return readOnly");

//line default
//line hidden


//line 858 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 858 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events; }\n                ");

//line default
//line hidden


//line 859 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 859 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao eventDao = get");

//line default
//line hidden


//line 859 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 859 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao();\n                List<");

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateCreated> eL = new ArrayList<");

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 860 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateCreated>();\n                for (");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event e : eventDao.findBy");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(this.get");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("()))\n                {\n                    ((");

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event)e).set");

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 863 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(true);\n                    eL.add((");

//line default
//line hidden


//line 864 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 864 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 864 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateCreated)e);\n                }\n                return (readOnly");

//line default
//line hidden


//line 866 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 866 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events = eL);\n            }\n");

//line default
//line hidden


//line 868 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("            return this.");

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(".values();\n");

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

//line default
//line hidden


//line 877 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        }\n\n        public void set");

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Events(Iterable<");

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 879 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated> es)\n        {\n            if (es != null)\n            {\n           " +
                    "     for (");

//line default
//line hidden


//line 883 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 883 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 883 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated e : es)\n                {\n                    add");

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event(e);\n                }\n            }\n            else { this.");

//line default
//line hidden


//line 888 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 888 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(".clear(); }\n        }\n        \n        public void add");

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event(");

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated e)\n        {\n            throwOnInconsistentEventIds((");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event.Sql");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event)e);\n            this.");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(".put(((");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event.Sql");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event)e).get");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("(), e);\n        }\n\n");

//line default
//line hidden


//line 897 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

//line default
//line hidden


//line 900 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                if (IsEntityBaseSaveable)
                {

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        public void save()\n        {\n");

//line default
//line hidden


//line 906 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    if (this.IsInSubtype)
                    {
                        //super.save();
                    }

//line default
//line hidden


//line 912 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    foreach (Entity e in this.InnerEntities)
                    {

                        var intfPrefix = e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("            for (");

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateCreated e : this.get");

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events()) {\n                get");

//line default
//line hidden


//line 919 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 919 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("EventDao().save(e);\n            }\n");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

//line default
//line hidden


//line 924 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("        }\n");

//line default
//line hidden


//line 925 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                }

//line default
//line hidden


//line 928 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("    }\n\n\n");

//line default
//line hidden


//line 931 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    public static abstract class Abstract");

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateMergePatched extends Abstract");

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateEvent implements ");

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateMergePatched");

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsEntityBaseSaveable ? ", Saveable" : ""));

//line default
//line hidden


//line 937 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("\n    {\n        public Abstract");

//line default
//line hidden


//line 939 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 939 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateMergePatched() {\n            this(new ");

//line default
//line hidden


//line 940 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 940 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("());\n        }\n\n        public Abstract");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateMergePatched(");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" eventId) {\n            super(eventId);\n        }\n\n        public String getEvent" +
                    "Type() {\n            return StateEventType.MERGE_PATCHED;\n        }\n\n");

//line default
//line hidden


//line 951 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    if (EntityBase.GetPersistingStateEventRemovedPropertiesAsSet())
                    {

//line default
//line hidden


//line 955 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(@"        private Set<String> removedPropertyNames = new HashSet<String>();

        public Set<String> getRemovedPropertyNames() { return this.removedPropertyNames; }

        public void setRemovedPropertyNames(Set<String> removedPropertyNames) { this.removedPropertyNames = removedPropertyNames; }

");

//line default
//line hidden


//line 961 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

                    foreach (Property p in this.RemovableProperties)
                    {
                        if (p.IsDerived) { continue; }
                        if (EntityBase.GetPersistingStateEventRemovedPropertiesAsSet())
                        {

//line default
//line hidden


//line 970 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("        public Boolean getIsProperty");

//line default
//line hidden


//line 970 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 970 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed() {\n            return removedPropertyNames.contains(\"");

//line default
//line hidden


//line 971 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 971 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("\"); \n        }\n\n        public void setIsProperty");

//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 974 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed(Boolean removed) {\n            if (removed != null && removed) { removedP" +
                            "ropertyNames.add(\"");

//line default
//line hidden


//line 975 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 975 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("\"); } else { removedPropertyNames.remove(\"");

//line default
//line hidden


//line 975 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 975 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("\"); } \n        }\n\n");

//line default
//line hidden


//line 978 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 981 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("        private Boolean isProperty");

//line default
//line hidden


//line 981 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 981 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed;\n\n        public Boolean getIsProperty");

//line default
//line hidden


//line 983 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 983 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed() {\n            return this.isProperty");

//line default
//line hidden


//line 984 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 984 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed;\n        }\n\n        public void setIsProperty");

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 987 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed(Boolean removed) {\n            this.isProperty");

//line default
//line hidden


//line 988 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 988 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Removed = removed;\n        }\n\n");

//line default
//line hidden


//line 991 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }

                    }

//line default
//line hidden


//line 996 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("\n");

//line default
//line hidden


//line 997 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    foreach (Entity e in this.InnerEntities)
                    {

                        var intfPrefix = String.Empty;//e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        private Map<");

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event> ");

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" = new HashMap<");

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1003 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event>();\n        \n        private Iterable<");

//line default
//line hidden


//line 1005 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1005 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1005 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event> readOnly");

//line default
//line hidden


//line 1005 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1005 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events;\n\n        public Iterable<");

//line default
//line hidden


//line 1007 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1007 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1007 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event> get");

//line default
//line hidden


//line 1007 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1007 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events()\n        {\n");

//line default
//line hidden


//line 1009 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        if (!e.IsNoEventSourcing())
                        {

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("            if (!get");

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 1013 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("())\n            {\n                return this.");

//line default
//line hidden


//line 1015 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1015 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(".values();\n            }\n            else\n            {\n                if (readO" +
                            "nly");

//line default
//line hidden


//line 1019 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1019 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Events != null) { return readOnly");

//line default
//line hidden


//line 1019 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1019 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Events; }\n                ");

//line default
//line hidden


//line 1020 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1020 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("EventDao eventDao = get");

//line default
//line hidden


//line 1020 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1020 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("EventDao();\n                List<");

//line default
//line hidden


//line 1021 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1021 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1021 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event> eL = new ArrayList<");

//line default
//line hidden


//line 1021 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1021 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1021 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event>();\n                for (");

//line default
//line hidden


//line 1022 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1022 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event e : eventDao.findBy");

//line default
//line hidden


//line 1022 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1022 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(this.get");

//line default
//line hidden


//line 1022 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1022 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("()))\n                {\n                    ((");

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event.Sql");

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event)e).set");

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 1024 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(true);\n                    eL.add((");

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event)e);\n                }\n                return (readOnly");

//line default
//line hidden


//line 1027 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1027 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Events = eL);\n            }\n");

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 1034 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("            return this.");

//line default
//line hidden


//line 1034 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1034 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(".values();\n");

//line default
//line hidden


//line 1035 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }

//line default
//line hidden


//line 1038 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        }\n\n        public void set");

//line default
//line hidden


//line 1040 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1040 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Events(Iterable<");

//line default
//line hidden


//line 1040 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1040 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1040 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event> es)\n        {\n            if (es != null)\n            {\n                fo" +
                        "r (");

//line default
//line hidden


//line 1044 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1044 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1044 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event e : es)\n                {\n                    add");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event(e);\n                }\n            }\n            else { this.");

//line default
//line hidden


//line 1049 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1049 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(".clear(); }\n        }\n        \n        public void add");

//line default
//line hidden


//line 1052 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1052 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event(");

//line default
//line hidden


//line 1052 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1052 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1052 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event e)\n        {\n            throwOnInconsistentEventIds((");

//line default
//line hidden


//line 1054 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1054 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 1054 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1054 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event)e);\n            this.");

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(".put(((");

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event)e).get");

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 1055 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(), e);\n        }\n\n");

//line default
//line hidden


//line 1058 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        //intfPrefix = e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

//line default
//line hidden


//line 1064 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    if (IsEntityBaseSaveable)
                    {

//line default
//line hidden


//line 1068 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        public void save()\n        {\n");

//line default
//line hidden


//line 1070 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        if (this.IsInSubtype)
                        {
                            //super.save();
                        }

//line default
//line hidden


//line 1076 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        foreach (Entity e in this.InnerEntities)
                        {

                            var intfPrefix = String.Empty;//e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("            for (");

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Event e : this.get");

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Events()) {\n                get");

//line default
//line hidden


//line 1083 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1083 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("EventDao().save(e);\n            }\n");

//line default
//line hidden


//line 1085 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }

//line default
//line hidden


//line 1088 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("        }\n");

//line default
//line hidden


//line 1089 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    }

//line default
//line hidden


//line 1092 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    }\n\n\n");

//line default
//line hidden


//line 1095 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!EntityBase.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

                        string namedDeletedOrRemoved;
                        if (EntityBase is Aggregate)
                        {
                            namedDeletedOrRemoved = "Deleted";
                        }
                        else
                        {
                            namedDeletedOrRemoved = "Removed";
                        }

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    public static abstract class Abstract");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" extends Abstract");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateEvent implements ");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State");

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(IsEntityBaseSaveable ? ", Saveable" : ""));

//line default
//line hidden


//line 1109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("\n    {\n        public Abstract");

//line default
//line hidden


//line 1111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State");

//line default
//line hidden


//line 1111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 1111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("() {\n            this(new ");

//line default
//line hidden


//line 1112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("());\n        }\n\n        public Abstract");

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State");

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved));

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" eventId) {\n            super(eventId);\n        }\n\n        public String getEvent" +
                        "Type() {\n            return StateEventType.");

//line default
//line hidden


//line 1120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeletedOrRemoved.ToUpperInvariant()));

//line default
//line hidden


//line 1120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 1123 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        foreach (Entity e in this.InnerEntities)
                        {

                            var intfPrefix = e.GetNameForEvent() + "Event.";
                            if (!e.Immutable && !e.ReservedProperties.NoDeleted)
                            {

//line default
//line hidden


//line 1131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("\t\t\n        private Map<");

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(", ");

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved> ");

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(" = new HashMap<");

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(", ");

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1132 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved>();\n        \n        private Iterable<");

//line default
//line hidden


//line 1134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved> readOnly");

//line default
//line hidden


//line 1134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Events;\n\n        public Iterable<");

//line default
//line hidden


//line 1136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved> get");

//line default
//line hidden


//line 1136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Events()\n        {\n");

//line default
//line hidden


//line 1138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                if (!e.IsNoEventSourcing())
                                {

//line default
//line hidden


//line 1142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("            if (!get");

//line default
//line hidden


//line 1142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 1142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("())\n            {\n                return this.");

//line default
//line hidden


//line 1144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(".values();\n            }\n            else\n            {\n                if (readO" +
                                    "nly");

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Events != null) { return readOnly");

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Events; }\n                ");

//line default
//line hidden


//line 1149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("EventDao eventDao = get");

//line default
//line hidden


//line 1149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1149 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("EventDao();\n                List<");

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("StateRemoved> eL = new ArrayList<");

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("StateRemoved>();\n                for (");

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Event e : eventDao.findBy");

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("(this.get");

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetEventIdPropertyName()));

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("()))\n                {\n                    ((");

//line default
//line hidden


//line 1153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Event.Sql");

//line default
//line hidden


//line 1153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Event)e).set");

//line default
//line hidden


//line 1153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 1153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("(true);\n                    eL.add((");

//line default
//line hidden


//line 1154 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1154 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1154 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("StateRemoved)e);\n                }\n                return (readOnly");

//line default
//line hidden


//line 1156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Events = eL);\n            }\n");

//line default
//line hidden


//line 1158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                }
                                else
                                {

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("            return this.");

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(".values();\n");

//line default
//line hidden


//line 1164 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                }

//line default
//line hidden


//line 1167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("        }\n\n        public void set");

//line default
//line hidden


//line 1169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Events(Iterable<");

//line default
//line hidden


//line 1169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved> es)\n        {\n            if (es != null)\n            {\n           " +
                                "     for (");

//line default
//line hidden


//line 1173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved e : es)\n                {\n                    add");

//line default
//line hidden


//line 1175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Event(e);\n                }\n            }\n            else { this.");

//line default
//line hidden


//line 1178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(".clear(); }\n        }\n        \n        public void add");

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Event(");

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("StateRemoved e)\n        {\n            throwOnInconsistentEventIds((");

//line default
//line hidden


//line 1183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Event.Sql");

//line default
//line hidden


//line 1183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Event)e);\n            this.");

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(e.GetNameForEvent() + "Events")));

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(".put(((");

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Event.Sql");

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("Event)e).get");

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdPropertyName()));

//line default
//line hidden


//line 1184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                this.Write("(), e);\n        }\n\n");

//line default
//line hidden


//line 1187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 1191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        if (IsEntityBaseSaveable)
                        {

//line default
//line hidden


//line 1195 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("        public void save()\n        {\n");

//line default
//line hidden


//line 1197 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            if (this.IsInSubtype)
                            {
                                //super.save();
                            }

//line default
//line hidden


//line 1203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            foreach (Entity e in this.InnerEntities)
                            {
                                if (!e.Immutable && !e.ReservedProperties.NoDeleted)
                                {
                                    var intfPrefix = e.GetNameForEvent() + "Event.";

//line default
//line hidden


//line 1210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("            for (");

//line default
//line hidden


//line 1210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(intfPrefix));

//line default
//line hidden


//line 1210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("StateRemoved e : this.get");

//line default
//line hidden


//line 1210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("Events()) {\n                get");

//line default
//line hidden


//line 1211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForEvent()));

//line default
//line hidden


//line 1211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                    this.Write("EventDao().save(e);\n            }\n");

//line default
//line hidden


//line 1213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 1217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("        }\n");

//line default
//line hidden


//line 1218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        }

//line default
//line hidden


//line 1221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    }\n");

//line default
//line hidden


//line 1222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!EntityBase.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } // end if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 1231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 1232 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                if (!this.IsAbstract)
                {
                    // /////////////////////////////  foreach (Entity e in EntityBase.Entities.Values) {
                    var superClassPrefix = String.Empty;    //"Abstract" + e.GetNameForEvent() + "Event.";
                    var e = EntityBase;                     // //////////////////////////////////
                                                            // /////////////////////////////        // ...
                    string eDeletedOrRemoved = (EntityBase is Aggregate) ? "Deleted" : "Removed";

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    public static class Simple");

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated extends ");

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(superClassPrefix));

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("Abstract");

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated\n    {\n        public Simple");

//line default
//line hidden


//line 1243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1243 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated() {\n        }\n\n        public Simple");

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("StateCreated(");

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write(" eventId) {\n            super(eventId);\n        }\n");

//line default
//line hidden


//line 1249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////
                        // do nothing
                        ////////////////
                    }
                    else
                    {
                        ////////////////

//line default
//line hidden


//line 1259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("\n        public Simple");

//line default
//line hidden


//line 1260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateCreated(");

//line default
//line hidden


//line 1260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForEvent()));

//line default
//line hidden


//line 1260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("State s) {\n            super(s);\n        }\n");

//line default
//line hidden


//line 1263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 1268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    this.Write("    }\n\n");

//line default
//line hidden


//line 1270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("    public static class Simple");

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched extends ");

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(superClassPrefix));

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("Abstract");

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched\n    {\n        public Simple");

//line default
//line hidden


//line 1278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched() {\n        }\n\n        public Simple");

//line default
//line hidden


//line 1281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write("StateMergePatched(");

//line default
//line hidden


//line 1281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        this.Write(" eventId) {\n            super(eventId);\n        }\n    }\n\n");

//line default
//line hidden


//line 1286 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!e.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("    public static class Simple");

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eDeletedOrRemoved));

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" extends ");

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(superClassPrefix));

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("Abstract");

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eDeletedOrRemoved));

//line default
//line hidden


//line 1292 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("\n    {\n        public Simple");

//line default
//line hidden


//line 1294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 1294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eDeletedOrRemoved));

//line default
//line hidden


//line 1294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("() {\n        }\n\n        public Simple");

//line default
//line hidden


//line 1297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(this.TypeName));

//line default
//line hidden


//line 1297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 1297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eDeletedOrRemoved));

//line default
//line hidden


//line 1297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 1297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            this.Write(" eventId) {\n            super(eventId);\n        }\n    }\n\n");

//line default
//line hidden


//line 1302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                            // /////////////////////////////////////////////////////
                        } // end if (!e.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////

                        ////////////////
                    } // end if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

                    //}
                }

//line default
//line hidden


//line 1314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                this.Write("}\n\n");

//line default
//line hidden


//line 1316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractEventTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractEventTemplate.tt"


        public class AggregateAbstractEventTemplate : EntityBaseAbstractEventTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateAbstractEventTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }


//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractEventTemplate.tt"


        public class EntityAbstractEventTemplate : EntityBaseAbstractEventTemplate
        {

            Entity Entity { get; set; }

            public EntityAbstractEventTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }


//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"


        public class EntityEventDaoInterfaceTemplate : CSharpTemplate
        {

            Entity Entity { get; set; }

            BoundedContext BoundedContext { get { return Entity.Aggregate.BoundedContext; } }

            public EntityEventDaoInterfaceTemplate(Entity entity)
            {
                this.Entity = entity;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Entity.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(";\n\n");

//line default
//line hidden


//line 28 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("\npublic interface ");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("EventDao");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.GetGenericTypeParametersString()));

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("\n{\n    void save(");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("Event e);\n\n");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                var outerEntityEventIdParameterName = BoundedContext.GetParameterOrArgumentName(Entity.OuterEntity.GetEventIdValueObjectName());

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("    Iterable<");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.Name));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("Event> findBy");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.OuterEntity.GetEventIdValueObjectName()));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Entity.OuterEntity.GetEventIdValueObjectName()));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(" ");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntityEventIdParameterName));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                this.Write(");\n\n}\n\n");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDaoInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"


        public class EntityBaseCommandInterfaceTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public EntityBaseCommandInterfaceTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", "");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(".Command;\nimport ");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(".DomainError;\n\npublic interface ");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("Command extends Command\n{\n");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                var abstractCmdProperties = new NamedValueDictionary<Property>();
                abstractCmdProperties.Add(EntityBase.Id.Name, EntityBase.Id);


//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    var aggregate = ((Aggregate)EntityBase);
                    abstractCmdProperties.Add(aggregate.ReservedProperties.Version, aggregate.Properties[aggregate.ReservedProperties.Version]);
                }

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                if (EntityBase is Entity)
                {
                    var entity = EntityBase as Entity;
                    foreach (var p in entity.GetTransientOuterIdProperties())
                    {
                        //abstractCmdProperties.Add(p.Name, p);
                    }
                }

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                foreach (Property i in abstractCmdProperties.Values)
                {
                    var p = i;
                    if (EntityBase.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("    ");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n    void set");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("    ");

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n    void set");

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                }

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    var Aggregate = (Aggregate)EntityBase;
                    var reservedPropertyVersion = Aggregate.Properties[Aggregate.ReservedProperties.Version];
                    var reservedPropertyDeleted = Aggregate.Properties[Aggregate.ReservedProperties.Deleted];

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("    static void throwOnInvalidStateTransition(");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("State state, Command c) {\n        if (state.get");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.PascalCaseName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("() == null) {\n            if (isCommandCreate((");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("Command)c)) {\n                return;\n            }\n            throw DomainError" +
                    ".named(\"premature\", \"Can\'t do anything to unexistent aggregate\");\n        }\n");

//line default
//line hidden


//line 101 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!(Aggregate.ReservedProperties.NoDeleted || Aggregate.Immutable))
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        if (state.get");

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyDeleted.PascalCaseName()));

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("() != null && state.get");

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyDeleted.PascalCaseName()));

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("()) {\n            throw DomainError.named(\"zombie\", \"Can\'t do anything to deleted" +
                        " aggregate.\");\n        }\n");

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    // ///////////////////////////////////////////////////////
                    if (!Aggregate.DetectingDuplicateCommandIdEnabled)
                    {

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        if (isCommandCreate((");

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command)c))\n            throw DomainError.named(\"rebirth\", \"Can\'t create aggregat" +
                        "e that already exists\");\n");

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    } //if (!Aggregate.DetectingDuplicateCommandIdEnabled)
                      // ///////////////////////////////////////////////////////

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("    }\n\n    static boolean isCommandCreate(");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("Command c) {\n        if ((c instanceof ");

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("Command.Create");

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(") \n            && (COMMAND_TYPE_CREATE.equals(c.get");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("()) || c.get");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.PascalCaseName()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("().equals(");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("State.VERSION_NULL)))\n            return true;\n");

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!Aggregate.Immutable)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        if ((c instanceof ");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command.MergePatch");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("))\n            return false;\n");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if
                      // /////////////////////////////////////////////////////

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!(Aggregate.ReservedProperties.NoDeleted || Aggregate.Immutable))
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        if ((c instanceof ");

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("))\n            return false;\n");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("        if (c.get");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.PascalCaseName()));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("().equals(");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("State.VERSION_NULL))\n            return true;\n        return false;\n    }\n\n");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("    interface CreateOrMergePatch");

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(" extends ");

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("Command\n    {\n");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                var basicProperties = new NamedValueDictionary<Property>();

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsCollectionProperty) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                    {
                        basicProperties.Add(p.Name, p);
                    }
                }

                //if (EntityBase is Entity)
                //{
                //	var entity = EntityBase as Entity;
                //	//foreach (var p in entity.GetTransientOuterIdProperties())
                //	//{
                //	//	basicProperties.Add(p.Name, p);
                //	//}
                //}

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                foreach (Property i in basicProperties.Values)
                {
                    var p = i;

                    //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                    if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }

                    //if (BoundedContext.IsClrValueType(p.Type))
                    //{} else {

                    if (EntityBase.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 204 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n        void set");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 208 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n        void set");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                    //}

                }

//line default
//line hidden


//line 221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsValueObjectCollectionProperty())
                    {

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("[] get");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n        void set");

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                }

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("    }\n\n    interface Create");

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(" extends CreateOrMergePatch");

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("\n    {\n");

//line default
//line hidden


//line 239 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        //var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);


//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("        Create");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("CommandCollection getCreate");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Commands();\n\n        ");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" newCreate");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                }

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("    }\n\n");

//line default
//line hidden


//line 257 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("    interface MergePatch");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(" extends CreateOrMergePatch");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("\n    {\n");

//line default
//line hidden


//line 265 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    foreach (Property p in basicProperties.Values)
                    {
                        var cmdPairs = EntityBase.GetPropertyCommandTypeAndNamePairs(p.Name);
                        foreach (Tuple<string, string> cmdPair in cmdPairs)
                        {
                            if (cmdPair != null && cmdPair.Item2 != null)
                            {
                                var cmdType = BoundedContext.GetJavaType(cmdPair.Item1);
                                var cmdName = cmdPair.Item2;
                                var cmdCamelCaseName = BoundedContext.GetCamelCaseName(cmdName);

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(" get");

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdName));

//line default
//line hidden


//line 277 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("();\n\n        void set");

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdName));

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 279 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(");\n                \n");

//line default
//line hidden


//line 281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 286 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    foreach (Property i in EntityBase.GetSelfAndAllSubtypeProperties())
                    {
                        var p = i;
                        if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                        if (p.IsAccountBalanceProperty()) { continue; }
                        //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                        if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }
                        if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                        {

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("        Boolean getIsProperty");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("Removed();\n\n        void setIsProperty");

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("Removed(Boolean removed);\n\n");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("\n");

//line default
//line hidden


//line 306 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("CommandCollection get");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("Commands();\n\n        ");

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(" newCreate");

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            this.Write("();\n\n");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            if (!e.Immutable)
                            {

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("Command.MergePatch");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(" newMergePatch");

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("();\n\n        ");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("Command.Remove");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(" newRemove");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                                this.Write("();\n\n");

//line default
//line hidden


//line 324 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 329 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("    }\n\n");

//line default
//line hidden


//line 331 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    var namedDeleteOrRemove = (EntityBase is Aggregate) ? "Delete" : "Remove";

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("\tinterface ");

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(" extends ");

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("Command\n\t{\n");

//line default
//line hidden


//line 336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    if (EntityBase.IsPolymorphic() || EntityBase.Subtypes != null && EntityBase.Subtypes.Count > 0)
                    {
                        var p = EntityBase.DiscriminatorProperty;

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("\n        ");

//line default
//line hidden


//line 342 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 342 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 342 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 342 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("();\n\n        void set");

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(");\n");

//line default
//line hidden


//line 345 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 348 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    this.Write("\t}\n\n");

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("    interface Create");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("CommandCollection extends Iterable<");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(">\n    {\n        void add(");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" c);\n\n        void remove(");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(" c);\n\n        void clear();\n    }\n\n    interface ");

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("CommandCollection extends Iterable<");

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command>\n    {\n        void add(");

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 372 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command c);\n\n        void remove(");

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                        this.Write("Command c);\n\n        void clear();\n    }\n\n");

//line default
//line hidden


//line 379 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                    }
                }

//line default
//line hidden


//line 383 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                this.Write("}\n\n");

//line default
//line hidden


//line 385 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCommandInterfaceTemplate.tt"


        public class AggregateCommandInterfaceTemplate : EntityBaseCommandInterfaceTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateCommandInterfaceTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityCommandInterfaceTemplate.tt"


        public class EntityCommandInterfaceTemplate : EntityBaseCommandInterfaceTemplate
        {

            Entity Entity { get; set; }

            public EntityCommandInterfaceTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"


        public class EntityBaseAbstractCommandTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public EntityBaseAbstractCommandTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var PascalCaseCommandTypeDiscriminatorName = ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName());
                var usingClassNames = EntityBase.GetUsingClassNames("State", "");

//line default
//line hidden


//line 27 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 27 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 27 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 30 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                }

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(".AbstractCommand;\n\npublic abstract class Abstract");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("Command extends AbstractCommand implements ");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("Command\n{\n");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                var abstractCmdProperties = new NamedValueDictionary<Property>();
                abstractCmdProperties.Add(EntityBase.Id.Name, EntityBase.Id);


//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    var aggregate = ((Aggregate)EntityBase);
                    abstractCmdProperties.Add(aggregate.ReservedProperties.Version, aggregate.Properties[aggregate.ReservedProperties.Version]);
                }

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                if (EntityBase is Entity)
                {
                    var entity = EntityBase as Entity;
                    foreach (var p in entity.GetTransientOuterIdProperties())
                    {
                        abstractCmdProperties.Add(p.Name, p);
                    }
                }

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 65 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                foreach (Property i in abstractCmdProperties.Values)
                {
                    var p = i;

                    //if (BoundedContext.IsClrValueType(p.Type))
                    //{

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    //} else {
                    if (EntityBase.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n\n    public ");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("()\n    {\n        return this.");

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(")\n    {\n        this.");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("    private ");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n\n    public ");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("()\n    {\n        return this.");

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n    }\n\n    public void set");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(")\n    {\n        this.");

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n    }\n\n");

//line default
//line hidden


//line 105 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                    //}
                }

//line default
//line hidden


//line 110 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n    public static abstract class AbstractCreateOrMergePatch");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(" extends Abstract");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("Command implements CreateOrMergePatch");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n    {\n");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                var basicProperties = new NamedValueDictionary<Property>();

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsCollectionProperty) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                    {
                        basicProperties.Add(p.Name, p);
                    }
                }

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                foreach (Property i in basicProperties.Values)
                {
                    var p = i;
                    //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                    if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }

                    //if (BoundedContext.IsClrValueType(p.Type))
                    //{
                    //} else {

                    if (EntityBase.FindValueObject(p.Type) != null)
                    {

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("        private ");

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n\n        public ");

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("()\n        {\n            return this.");

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(")\n        {\n            this.");

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("        private ");

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n\n        public ");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("()\n        {\n            return this.");

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(")\n        {\n            this.");

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                    //}

                }

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                foreach (Property p in EntityBase.GetSelfAndAllSubtypeProperties())
                {
                    if (p.IsValueObjectCollectionProperty())
                    {

//line default
//line hidden


//line 180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("        private ");

//line default
//line hidden


//line 180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n\n        public ");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("[] get");

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("() {\n            return this.");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("[] ");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(") {\n            this.");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                }

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("        public ");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" newCreate");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("()\n        {\n            Abstract");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.SimpleCreate");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" c = new Abstract");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.SimpleCreate");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("();\n");

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        WriteSetInnerEntityIdProperties(e, EntityBase, "c", "this");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("            return c;\n        }\n\n");

//line default
//line hidden


//line 209 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        ////////////////
                        if (!e.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("        public ");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" newMergePatch");

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 215 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("()\n        {\n            Abstract");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" c = new Abstract");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("();\n");

//line default
//line hidden


//line 218 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            WriteSetInnerEntityIdProperties(e, EntityBase, "c", "this");

//line default
//line hidden


//line 221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("            return c;\n        }\n\n        public ");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Command.Remove");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" newRemove");

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 224 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("()\n        {\n            Abstract");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Command.SimpleRemove");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" c = new Abstract");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Command.SimpleRemove");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("();\n");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            WriteSetInnerEntityIdProperties(e, EntityBase, "c", "this");

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("            return c;\n        }\n\n");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            ////////////////
                        } //if (!e.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                }

//line default
//line hidden


//line 242 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("    }\n\n    public static abstract class AbstractCreate");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(" extends AbstractCreateOrMergePatch");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(" implements Create");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n    {\n        @Override\n        public String get");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("() {\n            return COMMAND_TYPE_CREATE;\n        }\n\n");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                        var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);


//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("        private Create");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection create");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Commands = new SimpleCreate");

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 260 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection();\n\n        public Create");

//line default
//line hidden


//line 262 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 262 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection getCreate");

//line default
//line hidden


//line 262 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 262 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Commands() {\n            return this.create");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Commands;\n        }\n\n        public Create");

//line default
//line hidden


//line 266 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 266 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection get");

//line default
//line hidden


//line 266 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 266 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("() {\n            return this.create");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Commands; //");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionPropertyPrivateFieldName));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n");

//line default
//line hidden


//line 270 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                }

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("    }\n\n");

//line default
//line hidden


//line 276 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("    public static abstract class AbstractMergePatch");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(" extends AbstractCreateOrMergePatch");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(" implements MergePatch");

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 282 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("\n    {\n        @Override\n        public String get");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("() {\n            return COMMAND_TYPE_MERGE_PATCH;\n        }\n\n");

//line default
//line hidden


//line 289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    foreach (Property p in basicProperties.Values)
                    {
                        var cmdPairs = EntityBase.GetPropertyCommandTypeAndNamePairs(p.Name);
                        foreach (Tuple<string, string> cmdPair in cmdPairs)
                        {
                            if (cmdPair != null && cmdPair.Item2 != null)
                            {
                                var cmdType = BoundedContext.GetJavaType(cmdPair.Item1);
                                var cmdName = cmdPair.Item2;
                                var cmdCamelCaseName = BoundedContext.GetCamelCaseName(cmdName);

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("        private ");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(";\n \n        public ");

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" get");

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdName));

//line default
//line hidden


//line 303 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("() {\n            return this.");

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdName));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdType));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(") {\n            this.");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" = ");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCamelCaseName));

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(";\n        }\n                \n");

//line default
//line hidden


//line 311 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    foreach (Property i in EntityBase.GetSelfAndAllSubtypeProperties())
                    {
                        var p = i;
                        if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                        if (p.IsAccountBalanceProperty()) { continue; }
                        //if (!String.IsNullOrWhiteSpace(p.CommandType)){ continue; }
                        if (EntityBase.HasSelfOrSubtypePropertyCommandType(p.Name)) { continue; }

                        if (!p.IsReservedProperty || p.IsReservedPropertyActive)
                        {

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("        private Boolean isProperty");

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Removed;\n\n        public Boolean getIsProperty");

//line default
//line hidden


//line 330 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 330 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Removed()\n        {\n            return this.isProperty");

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 332 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Removed;\n        }\n\n        public void setIsProperty");

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Removed(Boolean removed)\n        {\n            this.isProperty");

//line default
//line hidden


//line 337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Removed = removed;\n        }\n\n");

//line default
//line hidden


//line 340 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("\n");

//line default
//line hidden


//line 345 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            var cmdCollectionName = BoundedContext.GetPrivateFieldName(e.GetNameForCommand() + "Commands");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("        private ");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("CommandCollection ");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCollectionName));

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" = new Simple");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("CommandCollection();\n\n        public ");

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("CommandCollection get");

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("Commands()\n        {\n            return this.");

//line default
//line hidden


//line 356 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdCollectionName));

//line default
//line hidden


//line 356 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(";\n        }\n\n");

//line default
//line hidden


//line 359 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 363 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("    }\n\n");

//line default
//line hidden


//line 365 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("    public static class SimpleCreate");

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(" extends AbstractCreate");

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 370 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n    {\n    }\n\n");

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                if (EntityBase.IsPolymorphic())
                {
                    foreach (var st in EntityBase.AllSubtypes.Values)
                    {
                        if (!st.Abstract)
                        {

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("\tpublic static class SimpleCreate");

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.Name));

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" extends SimpleCreate");

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(" {\n        public SimpleCreate");

//line default
//line hidden


//line 383 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.Name));

//line default
//line hidden


//line 383 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("() {\n            ");

//line default
//line hidden


//line 384 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.SetDiscriminatorPropertyString("super", st.Name)));

//line default
//line hidden


//line 384 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            this.Write("\n        }\n    }\n\n");

//line default
//line hidden


//line 388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        }
                    }
                }

//line default
//line hidden


//line 393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("    \n");

//line default
//line hidden


//line 394 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("    public static class SimpleMergePatch");

//line default
//line hidden


//line 400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(" extends AbstractMergePatch");

//line default
//line hidden


//line 400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("\n    {\n    }\n\n");

//line default
//line hidden


//line 404 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    if (EntityBase.IsPolymorphic())
                    {
                        foreach (var st in EntityBase.AllSubtypes.Values)
                        {
                            if (!st.Abstract)
                            {

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("\tpublic static class SimpleMergePatch");

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.Name));

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" extends SimpleMergePatch");

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" {\n        public SimpleMergePatch");

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.Name));

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("() {\n            ");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.SetDiscriminatorPropertyString("super", st.Name)));

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("\n        }\n    }\n\n");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 423 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("    \n");

//line default
//line hidden


//line 424 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    var namedDeleteOrRemove = (EntityBase is Aggregate) ? "Delete" : "Remove";

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("\tpublic static class Simple");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(" extends Abstract");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("Command implements ");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("\n\t{\n        @Override\n        public String get");

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(PascalCaseCommandTypeDiscriminatorName));

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("() {\n            return COMMAND_TYPE_");

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove.ToUpperInvariant()));

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(";\n        }\n");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    if (EntityBase.IsPolymorphic() || EntityBase.Subtypes != null && EntityBase.Subtypes.Count > 0)
                    {
                        var p = EntityBase.DiscriminatorProperty;

//line default
//line hidden


//line 438 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("\n        private ");

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n\n        public ");

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" get");

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("() {\n            return this.");

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.PascalCaseName()));

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(") {\n            this.");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetPrivateFieldName()));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.CamelCaseName()));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(";\n        }\n");

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }

//line default
//line hidden


//line 451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("\t}\n\n");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    if (EntityBase.IsPolymorphic())
                    {
                        foreach (var st in EntityBase.AllSubtypes.Values)
                        {
                            if (!st.Abstract)
                            {

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("\tpublic static class Simple");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.Name));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" extends Simple");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(" {\n        public Simple");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(namedDeleteOrRemove));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.Name));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("() {\n            ");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.SetDiscriminatorPropertyString("super", st.Name)));

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                                this.Write("\n        }\n    }\n\n");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 472 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("    \n");

//line default
//line hidden


//line 473 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {

//line default
//line hidden


//line 484 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("    public static class SimpleCreate");

//line default
//line hidden


//line 484 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 484 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection implements Create");

//line default
//line hidden


//line 484 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 484 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection {\n        private List<");

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("> innerCommands = new ArrayList<");

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(">();\n\n        public void add(");

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 487 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" c) {\n            innerCommands.add(c);\n        }\n\n        public void remove(");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(" c) {\n            innerCommands.remove(c);\n        }\n\n        public void clear()" +
                        " {\n            innerCommands.clear();\n        }\n\n        @Override\n        publi" +
                        "c Iterator<");

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("> iterator() {\n            return innerCommands.iterator();\n        }\n    }\n\n    " +
                        "public static class Simple");

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection implements ");

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("CommandCollection {\n        private List<");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command> innerCommands = new ArrayList<");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command>();\n\n        public void add(");

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 508 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command c) {\n            innerCommands.add(c);\n        }\n\n        public void rem" +
                        "ove(");

//line default
//line hidden


//line 512 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 512 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command c) {\n            innerCommands.remove(c);\n        }\n\n        public void " +
                        "clear() {\n            innerCommands.clear();\n        }\n\n        @Override\n      " +
                        "  public Iterator<");

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetNameForCommand()));

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                        this.Write("Command> iterator() {\n            return innerCommands.iterator();\n        }\n    " +
                        "}\n\n");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    }
                }

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                this.Write("\n}\n\n");

//line default
//line hidden


//line 533 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
            private void WriteSetInnerEntityIdProperties(EntityBase innerEntity, EntityBase outerEntity, string innerObjName, string outerObjName)
            {
                var zip = outerEntity.Aggregate.BoundedContext.GetOuterInnerEntityIdPropertyNamesZip(outerEntity, innerEntity);
                var outerIdPropertyNames = zip.Item1;
                var innerIdPropertyNames = zip.Item2;

                for (int i = 0; i < outerIdPropertyNames.Count; i++)
                {
                    string outerPN = outerIdPropertyNames[i];
                    string innerPN = innerIdPropertyNames[i];


//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("            ");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerObjName));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(".set");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerObjName));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                    this.Write("());\n\n");

//line default
//line hidden


//line 550 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractCommandTemplate.tt"

                }
            }

            private string ToCamelCase(string name)
            {
                return BoundedContext.GetCamelCaseName(name);
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractCommandTemplate.tt"


        public class AggregateAbstractCommandTemplate : EntityBaseAbstractCommandTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateAbstractCommandTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractCommandTemplate.tt"


        public class EntityAbstractCommandTemplate : EntityBaseAbstractCommandTemplate
        {

            Entity Entity { get; set; }

            public EntityAbstractCommandTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"


        public class AggregateAggregateInterfaceTemplate : CSharpTemplate
        {

            Aggregate Aggregate { get; set; }

            BoundedContext BoundedContext { get { return Aggregate.BoundedContext; } }

            public AggregateAggregateInterfaceTemplate(Aggregate aggregate)
            {
                this.Aggregate = aggregate;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Aggregate.GetUsingClassNames("State", "");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.List;\n");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(".Event;\nimport ");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(".Command;\n\npublic interface ");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("Aggregate");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("\n{\n    ");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(" getState();\n\n    List<Event> getChanges();\n\n    void create(");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("Command.Create");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write(" c);\n\n");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                ////////////////
                if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write("    void mergePatch(");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write("Command.MergePatch");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(" c);\n\n");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!Aggregate.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        this.Write("    void delete(");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        this.Write(" c);\n\n");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                foreach (var method in Aggregate.GetAllMethodsExcludingReserved())
                {
                    // ///////////////////////////////////////////
                    if (!method.IsReturnVoid()) { continue; }
                    // ///////////////////////////////////////////
                    if (method.NotInstanceMethod) { continue; }
                    // //////////////////////////////////////////////
                    var parametersString = method.GetAggregateMethodParametersString();
                    // //////////////////////////////////////////////

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write("    void ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersString));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write("Commands.");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                    this.Write(" c);\n\n");

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                }


//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                this.Write("    void throwOnInvalidStateTransition(Command c);\n}\n\n");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAggregateInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"


        public class AggregateApplicationServiceInterfaceTemplate : CSharpTemplate
        {

            Aggregate Aggregate { get; set; }

            BoundedContext BoundedContext { get { return Aggregate.BoundedContext; } }

            public AggregateApplicationServiceInterfaceTemplate(Aggregate aggregate)
            {
                this.Aggregate = aggregate;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Aggregate.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.Map;\nimport java.util.List;\nimport org.dddml.support.criterio" +
                "n.Criterion;\n");

//line default
//line hidden


//line 31 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 35 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(".Event;\nimport ");

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetDomainPackage()));

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(".Command;\n\npublic interface ");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("ApplicationService");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("\n{\n");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                bool creationWithoutIdEnabled = Aggregate.GetCreationWithoutIdEnabled();
                if (creationWithoutIdEnabled)
                {

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" createWithoutId(");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Command.Create");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" c);\n\n");

//line default
//line hidden


//line 51 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("    void when(");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("Command.Create");

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 54 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(" c);\n\n");

//line default
//line hidden


//line 56 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                ////////////////
                if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    void when(");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Command.MergePatch");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" c);\n\n");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!Aggregate.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write("    void when(");

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(" c);\n\n");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } //end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 81 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                var allEntitiyBaseObjects = new List<EntityBase>();
                allEntitiyBaseObjects.Add(Aggregate);
                allEntitiyBaseObjects.AddRange(Aggregate.GetAllNestedEntities().Values);

                foreach (var e in allEntitiyBaseObjects)
                {
                    EntityBase entityBase = e;
                    var ms = entityBase.GetSelfAndAllSubtypeMethods();
                    if (ms != null && ms.Count > 0)
                    {
                        Entity entity = (entityBase is Entity) ? (Entity)entityBase : null;

                        foreach (var method in ms)
                        {
                            if (method.IsReservedMethod()) { continue; }


//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write("    ");

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.GetReturnTypeString()));

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write(" when(");

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write("Commands.");

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                            this.Write(" c);\n\n");

//line default
//line hidden


//line 101 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        }
                    }
                }


//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("    ");

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(" get(");

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write(" id);\n\n");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                var stateTypeParamStrings = new string[] { String.Empty };
                if (Aggregate.IsPolymorphic())
                {
                    stateTypeParamStrings = new string[] { String.Empty, String.Format(@"Class<? extends {0}State> stateType, ", Aggregate.GetNameForState()) };
                }
                foreach (var stateTypeParamString in stateTypeParamStrings)
                {

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("> getAll(");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Integer firstResult, Integer maxResults);\n\n    Iterable<");

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("> get(");

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter, List<String> orders, Integer firstRes" +
                    "ult, Integer maxResults);\n\n    Iterable<");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("> get(");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Criterion filter, List<String> orders, Integer firstResult, Integer maxResults);\n" +
                    "\n    Iterable<");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("> getByProperty(");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("String propertyName, Object propertyValue, List<String> orders, Integer firstResu" +
                    "lt, Integer maxResults);\n\n    long getCount(");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter);\n\n    long getCount(");

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Criterion filter);\n\n");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                if (!Aggregate.IsNoEventSourcing())
                {

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("Event");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" getEvent(");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(", long version);\n\n    ");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" getHistoryState(");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(", long version);\n\n");

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                foreach (var p in Aggregate.GetDerivedCollectionProperties())
                {
                    if (!BoundedContext.AllEntities.ContainsKey(p.ItemType)) { continue; }
                    if (p.ItemPropertyMap == null || p.ItemPropertyMap.Count == 0) { continue; }
                    EntityBase itemEntity = BoundedContext.AllEntities[p.ItemType];
                    var aggIdName = BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name);

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggIdName));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 154 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                foreach (var entity in Aggregate.GetAllNestedEntities().Values)
                {
                    var globalIdVO = entity.GetGlobalIdValueObject();
                    var globalIdVOProperties = globalIdVO.Properties.Values.ToList();
                    var getByParametersString = globalIdVOProperties
                            .Map(p => String.Format("{0} {1}", p.JavaType(), BoundedContext.GetParameterOrArgumentName(p.Name)))
                            .ConcatWithSeparator(", ");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    ");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State get");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByParametersString));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(");\n\n");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    var globalIdVOOuterIdProperties = globalIdVO.Properties.Values.SkipLastProperty().ToList();
                    var getEntitiesByParametersString = globalIdVOOuterIdProperties.Map(p => String.Format("{0} {1}",
                                p.JavaType(),
                                BoundedContext.GetPrivateFieldName(p.Name)))//和 GetSourceChainingGetter() 的处理一致
                            .ConcatWithSeparator(", ");
                    var entityCollectionName = BoundedContext.Pluralize(entity.Name);

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityCollectionName));

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getEntitiesByParametersString));

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    this.Write(", Criterion filter, List<String> orders);\n\n");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"


                    foreach (var collectionP in entity.GetRecursiveCollectionProperties())
                    {
                        Entity itemEntity = entity;
                        var referenceProperty = entity.GetPropertyByReferenceName(collectionP.InverseOf);

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write("    Iterable<");

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(itemEntity.Name));

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write("State> get");

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionP.Name));

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByParametersString));

//line default
//line hidden


//line 185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                        this.Write(");\n\n");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                    }

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                this.Write("}\n\n");

//line default
//line hidden


//line 195 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateApplicationServiceInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


        public class AggregateAbstractAggregateTemplate : CSharpTemplate
        {

            Aggregate Aggregate { get; set; }

            BoundedContext BoundedContext { get { return Aggregate.BoundedContext; } }

            bool IncludingHoistedProperties
            {
                get { return !Aggregate.IsPolymorphic(); }
            }

            //private bool IsIncludingHoistedProperties(EntityBase e)
            //{
            //return !e.IsPolymorphic();
            //}

            public AggregateAbstractAggregateTemplate(Aggregate aggregate)
            {
                this.Aggregate = aggregate;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Aggregate.GetUsingClassNames("State", "");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(";\r\n\r\nimport java.util.*;\r\n");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(";\r\n");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(".*;\r\n\r\n");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                var reservedPropertyVersion = Aggregate.Properties[Aggregate.ReservedProperties.Version];
                var reservedPropertyDeleted = Aggregate.Properties[Aggregate.ReservedProperties.Deleted];

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("public abstract class Abstract");

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Aggregate extends AbstractAggregate implements ");

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Aggregate\r\n{\r\n    private ");

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State.Mutable");

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State state;\r\n\r\n    private List<Event> changes = new ArrayList<Event>();\r\n\r\n    " +
                "public Abstract");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Aggregate(");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State state) {\r\n        this.state = (");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State.Mutable");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State)state;\r\n    }\r\n\r\n    public ");

//line default
//line hidden


//line 63 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 63 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 63 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 63 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(" getState() {\r\n        return this.state;\r\n    }\r\n\r\n    public List<Event> getCha" +
                "nges() {\r\n        return this.changes;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                var aggregateVersionParameterName = BoundedContext.GetParameterOrArgumentName(Aggregate.ReservedProperties.Version);//Aggregate.GetStateEventIdPropertyVersionName()

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("    public void create(");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Command.Create");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(" c) {\r\n        if (c.get");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("() == null) { c.set");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State.VERSION_NULL); }\r\n        ");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Event e = map(c);\r\n        apply(e);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                ////////////////
                if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////
                    var javaPatchVerificationLogic = Aggregate.GetJavaPatchVerificationLogic();

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("    public void mergePatch(");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Command.MergePatch");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" c) {\r\n");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    if (javaPatchVerificationLogic != null)
                    {

//line default
//line hidden


//line 92 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        try {\r\n            verifyPatch(c);\r\n        } catch (Exception ex) {\r\n   " +
                        "         throw new DomainError(\"VerificationFailed\", ex);\r\n        }\r\n");

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event e = map(c);\r\n        apply(e);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    if (javaPatchVerificationLogic != null)
                    {

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    private void verifyPatch(");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.MergePatch");

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" c) {\r\n");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        foreach (var p in Aggregate.Properties.Values)
                        {
                            if (p.StateMachine != null || p.IsReservedProperty) { continue; }
                            if (p.Type == null) { continue; }  //todo
                            var camelCasePN = BoundedContext.GetParameterOrArgumentName(p.Name);
                            var javaPT = p.Type != null ? p.JavaType() : "Enumerable<" + p.JavaItemType() + ">";

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(javaPT));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" = c.get");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("();\r\n");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            if (p.Name != camelCasePN)
                            {

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(javaPT));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" = ");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(";\r\n");

//line default
//line hidden


//line 123 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("\r\n        ");

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(javaPatchVerificationLogic.Replace("{this}", "getState()")));

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("\r\n    }\r\n\r\n");

//line default
//line hidden


//line 131 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                    // /////////////////////////////////////////////////////
                    if (!Aggregate.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    public void delete(");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" c) {\r\n        ");

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event e = map(c);\r\n        apply(e);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("    public void throwOnInvalidStateTransition(Command c) {\r\n        ");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Command.throwOnInvalidStateTransition(this.state, c);\r\n    }\r\n\r\n    protected voi" +
                "d apply(Event e) {\r\n        onApplying(e);\r\n        state.mutate(e);\r\n        ch" +
                "anges.add(e);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                if (Aggregate.IsPolymorphic())
                {
                    var constObj = ConstObject.CreateFromDiscriminator(Aggregate);

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("    protected ");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event map(");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Command.Create");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" c) {\r\n");

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    if (!Aggregate.Abstract)
                    {

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        if(");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(".");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(Aggregate.Name)));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(".equals(c.get");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("())) {\r\n            return mapTo");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event(c);\r\n        }\r\n");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }

                    foreach (var st in Aggregate.AllSubtypes.Values)
                    {
                        if (!st.Abstract)
                        {

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        if(");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(st.Name)));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".equals(c.get");

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("())) {\r\n            return mapTo");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.GetNameForEvent()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event(c);\r\n        }\r\n");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                    }

                    if (Aggregate.Abstract)
                    {

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        throw new IllegalArgumentException();\r\n");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        return mapTo");

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event(c);\r\n");

//line default
//line hidden


//line 200 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

                // ////////////////////////////////////////
                if (!Aggregate.Abstract)
                {
                    // ////////////////////////////////////////

                    if (Aggregate.IsPolymorphic())
                    {

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event mapTo");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event(");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" c) {\r\n");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event map(");

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 222 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" c) {\r\n");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" stateEventId = new ");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(c.get");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(), c.get");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("());\r\n        ");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("StateCreated e = new");

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 227 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("StateCreated(stateEventId);\r\n");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                    WriteSetEntityStateCreatedOrMergePatchedProperties(Aggregate, "e", "c", "state", true);


//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ((Abstract");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event)e).set");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(c.get");

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 233 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("());\r\n");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                    WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 238 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    WriteEntityStateCreatedBalanceLocalVariantsInitialization(Aggregate);

//line default
//line hidden


//line 241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                    if (Aggregate.Entities != null && Aggregate.Entities.Count > 0)
                    {

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" = c.get");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("();\r\n");

//line default
//line hidden


//line 247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        foreach (var innerEntity in Aggregate.Entities.Values)
                        {
                            //if (innerEntity.IsHoisted && ! IsIncludingHoistedProperties(Aggregate)) { continue; }

                            var innerEntityCollectionProperty = Aggregate.GetCollectionPropertyByItemType(innerEntity.Name);


//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        for (");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" innerCommand : c.getCreate");

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Commands()) {\r\n");

//line default
//line hidden


//line 256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            // ////////////////////////////////////////////////////////////////////
                            if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                            {
                                // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 261 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("            throwOnInconsistentCommands(c, innerCommand);\r\n");

//line default
//line hidden


//line 262 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // ////////////////////////////////////////////////////////////////////
                            }
                            // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("            ");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateCreated innerEvent = mapCreate(innerCommand, c, ");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", this.state);\r\n            e.add");

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 268 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event(innerEvent);\r\n");

//line default
//line hidden


//line 269 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            WriteAddBalanceLocalVariantsByEntryEntityCreatedEvents(innerEntity, "innerEvent");//createdEventName

//line default
//line hidden


//line 272 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        }\r\n\r\n");

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    WriteSetEntityStateEventBalanceProperties(Aggregate, "e");

//line default
//line hidden


//line 281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    // ////////////////////////////////////////
                } //if (!Aggregate.Abstract)
                  // ////////////////////////////////////////

                if (Aggregate.IsPolymorphic())
                {
                    foreach (var subtype in Aggregate.AllSubtypes.Values)
                    {
                        if (!subtype.Abstract)
                        {

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event mapTo");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event(");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.Create");

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 296 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c) {\r\n        ");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" stateEventId = new ");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(c.get");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(), c.get");

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 297 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n        ");

//line default
//line hidden


//line 298 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 298 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 298 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 298 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateCreated e = new");

//line default
//line hidden


//line 298 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 298 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateCreated(stateEventId);\r\n");

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                            WriteSetEntityStateCreatedOrMergePatchedProperties(subtype, "e", "c", "state");


//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ((Abstract");

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event)e).set");

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(c.get");

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 304 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n");

//line default
//line hidden


//line 305 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                            WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

                            if (subtype.GetAllEntities().Count > 0)
                            {

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" = c.get");

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 312 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("();\r\n");

//line default
//line hidden


//line 313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                foreach (var innerEntity in subtype.GetAllEntities())
                                {
                                    //if (innerEntity.IsHoisted && ! IsIncludingHoistedProperties(Aggregate)) { continue; }

                                    var innerEntityCollectionProperty = Aggregate.GetCollectionPropertyByItemType(innerEntity.Name);


//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        for (");

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Command.Create");

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" innerCommand : c.getCreate");

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Commands()) {\r\n");

//line default
//line hidden


//line 322 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    // ////////////////////////////////////////////////////////////////////
                                    if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                                    {
                                        // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 327 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("            throwOnInconsistentCommands(c, innerCommand);\r\n");

//line default
//line hidden


//line 328 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        // ////////////////////////////////////////////////////////////////////
                                    }
                                    // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            ");

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated innerEvent = mapCreate(innerCommand, c, ");

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 333 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", this.state);\r\n            e.add");

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 334 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event(innerEvent);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 341 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                    }
                }


//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                ////////////////
                if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 356 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    if (Aggregate.IsPolymorphic())
                    {
                        var constObj = ConstObject.CreateFromDiscriminator(Aggregate);

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event map(");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.MergePatch");

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" c) {\r\n");

//line default
//line hidden


//line 362 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        if (!Aggregate.Abstract)
                        {

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        if(c.get");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("().equals(");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(Aggregate.Name)));

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(")) {\r\n            return mapTo");

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 367 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event(c);\r\n        }\r\n");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

                        foreach (var st in Aggregate.AllSubtypes.Values)
                        {
                            if (!st.Abstract)
                            {

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        if(c.get");

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("().equals(");

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(".");

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(st.Name)));

//line default
//line hidden


//line 377 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(")) {\r\n            return mapTo");

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.GetNameForEvent()));

//line default
//line hidden


//line 378 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(c);\r\n        }\r\n");

//line default
//line hidden


//line 380 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                        }

                        if (Aggregate.Abstract)
                        {

//line default
//line hidden


//line 387 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        throw new IllegalArgumentException();\r\n");

//line default
//line hidden


//line 388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        return mapTo");

//line default
//line hidden


//line 393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event(c);\r\n");

//line default
//line hidden


//line 394 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

//line default
//line hidden


//line 397 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }

                    // ////////////////////////////////////////
                    if (!Aggregate.Abstract)
                    {
                        // ////////////////////////////////////////

                        if (Aggregate.IsPolymorphic())
                        {

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event mapTo");

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event(");

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c) {\r\n");

//line default
//line hidden


//line 411 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event map(");

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c) {\r\n");

//line default
//line hidden


//line 417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" stateEventId = new ");

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(c.get");

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(), c.get");

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 420 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("());\r\n        ");

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateMergePatched e = new");

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateMergePatched(stateEventId);\r\n");

//line default
//line hidden


//line 422 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        WriteSetEntityStateCreatedOrMergePatchedProperties(Aggregate, "e", "c", "state", false);

                        WriteSetEntityStateMergePatchedPropertyRemovedProperties(Aggregate, "e", "c");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        ((Abstract");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event)e).set");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(c.get");

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("());\r\n");

//line default
//line hidden


//line 428 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));


//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        WriteEntityStateMergePatchedBalanceLocalVariantsInitialization(Aggregate);

//line default
//line hidden


//line 435 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        if (Aggregate.Entities != null && Aggregate.Entities.Count > 0)
                        {

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" = c.get");

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 439 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("();\r\n");

//line default
//line hidden


//line 440 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            foreach (var innerEntity in Aggregate.Entities.Values)
                            {
                                if (innerEntity.IsHoisted && !this.IncludingHoistedProperties) { continue; }


//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        for (");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command innerCommand : c.get");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Commands()) {\r\n");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // ////////////////////////////////////////////////////////////////////
                                if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                                {
                                    // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            throwOnInconsistentCommands(c, innerCommand);\r\n");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    // ////////////////////////////////////////////////////////////////////
                                }
                                // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 458 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("            ");

//line default
//line hidden


//line 458 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 458 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event innerEvent = map(innerCommand, c, ");

//line default
//line hidden


//line 458 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 458 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", this.state);\r\n            e.add");

//line default
//line hidden


//line 459 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 459 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(innerEvent);\r\n");

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                if (Aggregate.IsAccountEntity())
                                {

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            // ////////////////\r\n            if (!(innerEvent instanceof ");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated)) { continue; }\r\n            ");

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated entryCreated = (");

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated)innerEvent;\r\n");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    WriteAddBalanceLocalVariantsByEntryEntityCreatedEvents(innerEntity, "entryCreated");//createdEventName

//line default
//line hidden


//line 470 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            // ////////////////\r\n");

//line default
//line hidden


//line 471 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        }\r\n\r\n");

//line default
//line hidden


//line 476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 480 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        WriteSetEntityStateEventBalanceProperties(Aggregate, "e");

//line default
//line hidden


//line 483 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        // ////////////////////////////////////////
                    } //if (!Aggregate.Abstract)
                      // ////////////////////////////////////////

                    if (Aggregate.IsPolymorphic())
                    {
                        foreach (var subtype in Aggregate.AllSubtypes.Values)
                        {
                            if (!subtype.Abstract)
                            {

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("    protected ");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event mapTo");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.MergePatch");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" c) {\r\n        ");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" stateEventId = new ");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(c.get");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(), c.get");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("());\r\n        ");

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("StateMergePatched e = new");

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 500 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("StateMergePatched(stateEventId);\r\n");

//line default
//line hidden


//line 501 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                WriteSetEntityStateCreatedOrMergePatchedProperties(subtype, "e", "c", "state");

                                WriteSetEntityStateMergePatchedPropertyRemovedProperties(subtype, "e", "c");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        ((Abstract");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event)e).set");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(c.get");

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 506 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("());\r\n");

//line default
//line hidden


//line 507 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

                                if (subtype.GetAllEntities().Count > 0)
                                {

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        ");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" = c.get");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("();\r\n");

//line default
//line hidden


//line 514 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    foreach (var innerEntity in subtype.GetAllEntities())
                                    {
                                        //if (innerEntity.IsHoisted && ! this.IncludingHoistedProperties) { continue; }


//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("        for (");

//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Command innerCommand : c.get");

//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 520 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Commands()) {\r\n");

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        // ////////////////////////////////////////////////////////////////////
                                        if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                                        {
                                            // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write("            throwOnInconsistentCommands(c, innerCommand);\r\n");

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            // ////////////////////////////////////////////////////////////////////
                                        }
                                        // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("            ");

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Event innerEvent = map(innerCommand, c, ");

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 532 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(", this.state);\r\n            e.add");

//line default
//line hidden


//line 533 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 533 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Event(innerEvent);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    }
                                }

//line default
//line hidden


//line 540 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 543 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 548 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!Aggregate.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 554 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        if (Aggregate.IsPolymorphic())
                        {
                            var constObj = ConstObject.CreateFromDiscriminator(Aggregate);

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event map(");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.Delete");

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 559 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c) {\r\n");

//line default
//line hidden


//line 560 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            if (!Aggregate.Abstract)
                            {

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        if(c.get");

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("().equals(");

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(".");

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(Aggregate.Name)));

//line default
//line hidden


//line 564 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(")) {\r\n            return mapTo");

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(c);\r\n        }\r\n");

//line default
//line hidden


//line 567 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

                            foreach (var st in Aggregate.AllSubtypes.Values)
                            {
                                if (!st.Abstract)
                                {

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        if(c.get");

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("().equals(");

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".");

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(st.Name)));

//line default
//line hidden


//line 575 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(")) {\r\n            return mapTo");

//line default
//line hidden


//line 576 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(st.GetNameForEvent()));

//line default
//line hidden


//line 576 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event(c);\r\n        }\r\n");

//line default
//line hidden


//line 578 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                            }

                            if (Aggregate.Abstract)
                            {

//line default
//line hidden


//line 585 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        throw new IllegalArgumentException();\r\n");

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                            else
                            {

//line default
//line hidden


//line 591 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        return mapTo");

//line default
//line hidden


//line 591 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 591 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(c);\r\n");

//line default
//line hidden


//line 592 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

//line default
//line hidden


//line 595 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 597 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

                        // ////////////////////////////////////////
                        if (!Aggregate.Abstract)
                        {
                            // ////////////////////////////////////////

                            if (Aggregate.IsPolymorphic())
                            {

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("    protected ");

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event mapTo");

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(");

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.Delete");

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 608 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" c) {\r\n");

//line default
//line hidden


//line 609 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // ///////////////// change the method name... ///////////////////
                            }
                            else
                            {

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("    protected ");

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event map(");

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.Delete");

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 615 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" c) {\r\n");

//line default
//line hidden


//line 616 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // ///////////////////////////////////////////////////////////////
                            }

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" stateEventId = new ");

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(c.get");

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(), c.get");

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 620 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n        ");

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateDeleted e = new");

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 621 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateDeleted(stateEventId);\r\n        ((Abstract");

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event)e).set");

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(c.get");

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n");

//line default
//line hidden


//line 623 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 626 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            // ////////////////////////////////////////
                        } //if (!Aggregate.Abstract)
                          // ////////////////////////////////////////

                        if (Aggregate.IsPolymorphic())
                        {
                            foreach (var subtype in Aggregate.AllSubtypes.Values)
                            {
                                if (!subtype.Abstract)
                                {

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("    protected ");

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event mapTo");

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event(");

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Command.Delete");

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 641 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" c) {\r\n        ");

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" stateEventId = new ");

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(c.get");

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(), c.get");

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 642 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("());\r\n        ");

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateDeleted e = new");

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 643 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateDeleted(stateEventId);\r\n        ((Abstract");

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event)e).set");

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(c.get");

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 644 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("());\r\n");

//line default
//line hidden


//line 645 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 648 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                            }
                        }

//line default
//line hidden


//line 656 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 665 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                if (Aggregate.Entities != null)
                {

                    foreach (var entityPair in Aggregate.GetOuterInnerEntityPairs())
                    {
                        var outerEntity = entityPair.Item1;
                        var currentEntity = (Entity)entityPair.Item2;
                        var currentIdPropertyNames = currentEntity.GetIdPropertyNames();
                        var currentEntityCollectionProperty = outerEntity.GetCollectionPropertyByItemType(currentEntity.Name);

//line default
//line hidden


//line 676 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("\r\n    protected ");

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event map(");

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command c, ");

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForCommand()));

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command outerCommand, ");

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetReservedPropertyVersionJavaType()));

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForState()));

//line default
//line hidden


//line 677 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("State outerState) {\r\n        ");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" create = (c.get");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("().equals(CommandType.CREATE)) ? ((");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(")c) : null;\r\n        if(create != null) {\r\n            return mapCreate(create, o" +
                        "uterCommand, ");

//line default
//line hidden


//line 680 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 680 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", outerState);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 683 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        ////////////////
                        if (!currentEntity.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" merge = (c.get");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("().equals(CommandType.MERGE_PATCH)) ? ((");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(")c) : null;\r\n        if(merge != null) {\r\n            return mapMergePatch(merge," +
                            " outerCommand, ");

//line default
//line hidden


//line 691 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 691 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", outerState);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 694 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            // /////////////////////////////////////////////////////
                            if (!currentEntity.ReservedProperties.NoDeleted)
                            {
                                // /////////////////////////////////////////////////////

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        ");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.Remove");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Name));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" remove = (c.get");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("().equals(CommandType.REMOVE)) ? ((");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.Remove");

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 700 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(")c) : null;\r\n        if (remove != null) {\r\n            return mapRemove(remove, " +
                                "outerCommand, ");

//line default
//line hidden


//line 702 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 702 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", outerState);\r\n        }\r\n");

//line default
//line hidden


//line 704 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // /////////////////////////////////////////////////////
                            }
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 709 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            ////////////////
                        } //if (!currentEntity.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 714 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    protected ");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateCreated mapCreate(");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" c, ");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForCommand()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Command outerCommand, ");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForState()));

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("State outerState) {\r\n        ((AbstractCommand)c).set");

//line default
//line hidden


//line 718 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 718 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(outerCommand.get");

//line default
//line hidden


//line 718 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 718 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("());\r\n        ");

//line default
//line hidden


//line 719 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 719 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" stateEventId = new ");

//line default
//line hidden


//line 719 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 719 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 719 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNewEventIdArgumentsString("outerState", "c", aggregateVersionParameterName)));

//line default
//line hidden


//line 719 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(");\r\n        ");

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateCreated e = new");

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 720 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateCreated(stateEventId);\r\n        ");

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntityCollectionProperty.ItemType));

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("State s = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Id.JavaType()));

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForState()));

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("State>)outerState.get");

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntityCollectionProperty.Name));

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("()).getOrAdd(c.get");

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Id.Name));

//line default
//line hidden


//line 721 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("());\r\n\r\n");

//line default
//line hidden


//line 723 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        WriteSetEntityStateCreatedOrMergePatchedProperties(currentEntity, "e", "c", "s", true);

                        WriteSetEntityStateEventCreatedByRequesterId(currentEntity, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 728 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("\r\n");

//line default
//line hidden


//line 729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                        if (currentEntity.Entities != null)
                        {
                            foreach (var innerEntity in currentEntity.Entities.Values)
                            {
                                //if (innerEntity.IsHoisted && ! IsIncludingHoistedProperties(currentEntity)) { continue; }

                                var innerEntityCollectionProperty = currentEntity.GetCollectionPropertyByItemType(innerEntity.Name);


//line default
//line hidden


//line 740 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("\r\n        for (");

//line default
//line hidden


//line 741 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 741 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.Create");

//line default
//line hidden


//line 741 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 741 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" innerCommand : c.getCreate");

//line default
//line hidden


//line 741 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 741 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Commands()) {\r\n");

//line default
//line hidden


//line 742 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // ////////////////////////////////////////////////////////////////////
                                if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                                {
                                    // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            throwOnInconsistentCommands(c, innerCommand);\r\n\r\n");

//line default
//line hidden


//line 749 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    // ////////////////////////////////////////////////////////////////////
                                }
                                // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("            ");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("StateCreated innerEvent = mapCreate(innerCommand, c, ");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", s);\r\n            e.add");

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 755 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event(innerEvent);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 758 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                        }

//line default
//line hidden


//line 762 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        return e;\r\n\r\n    }// END map(ICreate... ////////////////////////////\r\n\r\n");

//line default
//line hidden


//line 766 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        ////////////////
                        if (!currentEntity.IsImmutableOrOuterEntityImmutable())
                        {
                            ////////////////

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateMergePatched mapMergePatch(");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.MergePatch");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c, ");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForCommand()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command outerCommand, ");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForState()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("State outerState) {\r\n        ((AbstractCommand)c).set");

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(outerCommand.get");

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n        ");

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" stateEventId = new ");

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNewEventIdArgumentsString("outerState", "c", aggregateVersionParameterName)));

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(");\r\n        ");

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateMergePatched e = new");

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 775 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateMergePatched(stateEventId);\r\n        ");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntityCollectionProperty.ItemType));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("State s = ((EntityStateCollection.ModifiableEntityStateCollection<");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Id.JavaType()));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForState()));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("State>)outerState.get");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntityCollectionProperty.Name));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("()).getOrAdd(c.get");

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Id.Name));

//line default
//line hidden


//line 776 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n\r\n");

//line default
//line hidden


//line 778 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            WriteSetEntityStateCreatedOrMergePatchedProperties(currentEntity, "e", "c", "s", false);
                            WriteSetEntityStateMergePatchedPropertyRemovedProperties(currentEntity, "e", "c");

//line default
//line hidden


//line 782 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("\r\n");

//line default
//line hidden


//line 783 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            WriteSetEntityStateEventCreatedByRequesterId(currentEntity, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 786 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("\r\n");

//line default
//line hidden


//line 787 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                            if (currentEntity.Entities != null)
                            {
                                foreach (var innerEntity in currentEntity.Entities.Values)
                                {
                                    //if (innerEntity.IsHoisted && ! IsIncludingHoistedProperties(currentEntity)) { continue; }

//line default
//line hidden


//line 795 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("\r\n        for (");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Command innerCommand : c.get");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Commands()) {\r\n");

//line default
//line hidden


//line 797 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    // ////////////////////////////////////////////////////////////////////
                                    if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                                    {
                                        // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 802 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("            throwOnInconsistentCommands(c, innerCommand);\r\n\r\n");

//line default
//line hidden


//line 804 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        // ////////////////////////////////////////////////////////////////////
                                    }
                                    // ////////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            ");

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event innerEvent = map(innerCommand, c, ");

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 809 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", s);\r\n            e.add");

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event(innerEvent);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 813 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 817 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        return e;\r\n\r\n    }// END map(IMergePatch... ////////////////////////////\r" +
                            "\n\r\n");

//line default
//line hidden


//line 821 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            // /////////////////////////////////////////////////////
                            if (!currentEntity.ReservedProperties.NoDeleted)
                            {
                                // /////////////////////////////////////////////////////

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("    protected ");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("StateRemoved mapRemove(");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command.Remove");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" c, ");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForCommand()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Command outerCommand, ");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" ");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameterName));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", ");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForState()));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("State outerState) {\r\n        ((AbstractCommand)c).set");

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(outerCommand.get");

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("());\r\n        ");

//line default
//line hidden


//line 829 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 829 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" stateEventId = new ");

//line default
//line hidden


//line 829 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 829 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 829 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNewEventIdArgumentsString("outerState", "c", aggregateVersionParameterName)));

//line default
//line hidden


//line 829 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(");\r\n        ");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("StateRemoved e = new");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("StateRemoved(stateEventId);\r\n\r\n");

//line default
//line hidden


//line 832 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                WriteSetEntityStateEventCreatedByRequesterId(currentEntity, "e", String.Format("c.get{0}()", BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 835 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("\r\n        return e;\r\n\r\n    }// END map(IRemove... ////////////////////////////\r\n\r" +
                                "\n");

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                // /////////////////////////////////////////////////////
                            }
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 845 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            ////////////////
                        } //if (!currentEntity.IsImmutableOrOuterEntityImmutable())
                          ////////////////

//line default
//line hidden


//line 850 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                    // ///////////////////////////////////


//line default
//line hidden


//line 855 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                    // ////////////////////////////////////////////////////////////////////
                    if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                    {
                        // ////////////////////////////////////////////////////////////////////

                        foreach (var entityPair in Aggregate.GetOuterInnerEntityPairs())
                        {
                            EntityBase outerEntity = entityPair.Item1;
                            EntityBase innerEntity = entityPair.Item2;
                            var propertyNamesZip = outerEntity.Aggregate.BoundedContext.GetOuterInnerEntityIdPropertyNamesZip(outerEntity, innerEntity);
                            var outerIdPropertyNames = propertyNamesZip.Item1;
                            var innerIdPropertyNames = propertyNamesZip.Item2;

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected void throwOnInconsistentCommands(");

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.GetNameForCommand()));

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command command, ");

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForCommand()));

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command innerCommand) {\r\n");

//line default
//line hidden


//line 870 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            var outerCreateOrMergePatchOrDeleteOrRemoveIntfName = "Abstract" + outerEntity.Name + "Command";//(outerEntity is Aggregate) ? "ICreateOrMergePatchOrDelete" + outerEntity.Name : "ICreateOrMergePatchOrRemove" + outerEntity.Name;
                            var innerCreateOrMergePatchOrDeleteOrRemoveIntfName = "Abstract" + innerEntity.Name + "Command";//(innerEntity is Aggregate) ? "ICreateOrMergePatchOrDelete" + innerEntity.Name : "ICreateOrMergePatchOrRemove" + innerEntity.Name;

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerCreateOrMergePatchOrDeleteOrRemoveIntfName));

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" properties = command instanceof ");

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerCreateOrMergePatchOrDeleteOrRemoveIntfName));

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" ? (");

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerCreateOrMergePatchOrDeleteOrRemoveIntfName));

//line default
//line hidden


//line 874 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(") command : null;\r\n        ");

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerCreateOrMergePatchOrDeleteOrRemoveIntfName));

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" innerProperties = innerCommand instanceof ");

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerCreateOrMergePatchOrDeleteOrRemoveIntfName));

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" ? (");

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerCreateOrMergePatchOrDeleteOrRemoveIntfName));

//line default
//line hidden


//line 875 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(") innerCommand : null;\r\n        if (properties == null || innerProperties == null" +
                            ") { return; }\r\n");

//line default
//line hidden


//line 877 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            for (int i = 0; i < outerIdPropertyNames.Count; i++)
                            {
                                string outerPN = outerIdPropertyNames[i];
                                string innerPN = innerIdPropertyNames[i];


//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        String outer");

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Name = \"");

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("\";\r\n        ");

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(((Entity)innerEntity).OuterIds[innerPN].JavaType()));

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" outer");

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value = properties.get");

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 885 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("();\r\n        String inner");

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Name = \"");

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("\";\r\n        ");

//line default
//line hidden


//line 887 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(((Entity)innerEntity).OuterIds[innerPN].JavaType()));

//line default
//line hidden


//line 887 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" inner");

//line default
//line hidden


//line 887 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 887 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value = innerProperties.get");

//line default
//line hidden


//line 887 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 887 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("();\r\n        if (inner");

//line default
//line hidden


//line 888 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 888 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value == null) {\r\n            innerProperties.set");

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(outer");

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value);\r\n        }\r\n        else if (inner");

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value != outer");

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 891 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value \r\n            && (inner");

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value == null || inner");

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value != null && !inner");

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value.equals(outer");

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 892 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value))) {\r\n            throw DomainError.named(\"inconsistentId\", \"Outer %1$s %2$" +
                                "s NOT equals inner %3$s %4$s\", outer");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Name, outer");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerPN));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value, inner");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Name, inner");

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerPN));

//line default
//line hidden


//line 893 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Value);\r\n        }\r\n");

//line default
//line hidden


//line 895 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                //if (innerIdValue is string && outerIdValue is string && ((string)innerIdValue).Normalize() == ((string)outerIdValue).Normalize())
                                //{
                                //    return;
                                //}
                            }

//line default
//line hidden


//line 902 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    }// END throwOnInconsistentCommands /////////////////////\r\n\r\n");

//line default
//line hidden


//line 904 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        } // end foreach...

                        // ////////////////////////////////////////////////////////////////////
                    } // end if (!Aggregate.BoundedContext.GetNoGeneratingSimpleCommandImplements())
                      // ////////////////////////////////////////////////////////////////////

                }

//line default
//line hidden


//line 913 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("\r\n    ////////////////////////\r\n");

//line default
//line hidden


//line 915 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                if (!Aggregate.Abstract)
                {

//line default
//line hidden


//line 919 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("\r\n    protected ");

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("StateCreated new");

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("StateCreated(");

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" version, String commandId, ");

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaType(BoundedContext.DefaultUserIdType)));

//line default
//line hidden


//line 920 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" requesterId) {\r\n        ");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" stateEventId = new ");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(this.state.get");

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(), version);\r\n        ");

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("StateCreated e = new");

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 922 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("StateCreated(stateEventId);\r\n        ((Abstract");

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event)e).set");

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 923 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(commandId);\r\n");

//line default
//line hidden


//line 924 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", "requesterId");

//line default
//line hidden


//line 927 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 930 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

//line default
//line hidden


//line 933 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                ////////////////
                if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 939 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    if (!Aggregate.Abstract)
                    {

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateMergePatched new");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateMergePatched(");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" version, String commandId, ");

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaType(BoundedContext.DefaultUserIdType)));

//line default
//line hidden


//line 943 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" requesterId) {\r\n        ");

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" stateEventId = new ");

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(this.state.get");

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 944 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(), version);\r\n        ");

//line default
//line hidden


//line 945 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 945 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 945 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 945 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateMergePatched e = new");

//line default
//line hidden


//line 945 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 945 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateMergePatched(stateEventId);\r\n        ((Abstract");

//line default
//line hidden


//line 946 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 946 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event)e).set");

//line default
//line hidden


//line 946 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 946 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(commandId);\r\n");

//line default
//line hidden


//line 947 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", "requesterId");

//line default
//line hidden


//line 950 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 953 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }

//line default
//line hidden


//line 956 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!Aggregate.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 962 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        if (!Aggregate.Abstract)
                        {

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateDeleted new");

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateDeleted(");

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.JavaType()));

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" version, String commandId, ");

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaType(BoundedContext.DefaultUserIdType)));

//line default
//line hidden


//line 966 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" requesterId) {\r\n        ");

//line default
//line hidden


//line 967 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 967 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" stateEventId = new ");

//line default
//line hidden


//line 967 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 967 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(this.state.get");

//line default
//line hidden


//line 967 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 967 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(), version);\r\n        ");

//line default
//line hidden


//line 968 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 968 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 968 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 968 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateDeleted e = new");

//line default
//line hidden


//line 968 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 968 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateDeleted(stateEventId);\r\n        ((Abstract");

//line default
//line hidden


//line 969 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 969 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event)e).set");

//line default
//line hidden


//line 969 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 969 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(commandId);\r\n");

//line default
//line hidden


//line 970 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            WriteSetEntityStateEventCreatedByRequesterId(Aggregate, "e", "requesterId");

//line default
//line hidden


//line 973 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        return e;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 976 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

//line default
//line hidden


//line 979 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 988 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                var entitiesToNew = new List<EntityBase>();
                entitiesToNew.Add(Aggregate);
                entitiesToNew.AddRange(Aggregate.GetAllNestedEntities().Values);
                foreach (var entity in entitiesToNew)
                {
                    var eventNamedDeletedOrRemoved = (entity is Aggregate) ? "Deleted" : "Removed";
                    if (!entity.Abstract)
                    {

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateCreated new");

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateCreated(");

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 998 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" stateEventId) {\r\n        return new Abstract");

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("Event.Simple");

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 999 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("StateCreated(stateEventId);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1002 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                    ////////////////
                    if (!entity.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////
                        if (!entity.Abstract)
                        {

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected ");

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateMergePatched new");

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateMergePatched(");

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 1011 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" stateEventId) {\r\n        return new Abstract");

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.Simple");

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1012 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateMergePatched(stateEventId);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1015 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

                        if (entity.IsPolymorphic())
                        {
                            foreach (var subtype in entity.AllSubtypes.Values)
                            {
                                if (!subtype.Abstract)
                                {

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("    protected ");

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated new");

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated(");

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 1025 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" stateEventId) {\r\n        return new Abstract");

//line default
//line hidden


//line 1026 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1026 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.Simple");

//line default
//line hidden


//line 1026 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1026 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateCreated(stateEventId);\r\n    }\r\n\r\n    protected ");

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched new");

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched(");

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 1029 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" stateEventId) {\r\n        return new Abstract");

//line default
//line hidden


//line 1030 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1030 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.Simple");

//line default
//line hidden


//line 1030 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1030 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched(stateEventId);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1033 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                            }
                        }

//line default
//line hidden


//line 1038 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!entity.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////
                            if (!entity.Abstract)
                            {

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("    protected ");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event.");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("State");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventNamedDeletedOrRemoved));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" new");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("State");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventNamedDeletedOrRemoved));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 1046 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" stateEventId) {\r\n        return new Abstract");

//line default
//line hidden


//line 1047 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1047 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("Event.Simple");

//line default
//line hidden


//line 1047 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForEvent()));

//line default
//line hidden


//line 1047 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("State");

//line default
//line hidden


//line 1047 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventNamedDeletedOrRemoved));

//line default
//line hidden


//line 1047 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(stateEventId);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1050 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

                            if (entity.IsPolymorphic())
                            {
                                foreach (var subtype in entity.AllSubtypes.Values)
                                {
                                    if (!subtype.Abstract)
                                    {

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("    protected ");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Event.");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("State");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventNamedDeletedOrRemoved));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(" new");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("State");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventNamedDeletedOrRemoved));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("(");

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetStateEventIdValueObjectName()));

//line default
//line hidden


//line 1060 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(" stateEventId) {\r\n        return new Abstract");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Event.Simple");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("State");

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventNamedDeletedOrRemoved));

//line default
//line hidden


//line 1061 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("(stateEventId);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1064 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    }
                                }
                            }

//line default
//line hidden


//line 1069 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            // /////////////////////////////////////////////////////
                        } // end if (!entity.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////

                        ////////////////
                    } //if (!entity.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 1078 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

//line default
//line hidden


//line 1081 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("\r\n");

//line default
//line hidden


//line 1082 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                var allEntityIncludingAggregateRoot = new List<EntityBase>();
                allEntityIncludingAggregateRoot.Add(Aggregate);
                foreach (var entity in Aggregate.GetAllNestedEntities().Values)
                {
                    allEntityIncludingAggregateRoot.Add(entity);
                }
                foreach (var currentEntity in allEntityIncludingAggregateRoot)
                {
                    var propertiesWithCommandType = currentEntity.GetSelfAndAllSubtypePropertiesWithCommandType();//currentEntity.GetPropertiesWithCommandType();

                    foreach (var p in propertiesWithCommandType)
                    {
                        var commandHandlerName = currentEntity.GetPropertyCommandHandlerName(p.GetCommandProperty().Name);
                        //currentEntity.Name + p.GetCommandProperty().Name + "CommandHandler";
                        // ////////////////////////////
                        var cmdTypes = new string[] { "MergePatch", "Create" };
                        var eventTypes = new string[] { "MergePatched", "Created" };
                        var cmdTypeConsts = new string[] { "MERGE_PATCH", "CREATE" };
                        var cmdContents = new string[] { "c.get" + p.CommandName + "()", "null" };
                        //var cmdTypes = new string[] {"Create"};
                        //var eventTypes = new string[] {"Created"};
                        //var cmdTypeConsts = new string[] {"CREATE"};
                        // ////////////////////////////
                        var pCommandType = BoundedContext.GetJavaType(p.CommandType);
                        for (int i = 0; i < cmdTypes.Length; i++)
                        {
                            //
                            //pCmdContent = c.get// p.GetCommandProperty().Name //();
                            //

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    protected void new");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Name));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetCommandProperty().Name));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("CommandAndExecute(");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForCommand()));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Command.");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdTypes[i]));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.Name));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c, ");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForState()));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("State s, ");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetNameForEvent()));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventTypes[i]));

//line default
//line hidden


//line 1114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" e) {\r\n        PropertyCommandHandler<");

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("> pCommandHandler = this.get");

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandHandlerName));

//line default
//line hidden


//line 1115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("();\r\n        ");

//line default
//line hidden


//line 1116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetCommandProperty().JavaType()));

//line default
//line hidden


//line 1116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" pCmdContent = ");

//line default
//line hidden


//line 1116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdContents[i]));

//line default
//line hidden


//line 1116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(";\r\n        PropertyCommand<");

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("> pCmd = new AbstractPropertyCommand.SimplePropertyCommand<");

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(">();\r\n        pCmd.setContent(pCmdContent);\r\n        pCmd.setStateGetter(() -> s." +
                            "get");

//line default
//line hidden


//line 1119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n        pCmd.setStateSetter(p -> e.set");

//line default
//line hidden


//line 1120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(p));\r\n        pCmd.setOuterCommandType(CommandType.");

//line default
//line hidden


//line 1121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdTypeConsts[i]));

//line default
//line hidden


//line 1121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(");\r\n        pCmd.setContext(getState());\r\n        pCommandHandler.execute(pCmd);\r" +
                            "\n    }\r\n\r\n");

//line default
//line hidden


//line 1126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }

//line default
//line hidden


//line 1129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        bool simpleHandlerGenerated = false;

                        // ////////////////////////////////
                        if (p.StateMachine != null
                            && p.StateMachine.Transitions != null
                            && (String.Equals("string", pCommandType, StringComparison.InvariantCultureIgnoreCase)
                                    && String.Equals("string", p.JavaType(), StringComparison.InvariantCultureIgnoreCase)
                                    || !String.IsNullOrWhiteSpace(p.StateMachine.TriggerPropertyName)
                                )
                            )
                        {
                            simpleHandlerGenerated = true;
                            var getTriggerValueStr = "command.getContent()";
                            if (!String.IsNullOrWhiteSpace(p.StateMachine.TriggerPropertyName))
                            {
                                getTriggerValueStr = "command.getContent() == null ? null : command.getContent().get" + p.StateMachine.TriggerPropertyName + "()";
                            }

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("    public class Simple");

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandHandlerName));

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" implements PropertyCommandHandler<");

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("> {\r\n\r\n        public void execute(PropertyCommand<");

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("> command) {\r\n            String trigger = ");

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getTriggerValueStr));

//line default
//line hidden


//line 1151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(";\r\n");

//line default
//line hidden


//line 1152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            foreach (var t in p.StateMachine.Transitions)
                            {
                                string guard = t.GetTransitionJavaGuard();
                                if (!String.IsNullOrWhiteSpace(guard))
                                {
                                    guard = guard.Replace("{this}", String.Format("(({0}State)command.getContext())", currentEntity.Name));
                                }
                                string andGuardOrEmptyStr = !String.IsNullOrWhiteSpace(guard) ? (" && " + guard) : String.Empty;

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("            if (Objects.equals(");

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaStringLiteral((string)t.SourceState)));

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", command.getStateGetter().get()) && Objects.equals(");

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaStringLiteral((string)t.Trigger)));

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", trigger)");

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(andGuardOrEmptyStr));

//line default
//line hidden


//line 1162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(") {\r\n                command.getStateSetter().accept(");

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaStringLiteral((string)t.TargetState)));

//line default
//line hidden


//line 1163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(");\r\n                return;\r\n            }\r\n");

//line default
//line hidden


//line 1166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

//line default
//line hidden


//line 1169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("            throw new IllegalArgumentException(String.format(\"State: %1$s, comman" +
                            "d: %2$s\", command.getStateGetter().get(), trigger));\r\n        }\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                        // //////////////////////////////////////////////
                        // 总是优先从 set 过的 field 中获取属性的值？
                        // //////////////////////////////////////////////

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("    private PropertyCommandHandler<");

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("> ");

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(commandHandlerName)));

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(!simpleHandlerGenerated ? String.Empty : " = new Simple" + commandHandlerName + "()"));

//line default
//line hidden


//line 1179 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(";\r\n\r\n    public void set");

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandHandlerName));

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(PropertyCommandHandler<");

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1181 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("> h) {\r\n        this.");

//line default
//line hidden


//line 1182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(commandHandlerName)));

//line default
//line hidden


//line 1182 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" = h;\r\n    }\r\n\r\n    protected PropertyCommandHandler<");

//line default
//line hidden


//line 1185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 1185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("> get");

//line default
//line hidden


//line 1185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandHandlerName));

//line default
//line hidden


//line 1185 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("() {\r\n        if (this.");

//line default
//line hidden


//line 1186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(commandHandlerName)));

//line default
//line hidden


//line 1186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" != null) {\r\n            return this.");

//line default
//line hidden


//line 1187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetPrivateFieldName(commandHandlerName)));

//line default
//line hidden


//line 1187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(";\r\n        }\r\n        Object h = ApplicationContext.current.get(\"");

//line default
//line hidden


//line 1189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandHandlerName));

//line default
//line hidden


//line 1189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("\");\r\n        if (h instanceof PropertyCommandHandler) {\r\n            return (Prop" +
                        "ertyCommandHandler<");

//line default
//line hidden


//line 1191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(", ");

//line default
//line hidden


//line 1191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaType()));

//line default
//line hidden


//line 1191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(">) h;\r\n        }\r\n        return null;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 1196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                }


//line default
//line hidden


//line 1201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("    public static class Simple");

//line default
//line hidden


//line 1201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 1201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Aggregate extends Abstract");

//line default
//line hidden


//line 1201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 1201 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Aggregate {\r\n        public Simple");

//line default
//line hidden


//line 1202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 1202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("Aggregate(");

//line default
//line hidden


//line 1202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 1202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("State state) {\r\n            super(state);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 1206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                var allEntitiyBaseObjects = new List<EntityBase>();
                allEntitiyBaseObjects.Add(Aggregate);
                allEntitiyBaseObjects.AddRange(Aggregate.GetAllNestedEntities().Values);

                foreach (var e in allEntitiyBaseObjects)
                {
                    EntityBase entityBase = e;
                    var ms = entityBase.GetSelfAndAllSubtypeMethods();
                    if (ms != null && ms.Count > 0)
                    {
                        Entity entity = (entityBase is Entity) ? (Entity)entityBase : null;

                        foreach (var method in ms)
                        {
                            // ///////////////////////////////////////////
                            if (!method.IsReturnVoid()) { continue; }
                            // ///////////////////////////////////////////
                            if (method.IsReservedMethod()) { continue; }
                            if (method.NotInstanceMethod) { continue; }
                            string parametersString = null;
                            if (e is Aggregate)
                            {
                                parametersString = method.GetParametersStringExcludingAggregateId();
                            }
                            else
                            {
                                parametersString = entity.GetGlobalIdValueObject().Properties.Values.Skip(1)
                                    .Map(p => String.Format("{0} {1}", p.JavaType(), BoundedContext.GetParameterOrArgumentName(p.Name)))
                                    .ConcatWithSeparator(", ")
                                    + ", " + method.GetParametersStringExcludingEntityGlobalId();
                            }
                            var doMethodName = String.Format("do{0}", method.Name);
                            string idsArgumentsString = null;
                            if (e is Aggregate)
                            {
                                idsArgumentsString = null; //method.GetParametersStringExcludingAggregateId();
                            }
                            else
                            {
                                idsArgumentsString = entity.GetGlobalIdValueObject().Properties.Values.Skip(1)
                                    .Map(p => String.Format("{0}", BoundedContext.GetParameterOrArgumentName(p.Name)))
                                    .ConcatWithSeparator(", ");
                            }

//line default
//line hidden


//line 1245 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        @Override\r\n        public void ");

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersString));

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Commands.");

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 1246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" c) {\r\n");

//line default
//line hidden


//line 1247 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                            if (method.IsPropertyCommand)
                            {
                                var pCommandType = method.Parameters["Value"].JavaType();
                                if (entityBase is Aggregate)
                                {

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            ");

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched e = new");

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched(");

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.GetParameterName()));

//line default
//line hidden


//line 1255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", commandId, requesterId);\r\n            ");

//line default
//line hidden


//line 1256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 1256 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(e, value);\r\n            apply(e);\r\n");

//line default
//line hidden


//line 1258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                                else
                                {

                                    var eps = entity.GetOuterInnerEntityPairs();
                                    var lastEntity = eps.Last().Item2;
                                    for (int i = 0; i < eps.Count; i++)
                                    {
                                        var ps = eps[i];
                                        var outerEntity = ps.Item1;
                                        var innerEntity = ps.Item2;
                                        if (i == 0)
                                        {

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write("            ");

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write("Event.");

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write("StateMergePatched eventOf");

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(" = new");

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write("StateMergePatched(");

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.GetParameterName()));

//line default
//line hidden


//line 1273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            this.Write(", commandId, requesterId);\r\n");

//line default
//line hidden


//line 1274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                            //bfirst = false;
                                        }
                                        string innerEntityIdsArgsStr = lastEntity.GetGlobalIdValueObject().Properties.Values
                                                .Skip(1).Take(i + 1)
                                                .Map(p => String.Format("{0}", BoundedContext.GetParameterOrArgumentName(p.Name)))
                                                .ConcatWithSeparator(", ");


//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("            ");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Event.");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("StateMergePatched eventOf");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.Name));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(" = new");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("StateMergePatched(new ");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("(this.getState().get");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("(), ");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntityIdsArgsStr));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(", ");

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.GetParameterName()));

//line default
//line hidden


//line 1283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("));\r\n            eventOf");

//line default
//line hidden


//line 1284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(outerEntity.Name));

//line default
//line hidden


//line 1284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(".add");

//line default
//line hidden


//line 1284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.GetNameForEvent()));

//line default
//line hidden


//line 1284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("Event(eventOf");

//line default
//line hidden


//line 1284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntity.Name));

//line default
//line hidden


//line 1284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(");\r\n");

//line default
//line hidden


//line 1285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    }

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            ");

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(eventOf");

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(lastEntity.Name));

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", ");

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idsArgumentsString));

//line default
//line hidden


//line 1288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", value);\r\n            apply(eventOf");

//line default
//line hidden


//line 1289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(lastEntity.Name));

//line default
//line hidden


//line 1289 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(");\r\n");

//line default
//line hidden


//line 1290 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                                }

//line default
//line hidden


//line 1294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }
                            else
                            {
                                if (method.HasJavaVerificationAndMutationLogic())
                                {
                                    var verifyParameters = method.GetVerificationParameters();
                                    var verifyArgumentsStr = verifyParameters
                                        .Map(p => BoundedContext.GetParameterOrArgumentName(p.Name))
                                        .ConcatWithSeparator(", ");
                                    if (!String.IsNullOrWhiteSpace(verifyArgumentsStr)) { verifyArgumentsStr = verifyArgumentsStr + ", "; }
                                    var newEventArgsStr = method.GetAggregateMethodArgumentsString();

//line default
//line hidden


//line 1307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            try {\r\n                verify");

//line default
//line hidden


//line 1308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 1308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(verifyArgumentsStr));

//line default
//line hidden


//line 1308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("c);\r\n            } catch (Exception ex) {\r\n                throw new DomainError(" +
                                    "\"VerificationFailed\", ex);\r\n            }\r\n\r\n            Event e = new");

//line default
//line hidden


//line 1313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.GetEventName()));

//line default
//line hidden


//line 1313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(newEventArgsStr));

//line default
//line hidden


//line 1313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(");\r\n            apply(e);\r\n");

//line default
//line hidden


//line 1315 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                                else
                                {

//line default
//line hidden


//line 1320 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            throw new UnsupportedOperationException();\r\n");

//line default
//line hidden


//line 1321 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                            }

//line default
//line hidden


//line 1325 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        }\r\n\r\n");

//line default
//line hidden


//line 1327 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


                            if (method.IsPropertyCommand)
                            {
                                var pCommandType = method.Parameters["Value"].JavaType();

                                if (entityBase is Aggregate)
                                {

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        protected void ");

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched e, ");

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1336 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" value) {\r\n            ");

//line default
//line hidden


//line 1337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(doMethodName));

//line default
//line hidden


//line 1337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(value, s -> e.set");

//line default
//line hidden


//line 1337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.OriginalProperty.Name));

//line default
//line hidden


//line 1337 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(s));\r\n        }\r\n\r\n");

//line default
//line hidden


//line 1340 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                                else
                                {
                                    // 在聚合根与当前实体之间可能还存在其他实体……
                                    var idsParametersString = entity.GetGlobalIdValueObject().Properties.Values.Skip(1)
                                        .Map(p => String.Format("{0} {1}", p.JavaType(), BoundedContext.GetParameterOrArgumentName(p.Name)))
                                        .ConcatWithSeparator(", ");
                                    //var idsArgumentsString = entity.GetGlobalIdValueObject().Properties.Values.Skip(1)
                                    //.Map(p => String.Format("{0}", BoundedContext.GetParameterOrArgumentName(p.Name)))
                                    //.ConcatWithSeparator(", ");
                                    var eps = entity.GetOuterInnerEntityPairs();
                                    var lastEntity = eps.Last().Item2;

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        protected void ");

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(lastEntity.GetNameForEvent()));

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.");

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(lastEntity.GetNameForEvent()));

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateMergePatched eventOf");

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(lastEntity.Name));

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", ");

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idsParametersString));

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", ");

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1354 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(" value) {\r\n            ");

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(doMethodName));

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idsArgumentsString));

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", value, s -> eventOf");

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(lastEntity.Name));

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".set");

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.OriginalProperty.Name));

//line default
//line hidden


//line 1355 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(s));\r\n        }\r\n\r\n");

//line default
//line hidden


//line 1358 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }

//line default
//line hidden


//line 1361 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

//line default
//line hidden


//line 1364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            if (method.IsPropertyCommand)
                            {
                                //var doMethodName = String.Format("do{0}", method.Name);
                                var commandHandlerName = entityBase.GetPropertyCommandHandlerName(method.Name);
                                ////method name == original property commandName
                                var pCommandType = method.Parameters["Value"].JavaType();
                                var pJavaType = method.OriginalProperty.JavaType();
                                var pName = method.OriginalProperty.Name;
                                // ???
                                // reservedPropertyVersion.GetParameterOrArgumentName()
                                // //////////////////////////////////////////////////////////
                                string idsParametersString = null;
                                if (e is Aggregate)
                                {
                                    //idsParametersString = null;//method.GetParametersStringExcludingAggregateId();
                                }
                                else
                                {
                                    idsParametersString = entity.GetGlobalIdValueObject().Properties.Values.Skip(1)
                                        .Map(p => String.Format("{0} {1}", p.JavaType(), BoundedContext.GetParameterOrArgumentName(p.Name)))
                                        .ConcatWithSeparator(", ");
                                    //+ ", " + method.GetParametersStringExcludingEntityGlobalId();
                                }
                                // //////////////////////////////////////////////////////////


//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        protected void ");

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(doMethodName));

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(String.IsNullOrEmpty(idsParametersString) ? "" : idsParametersString + ", "));

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(" value, java.util.function.Consumer<");

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pJavaType));

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("> set");

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pName));

//line default
//line hidden


//line 1388 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(") {\r\n");

//line default
//line hidden


//line 1389 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                if (method.OriginalProperty.EntityBaseSubtype != null)
                                {

//line default
//line hidden


//line 1393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            if (!");

//line default
//line hidden


//line 1393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.GetDiscriminatorPropertyValueEqualsString("this.getState()", method.OriginalProperty.EntityBaseSubtype.Name)));

//line default
//line hidden


//line 1393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(") {\r\n                throw new UnsupportedOperationException(\"Incorrect subtype.\"" +
                                    ");\r\n            }\r\n");

//line default
//line hidden


//line 1396 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("            PropertyCommandHandler<");

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", ");

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pJavaType));

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("> pCommandHandler = this.get");

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandHandlerName));

//line default
//line hidden


//line 1399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("();\r\n            PropertyCommand<");

//line default
//line hidden


//line 1400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pCommandType));

//line default
//line hidden


//line 1400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(", ");

//line default
//line hidden


//line 1400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pJavaType));

//line default
//line hidden


//line 1400 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("> pCmd = new AbstractPropertyCommand.SimplePropertyCommand<>();\r\n            pCmd" +
                                ".setContent(value);\r\n");

//line default
//line hidden


//line 1402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                if (entityBase is Aggregate)
                                {

//line default
//line hidden


//line 1406 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            pCmd.setStateGetter(() -> this.getState().get");

//line default
//line hidden


//line 1406 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pName));

//line default
//line hidden


//line 1406 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("());\r\n");

//line default
//line hidden


//line 1407 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                                else
                                {

//line default
//line hidden


//line 1412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            pCmd.setStateGetter(() -> ");

//line default
//line hidden


//line 1412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetChainingEntityStateGetterInvokeString("this.getState()")));

//line default
//line hidden


//line 1412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".get");

//line default
//line hidden


//line 1412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pName));

//line default
//line hidden


//line 1412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("());\r\n");

//line default
//line hidden


//line 1413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }

//line default
//line hidden


//line 1416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("            pCmd.setStateSetter(set");

//line default
//line hidden


//line 1416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pName));

//line default
//line hidden


//line 1416 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(");\r\n            pCmd.setOuterCommandType(\"");

//line default
//line hidden


//line 1417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 1417 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("\");\r\n            pCmd.setContext(getState());\r\n            pCommandHandler.execut" +
                                "e(pCmd);\r\n        }\r\n\r\n");

//line default
//line hidden


//line 1422 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

//line default
//line hidden


//line 1425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                    }
                }

//line default
//line hidden


//line 1430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                foreach (var m in Aggregate.GetJavaVerificationLogicMethods())
                {
                    var verifyParameters = m.GetVerificationParameters();
                    var verifyParametersStr = m.GetVerificationParametersString(verifyParameters);
                    if (!String.IsNullOrWhiteSpace(verifyParametersStr)) { verifyParametersStr = verifyParametersStr + ", "; }

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        protected void verify");

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.Name));

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(verifyParametersStr));

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Commands.");

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.Name));

//line default
//line hidden


//line 1437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" c) {\r\n");

//line default
//line hidden


//line 1438 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    foreach (var p in verifyParameters)
                    {
                        var camelCasePN = BoundedContext.GetParameterOrArgumentName(p.Name);
                        if (p.Name != camelCasePN)
                        {

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("            ");

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaTypeInMutationLogicEvent()));

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" ");

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(" = ");

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(camelCasePN));

//line default
//line hidden


//line 1445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(";\r\n");

//line default
//line hidden


//line 1446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 1450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("\r\n            ");

//line default
//line hidden


//line 1451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetJavaVerificationLogicInvokeString()));

//line default
//line hidden


//line 1451 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("\r\n        }\r\n           \r\n\r\n");

//line default
//line hidden


//line 1455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

                // ////////////////////////////////////////////////
                foreach (var m in Aggregate.GetJavaStaticInvokingVerificationLogicMethods())
                {

//line default
//line hidden


//line 1462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        public interface ");

//line default
//line hidden


//line 1462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.Name));

//line default
//line hidden


//line 1462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Verification {\r\n            void verify(");

//line default
//line hidden


//line 1463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetJavaStaticVerificationMethodParametersString()));

//line default
//line hidden


//line 1463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n        }\r\n\r\n");

//line default
//line hidden


//line 1466 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

//line default
//line hidden


//line 1469 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                // ///////////////////////
                foreach (var m in Aggregate.GetJavaMutationLogicMethods())
                {
                    string parametersString = m.GetAggregateMethodParametersString();
                    var aggVerPN = Aggregate.BoundedContext.GetParameterOrArgumentName(m.GetAggregateVersionParameter().Name);

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        protected Abstract");

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" new");

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersString));

//line default
//line hidden


//line 1476 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(") {\r\n            ");

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" eventId = new ");

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetEventIdValueObjectName()));

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(getState().get");

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(), ");

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggVerPN));

//line default
//line hidden


//line 1477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n            Abstract");

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" e = new Abstract");

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(m.GetEventName()));

//line default
//line hidden


//line 1478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("();\r\n\r\n");

//line default
//line hidden


//line 1480 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    foreach (var p in m.GetEventPropertiesExcludingAggregateIdAndVersionAndCommandIdAndRequesterId())
                    {
                        var parameterName = BoundedContext.GetParameterOrArgumentName(p.Name);

//line default
//line hidden


//line 1485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("            e.set");

//line default
//line hidden


//line 1485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 1485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parameterName));

//line default
//line hidden


//line 1485 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(");\r\n");

//line default
//line hidden


//line 1486 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                    var cmdIdPN = BoundedContext.GetParameterOrArgumentName(m.GetCommandIdParameter().Name);
                    var requesterIdPN = BoundedContext.GetParameterOrArgumentName(m.GetRequesterIdParameter().Name);


//line default
//line hidden


//line 1492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("\r\n            e.set");

//line default
//line hidden


//line 1493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 1493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cmdIdPN));

//line default
//line hidden


//line 1493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n            e.set");

//line default
//line hidden


//line 1494 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 1494 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1494 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdPN));

//line default
//line hidden


//line 1494 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n            e.set");

//line default
//line hidden


//line 1495 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 1495 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1495 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetTimestampServiceNowInvokeString()));

//line default
//line hidden


//line 1495 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n\r\n            e.set");

//line default
//line hidden


//line 1497 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetEventIdPropertyName()));

//line default
//line hidden


//line 1497 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(eventId);\r\n            return e;\r\n        }\r\n\r\n");

//line default
//line hidden


//line 1501 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }
                // ///////////////////////

//line default
//line hidden


//line 1505 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("    }\r\n\r\n}\r\n\r\n");

//line default
//line hidden


//line 1509 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }

            private void WriteSetEntityStateCreatedOrMergePatchedProperties(EntityBase entityBase, string eventObjectName, string commandObjectName, string stateObjectName, bool isCreationCommand)
            {
                //var propertiesWithCommandType = entityBase.GetPropertiesWithCommandType();
                foreach (Property p in entityBase.Properties.Values)
                {
                    if (p.IsDerived) { continue; }
                    if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !entityBase.ReservedProperties.NoActive)
                    {
                        if (!p.HasCommandType())//(!propertiesWithCommandType.ContainsKey(p.Name))
                        {
                            IList<Property> subtypePS = entityBase.GetSubtypePropertiesWithCommandType(p.Name);
                            if (subtypePS.Count == 0)
                            {
                                // //////////////////////////////////////////////
                                if (!p.IsValueObjectCollectionProperty())
                                {

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        ");

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".set");

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".get");

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1538 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("());\r\n");

//line default
//line hidden


//line 1539 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                                else
                                {

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        ((Abstract");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityBase.GetNameForEvent()));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("Event.Abstract");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityBase.GetNameForEvent()));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("StateEvent)");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(").set");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".get");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("() == null ? null : java.util.Arrays.stream(");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(".get");

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1542 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("()).collect(java.util.stream.Collectors.toSet()));\r\n");

//line default
//line hidden


//line 1543 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }
                                // //////////////////////////////////////////////

                            }
                            else
                            {

                                foreach (var subtypeProp in subtypePS)
                                {

//line default
//line hidden


//line 1552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("        if (");

//line default
//line hidden


//line 1552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityBase.GetDiscriminatorPropertyValueEqualsString(commandObjectName, subtypeProp.EntityBaseSubtype.Name)));

//line default
//line hidden


//line 1552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(") {\r\n");

//line default
//line hidden


//line 1553 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    if (!isCreationCommand)
                                    {

//line default
//line hidden


//line 1557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("            if (");

//line default
//line hidden


//line 1557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(".get");

//line default
//line hidden


//line 1557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtypeProp.GetCommandProperty().Name));

//line default
//line hidden


//line 1557 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                        this.Write("() != null)\r\n");

//line default
//line hidden


//line 1558 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    }

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("            new");

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityBase.Name));

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtypeProp.GetCommandProperty().Name));

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write("CommandAndExecute(");

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", ");

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjectName));

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(", ");

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                    this.Write(");\r\n        }\r\n");

//line default
//line hidden


//line 1563 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                }

                            }

                        }
                        else
                        {

                            if (!isCreationCommand)
                            {

//line default
//line hidden


//line 1573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("        if (");

//line default
//line hidden


//line 1573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(".get");

//line default
//line hidden


//line 1573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetCommandProperty().Name));

//line default
//line hidden


//line 1573 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                                this.Write("() != null)\r\n");

//line default
//line hidden


//line 1574 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            }

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        new");

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityBase.Name));

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetCommandProperty().Name));

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("CommandAndExecute(");

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateObjectName));

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(", ");

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1577 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(");\r\n");

//line default
//line hidden


//line 1578 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                    }
                }
            }

            private void WriteSetEntityStateCreatedOrMergePatchedProperties(EntityBaseSubtype subtype, string eventObjectName, string commandObjectName, string stateObjectName)
            {
                //var propertiesWithCommandType = entityBase.GetPropertiesWithCommandType();
                foreach (Property p in subtype.GetAllProperties())
                {
                    if (p.IsDerived) { continue; }
                    //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !subtype.OuterEntity.ReservedProperties.NoActive)
                    {
                        //if (!propertiesWithCommandType.ContainsKey(p.Name))
                        //{
                        if (!p.IsValueObjectCollectionProperty())
                        {

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".set");

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".get");

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1600 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("());\r\n");

//line default
//line hidden


//line 1601 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ((Abstract");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Event.Abstract");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(subtype.GetNameForEvent()));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("StateEvent)");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(").set");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".get");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("() == null ? null : java.util.Arrays.stream(");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".get");

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1604 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("()).collect(java.util.stream.Collectors.toSet()));\r\n");

//line default
//line hidden


//line 1605 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                        //}
                    }
                }

            }


            private void WriteSetEntityStateMergePatchedPropertyRemovedProperties(EntityBase entityBase, string eventObjectName, string commandObjectName)
            {
                //var propertiesWithCommandType = entityBase.GetPropertiesWithCommandType();
                foreach (Property p in entityBase.Properties.Values)
                {
                    if (p.IsDerived) { continue; }
                    if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !entityBase.ReservedProperties.NoActive)
                    {
                        if (!entityBase.HasSelfOrSubtypePropertyCommandType(p.Name))//if (!propertiesWithCommandType.ContainsKey(p.Name))
                        {

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("        ");

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".setIsProperty");

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Removed(");

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(".getIsProperty");

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                            this.Write("Removed());\r\n");

//line default
//line hidden


//line 1630 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        }
                        else
                        {
                            // do nothing
                        }
                    }
                }
            }

            private void WriteSetEntityStateMergePatchedPropertyRemovedProperties(EntityBaseSubtype subtype, string eventObjectName, string commandObjectName)
            {
                //var propertiesWithCommandType = entityBase.GetPropertiesWithCommandType();
                foreach (Property p in subtype.GetAllRemovableProperties())
                {
                    if (p.IsDerived) { continue; }
                    //if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }
                    //if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    //if (!p.IsReservedProperty || p.IsReservedPropertyActive && !Aggregate.ReservedProperties.NoActive) 
                    //{
                    //    if (!propertiesWithCommandType.ContainsKey(p.Name))
                    //    {

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjectName));

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".setIsProperty");

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Removed(");

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandObjectName));

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".getIsProperty");

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 1651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("Removed());\r\n");

//line default
//line hidden


//line 1652 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    //    } else {
                    //        // do nothing
                    //    }
                    //}
                }
            }

            private void WriteSetEntityStateEventCreatedByRequesterId(EntityBase currentEntity, string entityStateEventName, string requesterIdName)
            {
                var entityCreatedByType = currentEntity.Properties[currentEntity.ReservedProperties.CreatedBy].Type;
                var commandCreatedByType = BoundedContext.DefaultUserIdType;
                if (entityCreatedByType == commandCreatedByType)
                {

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateEventName));

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".set");

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdName));

//line default
//line hidden


//line 1667 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n");

//line default
//line hidden


//line 1668 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }
                else if (String.Equals("string", entityCreatedByType, StringComparison.InvariantCultureIgnoreCase))
                {

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateEventName));

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".set");

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(String.valueOf(");

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdName));

//line default
//line hidden


//line 1671 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("));\r\n");

//line default
//line hidden


//line 1672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }
                else if (String.Equals("int", entityCreatedByType, StringComparison.InvariantCultureIgnoreCase) || String.Equals("integer", entityCreatedByType, StringComparison.InvariantCultureIgnoreCase))
                {

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateEventName));

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".set");

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(Integer.parseInt(");

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdName));

//line default
//line hidden


//line 1675 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("));\r\n");

//line default
//line hidden


//line 1676 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }
                else if (String.Equals("long", entityCreatedByType, StringComparison.InvariantCultureIgnoreCase) || String.Equals("int64", entityCreatedByType, StringComparison.InvariantCultureIgnoreCase))
                {

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateEventName));

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".set");

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(Long.parseLong(");

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdName));

//line default
//line hidden


//line 1679 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("));\r\n");

//line default
//line hidden


//line 1680 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }
                else
                {


//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateEventName));

//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(".set");

//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdName));

//line default
//line hidden


//line 1684 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(");\r\n");

//line default
//line hidden


//line 1685 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("        ");

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityStateEventName));

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(".set");

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(currentEntity.GetTimestampServiceNowInvokeString()));

//line default
//line hidden


//line 1688 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                this.Write(");\r\n");

//line default
//line hidden


//line 1689 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"


            }

            private void WriteEntityStateCreatedBalanceLocalVariantsInitialization(EntityBase entityBase)
            {
                if (entityBase.IsAccountEntity())
                {
                    foreach (var account in entityBase.Accounts.Values)
                    {
                        var balanceProperty = account.GetAccountBalanceProperty();

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(balanceProperty.JavaType()));

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(account.BalancePropertyName)));

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" = ");

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(account.GetAccountingQuantityType().JavaZeroLogic()));

//line default
//line hidden


//line 1701 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(";\r\n");

//line default
//line hidden


//line 1702 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                }
            }

            private void WriteEntityStateMergePatchedBalanceLocalVariantsInitialization(EntityBase entityBase)
            {
                if (entityBase.IsAccountEntity())
                {
                    foreach (var account in entityBase.Accounts.Values)
                    {
                        var balanceProperty = account.GetAccountBalanceProperty();

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(balanceProperty.JavaType()));

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" ");

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(account.BalancePropertyName)));

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(" = this.state.get");

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(account.BalancePropertyName));

//line default
//line hidden


//line 1715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("();\r\n");

//line default
//line hidden


//line 1716 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                }
            }

            private void WriteSetEntityStateEventBalanceProperties(EntityBase entityBase, string eventObjName)
            {
                if (entityBase.IsAccountEntity())
                {
                    foreach (var account in entityBase.Accounts.Values)
                    {
                        var balanceProperty = account.GetAccountBalanceProperty();

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(".set");

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(account.BalancePropertyName));

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(account.BalancePropertyName)));

//line default
//line hidden


//line 1729 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                        this.Write(");\r\n");

//line default
//line hidden


//line 1730 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    }
                }
            }

            private void WriteAddBalanceLocalVariantsByEntryEntityCreatedEvents(Entity accountEntryEntity, string createdEventName)
            {
                foreach (var account in Aggregate.GetAccountsByEntryEntityName(accountEntryEntity.Name))
                {
                    string addFormat = account.GetAccountingQuantityType().JavaAddLogic();
                    var firstAddend = BoundedContext.GetCamelCaseName(account.BalancePropertyName);
                    var sencondAddend = (createdEventName + ".get" + account.EntryAmountPropertyName + "()");
                    string doAddLogicStr = null;
                    if (addFormat.Contains("{0}"))
                    {
                        doAddLogicStr = String.Format(addFormat, firstAddend, sencondAddend);
                    }
                    else
                    {
                        doAddLogicStr = addFormat.Replace("{fst}", firstAddend).Replace("{snd}", sencondAddend);
                    }

//line default
//line hidden


//line 1752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write("            ");

//line default
//line hidden


//line 1752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCamelCaseName(account.BalancePropertyName)));

//line default
//line hidden


//line 1752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 1752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(doAddLogicStr));

//line default
//line hidden


//line 1752 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                    this.Write(";\r\n");

//line default
//line hidden


//line 1753 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractAggregateTemplate.tt"

                }
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"


        public class AggregateAbstractApplicationServiceTemplate : CSharpTemplate
        {

            Aggregate Aggregate { get; set; }

            BoundedContext BoundedContext { get { return Aggregate.BoundedContext; } }

            public AggregateAbstractApplicationServiceTemplate(Aggregate aggregate)
            {
                this.Aggregate = aggregate;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = Aggregate.GetUsingClassNames("State", String.Empty);
                var aggregateIdGeneratorPrivateFieldName = BoundedContext.GetPrivateFieldName(Aggregate.Name + "IdGenerator");
                bool creationWithoutIdEnabled = Aggregate.GetCreationWithoutIdEnabled();

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(";\r\n\r\nimport java.util.*;\r\nimport java.util.function.Consumer;\r\nimport org.dddml.s" +
                "upport.criterion.Criterion;\r\n");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(";\r\n");

//line default
//line hidden


//line 39 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(".*;\r\n\r\npublic abstract class Abstract");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("ApplicationService implements ");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("ApplicationService\r\n{\r\n");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                var reservedPropertyVersion = Aggregate.Properties[Aggregate.ReservedProperties.Version];

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (!Aggregate.IsNoEventSourcing())
                {

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("\r\n    private EventStore eventStore;\r\n\r\n    protected EventStore getEventStore()\r" +
                    "\n    {\r\n        return eventStore;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    private ");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("StateRepository stateRepository;\r\n\r\n    protected ");

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("StateRepository getStateRepository() {\r\n        return stateRepository;\r\n    }\r\n\r" +
                "\n    private ");

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("StateQueryRepository stateQueryRepository;\r\n\r\n");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                // ///////////////////////////////////
                var idGeneratorParameterString = creationWithoutIdEnabled ?
                    ", IdGenerator<" + Aggregate.Id.JavaType() + ", " + Aggregate.GetNameForCommand() + "Command.Create" + Aggregate.GetNameForCommand() + ", " + Aggregate.Name + "State> idGenerator" : String.Empty;

                if (creationWithoutIdEnabled)
                {

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    private IdGenerator<");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.Create");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> ");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateIdGeneratorPrivateFieldName));

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(";\r\n\r\n    protected IdGenerator<");

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.Create");

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", ");

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 82 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> getIdGenerator() {\r\n        return ");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateIdGeneratorPrivateFieldName));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(";\r\n    }\r\n");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    protected ");

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 88 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("StateQueryRepository getStateQueryRepository() {\r\n        return stateQueryReposi" +
                "tory;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 92 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!Aggregate.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    private AggregateEventListener<");

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate, ");

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 97 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> aggregateEventListener;\r\n\r\n    public AggregateEventListener<");

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate, ");

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 99 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> getAggregateEventListener() {\r\n        return aggregateEventListener;\r\n   " +
                    " }\r\n\r\n    public void setAggregateEventListener(AggregateEventListener<");

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate, ");

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> eventListener) {\r\n        this.aggregateEventListener = eventListener;\r\n  " +
                    "  }\r\n\r\n");

//line default
//line hidden


//line 107 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (!Aggregate.IsNoEventSourcing())
                {

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public Abstract");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("ApplicationService(EventStore eventStore, ");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateRepository stateRepository, ");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateQueryRepository stateQueryRepository");

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idGeneratorParameterString));

//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(") {\r\n        this.eventStore = eventStore;\r\n        this.stateRepository = stateR" +
                    "epository;\r\n        this.stateQueryRepository = stateQueryRepository;\r\n");

//line default
//line hidden


//line 120 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    if (creationWithoutIdEnabled)
                    {

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        this.");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateIdGeneratorPrivateFieldName));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(" = idGenerator;\r\n");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }

//line default
//line hidden


//line 128 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public Abstract");

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("ApplicationService(");

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateRepository stateRepository, ");

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateQueryRepository stateQueryRepository");

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idGeneratorParameterString));

//line default
//line hidden


//line 135 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(") {\r\n        this.stateRepository = stateRepository;\r\n        this.stateQueryRepo" +
                    "sitory = stateQueryRepository;\r\n");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    if (creationWithoutIdEnabled)
                    {

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        this.");

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateIdGeneratorPrivateFieldName));

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(" = idGenerator;\r\n");

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }

//line default
//line hidden


//line 146 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (creationWithoutIdEnabled)
                {

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" createWithoutId(");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.Create");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" c) {\r\n        ");

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" idObj = getIdGenerator().generateId(c);\r\n        ");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State state = getStateRepository().get(idObj, true);\r\n        if (state != null) " +
                    "{\r\n");

//line default
//line hidden


//line 159 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    if (Aggregate.Immutable)
                    {

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("            if (getIdGenerator().equals(c, state)) {\r\n                return stat" +
                        "e.get");

//line default
//line hidden


//line 164 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 164 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("();\r\n            }\r\n\r\n");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }
                    else
                    {
                        //
                    }

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(@"            if (getIdGenerator().isArbitraryIdEnabled()) {
                idObj = getIdGenerator().getNextId();
            } else {
                throw DomainError.named(""instanceExist"", ""the instance already exist, Id: %1$s , aggreate name: %2$s "", idObj, """);

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("\");\r\n            }\r\n        }\r\n        c.set");

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 178 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(idObj);\r\n        when(c);\r\n        return idObj;\r\n   \r\n    }\r\n\r\n");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    public void when(");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("Command.Create");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(" c) {\r\n");

//line default
//line hidden


//line 188 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!Aggregate.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        update(c, ar -> ar.create(c));\r\n");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                }
                else
                { //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        update(c, s -> {\r\n        // //////////////////////////\r\n        throwOnC" +
                    "oncurrencyConflict(s, c);\r\n");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    foreach (Property p in Aggregate.GetPropertiesSetByStateCreatedEvent())
                    {
                        var getPropValueFromCmd = "c.get" + p.Name + "()";
                        if (p.IsCollectionProperty) { getPropValueFromCmd = "new HashSet<>(Arrays.asList(c.get" + p.Name + "()))"; }
                        if (!String.IsNullOrWhiteSpace(p.JavaDefaultLogic()))
                        {

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("        if(c.get");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("() != null) { ((");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State.Sql");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State)s).set");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getPropValueFromCmd));

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("); }\r\n");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("        ((");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State.Sql");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State)s).set");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getPropValueFromCmd));

//line default
//line hidden


//line 216 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(");\r\n");

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        }
                    }
                    //聚合内的实体可能会软删除后重新创建，只是简单地重置 Deleted 就好？

                    // /////////////////////////////////////////////////////
                    if (!(Aggregate.ReservedProperties.NoDeleted || Aggregate.IsImmutableOrOuterEntityImmutable()))
                    {
                        // /////////////////////////////////////////////////////


//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        ((");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Sql");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State)s).set");

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Deleted));

//line default
//line hidden


//line 228 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(false);\r\n");

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!EntityBase.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        ((");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State.Sql");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State)s).set");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(c.get");

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 234 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("());\r\n        ((");

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State.Sql");

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State)s).set");

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetTimestampServiceNowInvokeString()));

//line default
//line hidden


//line 235 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(");\r\n        ((");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State.Sql");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State)s).set");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(c.get");

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 236 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("());\r\n        // //////////////////////////\r\n        });\r\n");

//line default
//line hidden


//line 239 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                ////////////////
                if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 252 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public void when(");

//line default
//line hidden


//line 252 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 252 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.MergePatch");

//line default
//line hidden


//line 252 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 252 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" c) {\r\n");

//line default
//line hidden


//line 253 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                    if (!Aggregate.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        update(c, ar -> ar.mergePatch(c));\r\n");

//line default
//line hidden


//line 259 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    }
                    else
                    { //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                      /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        update(c, s -> {\r\n        // //////////////////////////////////\r\n        " +
                        "throwOnConcurrencyConflict(s, c);\r\n");

//line default
//line hidden


//line 267 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        foreach (Property p in Aggregate.GetPropertiesSetByStateCreatedEvent())
                        {
                            var getPropValueFromCmd = "c.get" + p.Name + "()";
                            if (p.IsCollectionProperty) { getPropValueFromCmd = "new HashSet<>(Arrays.asList(c.get" + p.Name + "()))"; }

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("        if (c.get");

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("() == null) {\r\n            if (c.getIsProperty");

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("Removed() != null && c.getIsProperty");

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 274 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("Removed()) {\r\n                ((");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State.Sql");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State)s).set");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("(null);\r\n            }\r\n        } else {\r\n            ((");

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State.Sql");

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("State)s).set");

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("(");

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getPropValueFromCmd));

//line default
//line hidden


//line 278 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(");\r\n        }\r\n");

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        }

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        ((");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Sql");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State)s).set");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.UpdatedBy));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(c.get");

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetRequesterIdName()));

//line default
//line hidden


//line 283 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("());\r\n        ((");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Sql");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State)s).set");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.UpdatedAt));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetTimestampServiceNowInvokeString()));

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(");\r\n        ((");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Sql");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State)s).set");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(c.get");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("());\r\n        // //////////////////////////////////\r\n        });\r\n");

//line default
//line hidden


//line 288 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                      /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 293 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 295 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    // /////////////////////////////////////////////////////
                    if (!Aggregate.ReservedProperties.NoDeleted)
                    {
                        // /////////////////////////////////////////////////////

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("    public void when(");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 301 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(" c) {\r\n");

//line default
//line hidden


//line 302 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        /////////////////////////////////////////////////////////////
                        if (!Aggregate.IsAbsolutelyNoEventSourcing())
                        {
                            /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 307 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("        update(c, ar -> ar.delete(c));\r\n");

//line default
//line hidden


//line 308 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        }
                        else
                        { //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                          /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 313 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("        update(c, s -> {\r\n        throwOnConcurrencyConflict(s, c);\r\n        // /" +
                            "//////////////////////////////////\r\n        //todo\r\n        // /////////////////" +
                            "//////////////////\r\n        });\r\n");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            /////////////////////////////////////////////////////////////
                        } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                          /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 324 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        // /////////////////////////////////////////////////////
                    } // end if (!Aggregate.ReservedProperties.NoDeleted)
                      // /////////////////////////////////////////////////////

                    ////////////////
                } //if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 335 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"


                var allEntitiyBaseObjects = new List<EntityBase>();
                allEntitiyBaseObjects.Add(Aggregate);
                allEntitiyBaseObjects.AddRange(Aggregate.GetAllNestedEntities().Values);

                foreach (var e in allEntitiyBaseObjects)
                {
                    EntityBase entityBase = e;
                    var ms = entityBase.GetSelfAndAllSubtypeMethods();
                    if (ms != null && ms.Count > 0)
                    {
                        Entity entity = (entityBase is Entity) ? (Entity)entityBase : null;

                        foreach (var method in ms)
                        {
                            if (method.IsReservedMethod()) { continue; }
                            string argStr = null;
                            if (e is Aggregate)
                            {
                                argStr = method.GetArgumentsStringExcludingAggregateId("c.");
                            }
                            else
                            {
                                //string aggregateStateName = "ar.State";
                                string globalIdName = "c.get" + method.Parameters.EntityGlobalIdParameter.Name + "()";
                                string idArgsStr = entity.GetGlobalIdValueObject().Properties.Values.Skip(1)
                                    .Map(p => globalIdName + ".get" + p.Name + "()")
                                    .ConcatWithSeparator(", ");
                                var sb = new StringBuilder();
                                sb.Append(idArgsStr);
                                sb.Append(", ");
                                sb.Append(method.GetArgumentsStringExcludingEntityGlobalId("c."));
                                argStr = sb.ToString();
                            }

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("    public ");

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.GetReturnTypeString()));

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(" when(");

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("Commands.");

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 368 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(" c) {\r\n");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            if (!method.NotInstanceMethod)
                            {
                                //注意：目前实例方法并不支持有返回值！
                                //也许可以考虑后面允许在 DDDML 中支持设置返回值逻辑（resultLogic）？

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                                this.Write("        update(c, ar -> ar.");

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.JavaName()));

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                                this.Write("(");

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(argStr));

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                                this.Write(", c));\r\n");

//line default
//line hidden


//line 376 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            }
                            else
                            {

//line default
//line hidden


//line 381 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                                this.Write("        throw new UnsupportedOperationException();\r\n");

//line default
//line hidden


//line 382 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            }

//line default
//line hidden


//line 385 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 387 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        }
                    }
                }

//line default
//line hidden


//line 392 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    public ");

//line default
//line hidden


//line 392 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 392 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("State get(");

//line default
//line hidden


//line 392 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 392 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(" id) {\r\n");

//line default
//line hidden


//line 393 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                var returnNullObject = false;
                if (Aggregate.GetApplicationServiceReturnNullObject())
                {
                    returnNullObject = true;
                }
                var nullAllowed = !returnNullObject;

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("        ");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("State state = getStateRepository().get(id, ");

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nullAllowed ? "true" : "false"));

//line default
//line hidden


//line 401 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(");\r\n        return state;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 405 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                var stateTypeParamAndArgStrPairs = new Tuple<string, string>[] {
                new Tuple<string, string>(String.Empty, String.Empty)
            };
                if (Aggregate.IsPolymorphic())
                {
                    stateTypeParamAndArgStrPairs = new Tuple<string, string>[] {
                new Tuple<string, string>(String.Empty, String.Empty),
                new Tuple<string, string>(String.Format(@"Class<? extends {0}State> stateType, ", Aggregate.Name ), "stateType, ")
            };
                }
                foreach (var stateTypeParamAndArgStrPair in stateTypeParamAndArgStrPairs)
                {
                    var stateTypeParamString = stateTypeParamAndArgStrPair.Item1;
                    var stateTypeArgString = stateTypeParamAndArgStrPair.Item2;

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public Iterable<");

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> getAll(");

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 421 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Integer firstResult, Integer maxResults) {\r\n        return getStateQueryRepositor" +
                    "y().getAll(");

//line default
//line hidden


//line 422 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeArgString));

//line default
//line hidden


//line 422 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("firstResult, maxResults);\r\n    }\r\n\r\n    public Iterable<");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> get(");

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 425 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter, List<String> orders, Integer firstRes" +
                    "ult, Integer maxResults) {\r\n        return getStateQueryRepository().get(");

//line default
//line hidden


//line 426 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeArgString));

//line default
//line hidden


//line 426 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("filter, orders, firstResult, maxResults);\r\n    }\r\n\r\n    public Iterable<");

//line default
//line hidden


//line 429 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 429 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> get(");

//line default
//line hidden


//line 429 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 429 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Criterion filter, List<String> orders, Integer firstResult, Integer maxResults) {" +
                    "\r\n        return getStateQueryRepository().get(");

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeArgString));

//line default
//line hidden


//line 430 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("filter, orders, firstResult, maxResults);\r\n    }\r\n\r\n    public Iterable<");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> getByProperty(");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("String propertyName, Object propertyValue, List<String> orders, Integer firstResu" +
                    "lt, Integer maxResults) {\r\n        return getStateQueryRepository().getByPropert" +
                    "y(");

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeArgString));

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("propertyName, propertyValue, orders, firstResult, maxResults);\r\n    }\r\n\r\n    publ" +
                    "ic long getCount(");

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 437 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter) {\r\n        return getStateQueryReposi" +
                    "tory().getCount(");

//line default
//line hidden


//line 438 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeArgString));

//line default
//line hidden


//line 438 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("filter);\r\n    }\r\n\r\n    public long getCount(");

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeParamString));

//line default
//line hidden


//line 441 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Criterion filter) {\r\n        return getStateQueryRepository().getCount(");

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateTypeArgString));

//line default
//line hidden


//line 442 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("filter);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (!Aggregate.IsNoEventSourcing())
                {

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Event getEvent(");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", long version) {\r\n        ");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Event e = (");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Event)getEventStore().getEvent(toEventStoreAggregateId(");

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 453 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("), version);\r\n        if (e != null) {\r\n            ((");

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Event.Sql");

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Event)e).set");

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetEventReadOnlyPropertyName()));

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(true); \r\n        } else if (version == -1) {\r\n            return getEvent(");

//line default
//line hidden


//line 457 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 457 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", 0);\r\n        }\r\n        return e;\r\n    }\r\n\r\n    public ");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State getHistoryState(");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", long version) {\r\n        EventStream eventStream = getEventStore().loadEventStr" +
                    "eam(Abstract");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Event.class, toEventStoreAggregateId(");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name)));

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("), version - 1);\r\n");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    if (Aggregate.Abstract)
                    {

//line default
//line hidden


//line 468 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        throw new UnsupportedOperationException();//todo\r\n");

//line default
//line hidden


//line 469 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        return new Abstract");

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Simple");

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 474 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State(eventStream.getEvents());\r\n");

//line default
//line hidden


//line 475 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }

//line default
//line hidden


//line 478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 480 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 483 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                foreach (var p in Aggregate.GetDerivedCollectionProperties())
                {
                    if (!BoundedContext.AllEntities.ContainsKey(p.ItemType)) { continue; }
                    if (p.ItemPropertyMap == null || p.ItemPropertyMap.Count == 0) { continue; }
                    EntityBase itemEntity = BoundedContext.AllEntities[p.ItemType];
                    var aggIdName = BoundedContext.GetParameterOrArgumentName(Aggregate.Id.Name);

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public Iterable<");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggIdName));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(") {\r\n        Iterable<");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> states = getStateQueryRepository().get");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggIdName));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(");\r\n\t\treturn states;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 496 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                foreach (var entity in Aggregate.GetAllNestedEntities().Values)
                {
                    var globalIdVO = entity.GetGlobalIdValueObject();
                    var globalIdVOProperties = globalIdVO.Properties.Values.ToList();
                    var getByParametersString = globalIdVOProperties
                            .Map(p => String.Format("{0} {1}", p.JavaType(), BoundedContext.GetParameterOrArgumentName(p.Name)))
                            .ConcatWithSeparator(", ");
                    var getByArgumentsString = globalIdVOProperties
                            .Map(p => String.Format("{0}", BoundedContext.GetParameterOrArgumentName(p.Name)))
                            .ConcatWithSeparator(", ");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForState()));

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State get");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByParametersString));

//line default
//line hidden


//line 511 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(") {\r\n        return getStateQueryRepository().get");

//line default
//line hidden


//line 512 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 512 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 512 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByArgumentsString));

//line default
//line hidden


//line 512 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(");\r\n    }\r\n\r\n");

//line default
//line hidden


//line 515 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    var globalIdVOOuterIdProperties = globalIdVO.Properties.Values.SkipLastProperty().ToList();
                    var getEntitiesByParametersString = globalIdVOOuterIdProperties.Map(p => String.Format("{0} {1}",
                                p.JavaType(),
                                BoundedContext.GetPrivateFieldName(p.Name)))//和 GetSourceChainingGetter() 的处理一致
                            .ConcatWithSeparator(", ");
                    var entityCollectionName = BoundedContext.Pluralize(entity.Name);
                    var getEntitiesByArgumentsString = globalIdVOOuterIdProperties.Map(p => String.Format("{0}",
                                BoundedContext.GetPrivateFieldName(p.Name)))
                            .ConcatWithSeparator(", ");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    public Iterable<");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetNameForState()));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> get");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityCollectionName));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getEntitiesByParametersString));

//line default
//line hidden


//line 526 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", Criterion filter, List<String> orders) {\r\n        return getStateQueryRepositor" +
                    "y().get");

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityCollectionName));

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getEntitiesByArgumentsString));

//line default
//line hidden


//line 527 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(", filter, orders);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 530 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    foreach (var collectionP in entity.GetRecursiveCollectionProperties())
                    {
                        Entity itemEntity = entity;
                        var referenceProperty = entity.GetPropertyByReferenceName(collectionP.InverseOf);

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("    public Iterable<");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(itemEntity.GetNameForState()));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State> get");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionP.Name));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByParametersString));

//line default
//line hidden


//line 536 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(") {\r\n        return getStateQueryRepository().get");

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.Name));

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionP.Name));

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(getByArgumentsString));

//line default
//line hidden


//line 537 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(");\r\n    }\r\n\r\n");

//line default
//line hidden


//line 540 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }

//line default
//line hidden


//line 543 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 546 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!Aggregate.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 551 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("\r\n    public ");

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate get");

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate(");

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 552 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State state) {\r\n        return new Abstract");

//line default
//line hidden


//line 553 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 553 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate.Simple");

//line default
//line hidden


//line 553 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 553 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate(state);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 556 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    public EventStoreAggregateId toEventStoreAggregateId(");

//line default
//line hidden


//line 561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 561 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(" aggregateId) {\r\n        return new EventStoreAggregateId.SimpleEventStoreAggrega" +
                "teId(aggregateId);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 565 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                bool isAggregateTypeExisted = Aggregate.IsAbsolutelyNoEventSourcing() ? false : true;

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    protected void update(");

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("Command c, Consumer<");

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(isAggregateTypeExisted ? "Aggregate" : "State"));

//line default
//line hidden


//line 568 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("> action) {\r\n        ");

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(" aggregateId = c.get");

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 569 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("();\r\n        EventStoreAggregateId eventStoreAggregateId = toEventStoreAggregateI" +
                "d(aggregateId);\r\n");

//line default
//line hidden


//line 571 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                // //////////////////////////////////////
                if (Aggregate.DetectingDuplicateCommandIdEnabled)
                {

//line default
//line hidden


//line 576 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        boolean duplicate = isDuplicateCommand(c, eventStoreAggregateId, null);\r\n" +
                    "        if (duplicate) { return; }\r\n\r\n");

//line default
//line hidden


//line 579 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }
                // //////////////////////////////////////

                if (Aggregate.IsPolymorphic())
                {

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        Class<? extends ");

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 586 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> stateType = getStateType(c);\r\n        ");

//line default
//line hidden


//line 587 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 587 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State state = getStateRepository().get(stateType, aggregateId, false);\r\n");

//line default
//line hidden


//line 588 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 593 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State state = getStateRepository().get(aggregateId, false);\r\n");

//line default
//line hidden


//line 594 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 597 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                // //////////////////////////////////////
                if (!Aggregate.DetectingDuplicateCommandIdEnabled)
                {

//line default
//line hidden


//line 602 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        boolean duplicate = isDuplicateCommand(c, eventStoreAggregateId, state);\r" +
                    "\n        if (duplicate) { return; }\r\n\r\n");

//line default
//line hidden


//line 605 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }
                // //////////////////////////////////////


                /////////////////////////////////////////////////////////////
                if (!Aggregate.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate aggregate = get");

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 614 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Aggregate(state);\r\n        aggregate.throwOnInvalidStateTransition(c);\r\n        a" +
                    "ction.accept(aggregate);\r\n");

//line default
//line hidden


//line 617 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                }
                else
                { //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 622 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.throwOnInvalidStateTransition(state, c);\r\n        action.accept(state);\r\n" +
                    "");

//line default
//line hidden


//line 624 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("        persist(eventStoreAggregateId, c.get");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("() == null ? ");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("State.VERSION_NULL : c.get");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("(), ");

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(isAggregateTypeExisted ? "aggregate, " : String.Empty));

//line default
//line hidden


//line 629 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("state); // State version may be null!\r\n\r\n    }\r\n\r\n");

//line default
//line hidden


//line 633 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (Aggregate.GetPublishingEventEnabled())
                {
                    // //////////////////////////////////////////////
                    // 总是优先从 set 过的 field 中获取属性的值？
                    // //////////////////////////////////////////////

//line default
//line hidden


//line 640 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(@"    private DomainEventPublisher domainEventPublisher;

    public void setDomainEventPublisher(DomainEventPublisher domainEventPublisher) {
        this.domainEventPublisher = domainEventPublisher;
    }

    public DomainEventPublisher getDomainEventPublisher() {
        if (domainEventPublisher != null) { return domainEventPublisher; }
        return ApplicationContext.current.get(DomainEventPublisher.class);
    }

");

//line default
//line hidden


//line 651 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 654 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    private void persist(EventStoreAggregateId eventStoreAggregateId, long versio" +
                "n, ");

//line default
//line hidden


//line 654 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(isAggregateTypeExisted ? Aggregate.Name + "Aggregate aggregate, " : String.Empty));

//line default
//line hidden


//line 654 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 654 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("State state) {\r\n");

//line default
//line hidden


//line 655 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (!Aggregate.IsNoEventSourcing())
                {

//line default
//line hidden


//line 659 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        getEventStore().appendEvents(eventStoreAggregateId, version, \r\n          " +
                    "  aggregate.getChanges(), (events) -> { \r\n");

//line default
//line hidden


//line 661 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                    {

//line default
//line hidden


//line 665 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("                getStateRepository().save(state); \r\n");

//line default
//line hidden


//line 666 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        //afterEventsAppendedActionString = "(events) -> {}";
                    }
                    if (Aggregate.GetPublishingEventEnabled())
                    {

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("                getDomainEventPublisher().publish(\"");

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(".");

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 672 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("\",\r\n                    eventStoreAggregateId.getId(),\r\n");

//line default
//line hidden


//line 674 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        if (Aggregate.GetOnlyPublishingEventReference())
                        {

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("                    events.stream().map(e -> new EventReference<>(e.getClass(), (" +
                            "(Abstract");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("Event) e).get");

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetEventIdPropertyName()));

//line default
//line hidden


//line 678 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("(), null)).collect(java.util.stream.Collectors.toList()));\r\n\r\n");

//line default
//line hidden


//line 680 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 685 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                            this.Write("                    (List<Event>)events);\r\n\r\n");

//line default
//line hidden


//line 687 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        }
                        //afterEventsAppendedActionString = "(events) -> {}";
                    }

//line default
//line hidden


//line 692 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("            });\r\n");

//line default
//line hidden


//line 693 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 698 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        getStateRepository().save(state);\r\n");

//line default
//line hidden


//line 699 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 702 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (!Aggregate.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 707 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        if (aggregateEventListener != null) {\r\n            aggregateEventListener" +
                    ".eventAppended(new AggregateEvent<>(aggregate, state, aggregate.getChanges()));\r" +
                    "\n        }\r\n");

//line default
//line hidden


//line 710 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 715 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 717 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                var aggregateStateAndEventNamePairs = new List<string[]>();
                if (!Aggregate.IsPolymorphic())
                {
                    aggregateStateAndEventNamePairs.Add(new string[] { Aggregate.GetNameForState(), Aggregate.GetNameForEvent() });
                }
                else
                {
                    if (!Aggregate.Abstract)
                    {
                        aggregateStateAndEventNamePairs.Add(new string[] { Aggregate.GetNameForState(), Aggregate.GetNameForEvent() });
                    }
                    foreach (var st in Aggregate.AllSubtypes.Values)
                    {
                        if (!st.Abstract)
                        {
                            aggregateStateAndEventNamePairs.Add(new string[] { st.GetNameForState(), st.GetNameForEvent() });
                        }
                    }
                }
                foreach (var np in aggregateStateAndEventNamePairs)
                {

//line default
//line hidden


//line 740 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                    if (!Aggregate.IsAbsolutelyNoEventSourcing())
                    {
                        /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("    public void initialize(");

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(np[1]));

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(np[1]));

//line default
//line hidden


//line 745 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("StateCreated stateCreated) {\r\n        ");

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.JavaType()));

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(" aggregateId = ((");

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event)stateCreated).get");

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetEventIdPropertyName()));

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 746 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("();\r\n        ");

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(np[0]));

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Sql");

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(np[0]));

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State state = new Abstract");

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(np[0]));

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.Simple");

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(np[0]));

//line default
//line hidden


//line 747 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State();\r\n        state.set");

//line default
//line hidden


//line 748 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Id.Name));

//line default
//line hidden


//line 748 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(aggregateId);\r\n\r\n        ");

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Aggregate aggregate = get");

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 750 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Aggregate(state);\r\n        ((Abstract");

//line default
//line hidden


//line 751 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 751 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Aggregate) aggregate).apply(stateCreated);\r\n\r\n        EventStoreAggregateId event" +
                        "StoreAggregateId = toEventStoreAggregateId(aggregateId);\r\n        persist(eventS" +
                        "toreAggregateId, ((");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event.Sql");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event)stateCreated).get");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetEventIdPropertyName()));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("().get");

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 754 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("(), aggregate, state);\r\n    }\r\n\r\n");

//line default
//line hidden


//line 757 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        /////////////////////////////////////////////////////////////
                    } //if (!Aggregate.IsAbsolutelyNoEventSourcing())
                      /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 762 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 765 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (Aggregate.IsPolymorphic())
                {

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    protected Class<? extends ");

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> getStateType(");

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 769 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command c) {\r\n        Class<? extends ");

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State> clazz = ");

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 770 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State.class;\r\n        ");

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.DiscriminatorProperty.JavaType()));

//line default
//line hidden


//line 771 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(" discriminatorVal = null;\r\n        if (c instanceof ");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.CreateOrMergePatch");

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 772 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(") {\r\n            discriminatorVal = ((");

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command.CreateOrMergePatch");

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(") c).get");

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 773 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("();\r\n");

//line default
//line hidden


//line 774 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    ////////////////
                    if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 780 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        } else if (c instanceof ");

//line default
//line hidden


//line 780 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 780 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 780 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 780 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(") {\r\n            discriminatorVal = ((");

//line default
//line hidden


//line 781 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 781 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Command.Delete");

//line default
//line hidden


//line 781 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 781 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(") c).get");

//line default
//line hidden


//line 781 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Discriminator));

//line default
//line hidden


//line 781 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("();\r\n");

//line default
//line hidden


//line 782 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }
                    ////////////////
                    //end if (!Aggregate.IsImmutableOrOuterEntityImmutable())
                    ////////////////

//line default
//line hidden


//line 788 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        }\r\n        if (discriminatorVal != null) {\r\n            switch (discrimin" +
                    "atorVal) {\r\n");

//line default
//line hidden


//line 791 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    var constObj = ConstObject.CreateFromDiscriminator(Aggregate);
                    foreach (var cv in constObj.Values.Values)
                    {

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("                case ");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(constObj.Name));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(".");

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(cv.Name)));

//line default
//line hidden


//line 796 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(":\r\n                    clazz = ");

//line default
//line hidden


//line 797 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(cv.Name));

//line default
//line hidden


//line 797 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.class;\r\n                    break;\r\n");

//line default
//line hidden


//line 799 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }

//line default
//line hidden


//line 802 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("            }\r\n        }\r\n        return clazz;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 807 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    protected boolean isDuplicateCommand(");

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForCommand()));

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("Command command, EventStoreAggregateId eventStoreAggregateId, ");

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 810 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("State state) {\r\n        boolean duplicate = false;\r\n        if (command.get");

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("() == null) { command.set");

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 812 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("State.VERSION_NULL); }\r\n");

//line default
//line hidden


//line 813 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                if (!Aggregate.IsNoEventSourcing())
                {
                    if (Aggregate.DetectingDuplicateCommandIdEnabled)
                    {

//line default
//line hidden


//line 819 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        if (getEventStore().isEventWithCommandIdExisted(Abstract");

//line default
//line hidden


//line 819 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 819 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event.class, eventStoreAggregateId, command.get");

//line default
//line hidden


//line 819 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 819 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("())) {\r\n            duplicate = true;\r\n        }\r\n");

//line default
//line hidden


//line 822 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        if (state.get");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("() != null && state.get");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("() > command.get");

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 827 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("()) {\r\n            Event lastEvent = getEventStore().getEvent(Abstract");

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForEvent()));

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("Event.class, eventStoreAggregateId, command.get");

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 828 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("());\r\n            if (lastEvent != null && lastEvent instanceof AbstractEvent\r\n  " +
                        "             && command.get");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("() != null && command.get");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("().equals(((AbstractEvent) lastEvent).get");

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 830 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("())) {\r\n                duplicate = true;\r\n            }\r\n        }\r\n");

//line default
//line hidden


//line 834 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }
                }
                else
                {

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        if (state.get");

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("() != null && state.get");

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("() == command.get");

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(reservedPropertyVersion.Name));

//line default
//line hidden


//line 840 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("() + 1) {\r\n            if (command.get");

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("() != null && command.get");

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("().equals(state.get");

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 841 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("())) {\r\n                duplicate = true;\r\n            }\r\n        }\r\n");

//line default
//line hidden


//line 845 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 848 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("        return duplicate;\r\n    }\r\n\r\n");

//line default
//line hidden


//line 851 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                /////////////////////////////////////////////////////////////
                if (Aggregate.IsAbsolutelyNoEventSourcing())
                {
                    /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 857 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    //if (!this.IsInSubtype)
                    //{

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    protected static void throwOnConcurrencyConflict(");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("State s, ");

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 861 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("Command c) {\r\n");

//line default
//line hidden


//line 862 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    if (!Aggregate.GetIgnoringConcurrencyConflict())
                    {
                        var aggregateVersionProperty = Aggregate.Properties[Aggregate.ReservedProperties.Version];

//line default
//line hidden


//line 867 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("        ");

//line default
//line hidden


//line 867 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 867 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(" stateVersion = s.get");

//line default
//line hidden


//line 867 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 867 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("();\r\n        ");

//line default
//line hidden


//line 868 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionProperty.JavaType()));

//line default
//line hidden


//line 868 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(" commandVersion = c.get");

//line default
//line hidden


//line 868 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 868 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("();\r\n        if (commandVersion == null) { commandVersion = ");

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 869 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.VERSION_NULL; }\r\n        if (!(stateVersion == null && commandVersion.equal" +
                        "s(");

//line default
//line hidden


//line 870 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 870 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                        this.Write("State.VERSION_NULL)) && !commandVersion.equals(stateVersion)) {\r\n            thro" +
                        "w DomainError.named(\"concurrencyConflict\", \"Conflict between state version (%1$s" +
                        ") and command version (%2$s)\", stateVersion, commandVersion);\r\n        }\r\n");

//line default
//line hidden


//line 873 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    }

                    // /////////////////////////////////////////////////////////////////
                    //else if (EntityBase is Entity) 
                    //{
                    //    var entityVersionProperty =  EntityBase.Properties[EntityBase.ReservedProperties.Version];
                    //    //这里取得的是（聚合内）实体的 version，不是聚合（根）的 version。
                    //}
                    // /////////////////////////////////////////////////////////////////

//line default
//line hidden


//line 884 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("    }\r\n\r\n");

//line default
//line hidden


//line 886 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    //} // end if (!this.IsInSubtype)

//line default
//line hidden


//line 889 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    /////////////////////////////////////////////////////////////
                } //if (EntityBase.IsAbsolutelyNoEventSourcing())
                  /////////////////////////////////////////////////////////////

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    public static class Simple");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("ApplicationService extends Abstract");

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 894 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("ApplicationService {\r\n");

//line default
//line hidden


//line 895 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                var idGeneratorArgStr = String.Empty;
                if (creationWithoutIdEnabled)
                {
                    idGeneratorArgStr = ", idGenerator";
                }

                if (!Aggregate.IsNoEventSourcing())
                {

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        public Simple");

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("ApplicationService(EventStore eventStore, ");

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateRepository stateRepository, ");

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateQueryRepository stateQueryRepository");

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idGeneratorParameterString));

//line default
//line hidden


//line 905 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(")\r\n        {\r\n            super(eventStore, stateRepository, stateQueryRepository" +
                    "");

//line default
//line hidden


//line 907 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idGeneratorArgStr));

//line default
//line hidden


//line 907 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(");\r\n        }\r\n");

//line default
//line hidden


//line 909 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("        public Simple");

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.Name));

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("ApplicationService(");

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateRepository stateRepository, ");

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Aggregate.GetNameForState()));

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write("StateQueryRepository stateQueryRepository");

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idGeneratorParameterString));

//line default
//line hidden


//line 914 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(")\r\n        {\r\n            super(stateRepository, stateQueryRepository");

//line default
//line hidden


//line 916 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(idGeneratorArgStr));

//line default
//line hidden


//line 916 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                    this.Write(");\r\n        }\r\n");

//line default
//line hidden


//line 918 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                }

//line default
//line hidden


//line 921 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                this.Write("    }\r\n\r\n}\r\n\r\n");

//line default
//line hidden


//line 925 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractApplicationServiceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"


        public class EntityBaseAbstractStateCommandConverterTemplate : CSharpTemplate
        {

            EntityBase EntityBase { get; set; }

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected virtual bool IsEntityBaseSaveable
            {
                get
                {
                    return (this.EntityBase.Entities != null) && (this.EntityBase.Entities.Count > 0);
                }
            }

            bool IncludingHoistedProperties
            {
                get { return !EntityBase.IsPolymorphic(); }
            }

            public EntityBaseAbstractStateCommandConverterTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", "");

                var nestedEntities = EntityBase.GetAllNestedEntities().Values;
                string nameDeleteOrRemove = (EntityBase is Aggregate) ? "Delete" : "Remove";
                string createNestedEnitiesGenericTypes = (nestedEntities != null && nestedEntities.Count > 0) ? ", " + nestedEntities.Map(e => "TCreate" + e.GetNameForCommand()).ConcatWithSeparator(", ") : String.Empty;
                string createMergePatchDeleteOrRemoveEntityGenericTypes = "TCreate" + EntityBase.GetNameForCommand() + " extends " + EntityBase.GetNameForCommand() + "Command.Create" + EntityBase.GetNameForCommand()
                    + (!EntityBase.IsImmutableOrOuterEntityImmutable() ?
                    (
                      ", " + "TMergePatch" + EntityBase.GetNameForCommand() + " extends " + EntityBase.GetNameForCommand() + "Command.MergePatch" + EntityBase.GetNameForCommand()
                    + ", " + "T" + nameDeleteOrRemove + EntityBase.GetNameForCommand() + " extends " + EntityBase.GetNameForCommand() + "Command." + nameDeleteOrRemove + EntityBase.GetNameForCommand()
                    )
                    : String.Empty);
                //string createMergePatchNestedEnitiesGenericTypes = (nestedEntities != null && nestedEntities.Count > 0) ? ", " + nestedEntities.Map(e => "TCreate" + e.Name + ", TMergePatch" + e.Name).ConcatWithSeparator(", ") : String.Empty;
                string createMergePatchRemoveNestedEnitiesGenericTypes = (nestedEntities != null && nestedEntities.Count > 0) ?
                    ", " + nestedEntities.Map(e => "TCreate" + e.Name + " extends " + e.Name + "Command.Create" + e.Name
                    + (!e.IsImmutableOrOuterEntityImmutable() ?
                    (
                      ", " + "TMergePatch" + e.Name + " extends " + e.Name + "Command.MergePatch" + e.Name
                    + ", " + "TRemove" + e.Name + " extends " + e.Name + "Command.Remove" + e.Name
                    )
                    : String.Empty)).ConcatWithSeparator(", ") : String.Empty;

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                }

//line default
//line hidden


//line 70 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("\npublic abstract class Abstract");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("StateCommandConverter<");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(createMergePatchDeleteOrRemoveEntityGenericTypes));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(createMergePatchRemoveNestedEnitiesGenericTypes));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(">\n{\n");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                var basicProperties = new NamedValueDictionary<Property>();
                basicProperties.Add(EntityBase.Id.Name, EntityBase.Id);

                foreach (Property p in EntityBase.Properties.Values)
                {
                    if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                    if (!String.IsNullOrWhiteSpace(p.CommandType)) { continue; };
                    if (p.IsCollectionProperty) { continue; }
                    if (p.IsAccountBalanceProperty()) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {
                        basicProperties.Add(p.Name, p);
                    }
                }

//line default
//line hidden


//line 90 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                if (EntityBase is Entity)
                {
                    var entity = EntityBase as Entity;
                    foreach (var p in entity.GetTransientOuterIdProperties())
                    {
                        //basicProperties.Add(p.Name, p);
                    }
                }

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("    public ");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("Command toCreateOrMergePatch");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 100 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("State state)\n    {\n        //where TCreate");

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(" : ICreate");

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 102 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(", new()\n        //where TMergePatch");

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(" : IMergePatch");

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 103 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(", new()\n");

//line default
//line hidden


//line 104 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                //if (EntityBase.Entities != null)
                //{
                //foreach (Entity e in EntityBase.GetAllNestedEntities().Values)
                //{
                //}
                //}

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("        boolean bUnsaved = ((");

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("State.Sql");

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 112 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("State)state).isStateUnsaved();\n        if (bUnsaved)\n        {\n            return" +
                " toCreate");

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 115 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("(state);\n        }\n");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 123 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        else \n        {\n            return toMergePatch");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("(state);\n        }\n");

//line default
//line hidden


//line 127 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        else \n        {\n            return null;\n        }\n");

//line default
//line hidden


//line 134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 139 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("    }\n\n");

//line default
//line hidden


//line 141 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 147 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    if (EntityBase is Aggregate)
                    {

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("    public TDelete");

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" toDelete");

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("State state) {\n        TDelete");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" cmd = newDelete");

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("();\n");

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("    public TRemove");

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" toRemove");

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("(");

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 156 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("State state) {\n        TRemove");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" cmd = newRemove");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("();\n");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        cmd.set");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("(state.get");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Id.Name));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("());\n");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    if (EntityBase is Aggregate)
                    {
                        var aggregate = EntityBase as Aggregate;

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("        cmd.set");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("(state.get");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("());\n\n");

//line default
//line hidden


//line 169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        return cmd;\n    }\n\n    public TMergePatch");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(" toMergePatch");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 175 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("State state) {\n");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    //if (EntityBase.Entities != null)
                    //{
                    //foreach (Entity e in EntityBase.GetAllNestedEntities().Values)
                    //{
                    //}
                    //}

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        TMergePatch");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(" cmd = newMergePatch");

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 184 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("();\n\n");

//line default
//line hidden


//line 186 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    if (EntityBase is Aggregate)
                    {
                        var aggregate = EntityBase as Aggregate;

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("        cmd.set");

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("(state.get");

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 191 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("());\n\n");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }

//line default
//line hidden


//line 196 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    foreach (Property p in basicProperties.Values)
                    {
                        //if (p.Name == EntityBase.ReservedProperties.Active || String.Equals("Version", p.Name, StringComparison.InvariantCultureIgnoreCase))
                        //{
                        //} 
                        //else 
                        //{

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("        cmd.set");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("(state.get");

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 205 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("());\n");

//line default
//line hidden


//line 206 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        //}
                    }

//line default
//line hidden


//line 210 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("            \n");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    foreach (Property p in EntityBase.Properties.Values)
                    {
                        if (p.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        if (!String.IsNullOrWhiteSpace(p.CommandType)) { continue; };
                        if (p.IsCollectionProperty) { continue; }
                        if (p.IsAccountBalanceProperty()) { continue; }
                        if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                        {
                            //if (!BoundedContext.IsClrValueType(p.Type))
                            //{


//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("        if (state.get");

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("() == null) { cmd.setIsProperty");

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 225 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("Removed(true); }\n");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            //}
                        }
                    }

//line default
//line hidden


//line 231 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("\n");

//line default
//line hidden


//line 232 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    if (EntityBase.Entities != null)
                    {
                        foreach (Entity e in EntityBase.Entities.Values)
                        {
                            if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                            var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                            var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

                            var innerNestedEntities = e.GetAllNestedEntities().Values;
                            //string createInnerNestedEnitiesGenericTypes = (innerNestedEntities != null && innerNestedEntities.Count > 0) ? ", " + innerNestedEntities.Map(ee => "TCreate" + ee.Name).ConcatWithSeparator(", ") : String.Empty;
                            //string createMergePatchInnerNestedEnitiesGenericTypes = (innerNestedEntities != null && innerNestedEntities.Count > 0) ? ", " + innerNestedEntities.Map(ee => "TCreate" + ee.Name + ", TMergePatch" + ee.Name).ConcatWithSeparator(", ") : String.Empty;

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("        for (");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("State d : state.get");

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 246 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("())\n        {\n            ");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("Command c = get");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("StateCommandConverter().toCreateOrMergePatch");

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("(d);\n            cmd.get");

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 249 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                            this.Write("Commands().add(c);\n        }\n");

//line default
//line hidden


//line 251 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        }
                    }

//line default
//line hidden


//line 255 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        return cmd;\n    }\n\n");

//line default
//line hidden


//line 258 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("    public TCreate");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(" toCreate");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForState()));

//line default
//line hidden


//line 263 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("State state) {\n");

//line default
//line hidden


//line 264 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                //if (EntityBase.Entities != null)
                //{
                //foreach (Entity e in EntityBase.GetAllNestedEntities().Values)
                //{
                //where TCreate《#= e.Name #》 : ICreate《#= e.Name #》, new()
                //}
                //}

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("        TCreate");

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(" cmd = newCreate");

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 273 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("();\n\n");

//line default
//line hidden


//line 275 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                if (EntityBase is Aggregate)
                {
                    var aggregate = EntityBase as Aggregate;

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        cmd.set");

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("(state.get");

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.ReservedProperties.Version));

//line default
//line hidden


//line 280 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("());\n");

//line default
//line hidden


//line 281 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                }

//line default
//line hidden


//line 284 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 285 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                foreach (Property p in basicProperties.Values)
                {
                    //if (p.Name == EntityBase.ReservedProperties.Active || String.Equals("Version", p.Name, StringComparison.InvariantCultureIgnoreCase))
                    //{
                    //} 
                    //else 
                    //{

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        cmd.set");

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("(state.get");

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 294 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("());\n");

//line default
//line hidden


//line 295 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    //}
                }

//line default
//line hidden


//line 299 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("\n");

//line default
//line hidden


//line 300 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        var collectionProperty = EntityBase.GetCollectionPropertyByItemType(e.Name);
                        var collectionPropertyPrivateFieldName = BoundedContext.GetPrivateFieldName(collectionProperty.Name);

                        var innerNestedEntities = e.GetAllNestedEntities().Values;
                        //string createInnerNestedEnitiesGenericTypes = (innerNestedEntities != null && innerNestedEntities.Count > 0) ? ", " + innerNestedEntities.Map(ee => "TCreate" + ee.Name).ConcatWithSeparator(", ") : String.Empty;
                        //string createMergePatchInnerNestedEnitiesGenericTypes = (innerNestedEntities != null && innerNestedEntities.Count > 0) ? ", " + innerNestedEntities.Map(ee => "TCreate" + ee.Name + ", TMergePatch" + ee.Name).ConcatWithSeparator(", ") : String.Empty;

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("        for (");

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("State d : state.get");

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(collectionProperty.Name));

//line default
//line hidden


//line 314 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("())\n        {\n            ");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("Command.Create");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" c = get");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter().toCreate");

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 316 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("(d);\n            cmd.getCreate");

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 317 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("Commands().add(c);\n        }\n");

//line default
//line hidden


//line 319 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }
                }

//line default
//line hidden


//line 323 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("        return cmd;\n    }\n\n");

//line default
//line hidden


//line 326 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        var innerEntityNestedEntities = e.GetAllNestedEntities().Values;
                        string innerEntityNestedEnitiesGenericTypes = (innerEntityNestedEntities != null && innerEntityNestedEntities.Count > 0) ?
                            ", " + innerEntityNestedEntities.Map(ee => "TCreate" + ee.Name
                            + (!ee.IsImmutableOrOuterEntityImmutable() ?
                              ", " + "TMergePatch" + ee.Name
                            + ", " + "TRemove" + ee.Name
                            : String.Empty)).ConcatWithSeparator(", ") : String.Empty;
                        string innerEntityGenericTypes = "TCreate" + e.Name
                            + (!e.IsImmutableOrOuterEntityImmutable() ? ", TMergePatch" + e.Name + ", TRemove" + e.Name : String.Empty);

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("    protected abstract Abstract");

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter<");

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntityGenericTypes));

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntityNestedEnitiesGenericTypes));

//line default
//line hidden


//line 343 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(">\n        get");

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 344 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter();\n\n");

//line default
//line hidden


//line 346 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }
                }

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("    protected abstract TCreate");

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(" newCreate");

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 350 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("();\n\n");

//line default
//line hidden


//line 352 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 358 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("    protected abstract TMergePatch");

//line default
//line hidden


//line 358 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 358 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(" newMergePatch");

//line default
//line hidden


//line 358 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 358 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("(); \n\n");

//line default
//line hidden


//line 360 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    if (EntityBase is Aggregate)
                    {

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("    protected abstract TDelete");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" newDelete");

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 364 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("();\n\n");

//line default
//line hidden


//line 366 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("    protected abstract TRemove");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(" newRemove");

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 369 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("();\n\n");

//line default
//line hidden


//line 371 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }

//line default
//line hidden


//line 374 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("\n");

//line default
//line hidden


//line 375 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 380 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                //var nestedEntities = EntityBase.GetAllNestedEntities().Values;
                //string nameDeleteOrRemove = (EntityBase is Aggregate) ? "Delete" : "Remove";
                string createSimpleMergePatchDeleteOrRemoveEntityGenericTypes = "Abstract" + EntityBase.GetNameForCommand() + "Command.SimpleCreate" + EntityBase.GetNameForCommand()
                    + (!EntityBase.IsImmutableOrOuterEntityImmutable() ?
                    (
                      ", " + "Abstract" + EntityBase.GetNameForCommand() + "Command.SimpleMergePatch" + EntityBase.GetNameForCommand()
                    + ", " + "Abstract" + EntityBase.GetNameForCommand() + "Command.Simple" + nameDeleteOrRemove + EntityBase.GetNameForCommand()
                    )
                    : String.Empty);

                string createSimpleMergePatchRemoveNestedEnitiesGenericTypes = (nestedEntities != null && nestedEntities.Count > 0) ?
                    ", " + nestedEntities.Map(e => "Abstract" + e.GetNameForCommand() + "Command.SimpleCreate" + e.GetNameForCommand()
                    + (!e.IsImmutableOrOuterEntityImmutable() ?
                      ", " + "Abstract" + e.GetNameForCommand() + "Command.SimpleMergePatch" + e.GetNameForCommand()
                    + ", " + "Abstract" + e.GetNameForCommand() + "Command.SimpleRemove" + e.GetNameForCommand()
                    : String.Empty)).ConcatWithSeparator(", ") : String.Empty;


//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("    public static class Simple");

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("StateCommandConverter extends Abstract");

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("StateCommandConverter<");

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(createSimpleMergePatchDeleteOrRemoveEntityGenericTypes));

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(createSimpleMergePatchRemoveNestedEnitiesGenericTypes));

//line default
//line hidden


//line 399 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(">\n    {\n        @Override\n        protected Abstract");

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("Command.SimpleCreate");

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(" newCreate");

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 402 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("() {\n            return new Abstract");

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("Command.SimpleCreate");

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 403 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("();\n        }\n\n");

//line default
//line hidden


//line 406 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                ////////////////
                if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                {
                    ////////////////

//line default
//line hidden


//line 412 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("        @Override\n        protected Abstract");

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(" newMergePatch");

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 413 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("() {\n            return new Abstract");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("Command.SimpleMergePatch");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("();\n        }\n\n        @Override\n        protected Abstract");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("Command.Simple");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeleteOrRemove));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(" new");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeleteOrRemove));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("() {\n            return new Abstract");

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("Command.Simple");

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeleteOrRemove));

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetNameForCommand()));

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    this.Write("();\n        }\n\n");

//line default
//line hidden


//line 422 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    ////////////////
                } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                  ////////////////

//line default
//line hidden


//line 427 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        if (e.IsHoisted && !this.IncludingHoistedProperties) { continue; }

                        var innerEntityNestedEntities = e.GetAllNestedEntities().Values;
                        string innerEntityNestedEnitiesGenericTypes = (innerEntityNestedEntities != null && innerEntityNestedEntities.Count > 0) ?
                            ", " + innerEntityNestedEntities.Map(ee => "Abstract" + ee.Name + "Command.SimpleCreate" + ee.Name
                            + (!ee.IsImmutableOrOuterEntityImmutable() ?
                            (
                              ", " + "Abstract" + ee.Name + "Command.SimpleMergePatch" + ee.Name
                            + ", " + "Abstract" + ee.Name + "Command.SimpleRemove" + ee.Name
                            )
                            : String.Empty)).ConcatWithSeparator(", ") : String.Empty;
                        string innerEntityGenericTypes = "Abstract" + e.Name + "Command.SimpleCreate" + e.Name
                            + (!e.IsImmutableOrOuterEntityImmutable() ?
                              ", Abstract" + e.Name + "Command.SimpleMergePatch" + e.Name + ", Abstract" + e.Name + "Command.SimpleRemove" + e.Name
                              : String.Empty
                            );

//line default
//line hidden


//line 449 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("        @Override\n        protected Abstract");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter<");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntityGenericTypes));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(innerEntityNestedEnitiesGenericTypes));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("> get");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter()\n        {\n            return new Abstract");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter.Simple");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                        this.Write("StateCommandConverter();\n        }\n\n");

//line default
//line hidden


//line 455 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                    }
                }

//line default
//line hidden


//line 459 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                this.Write("\n    }\n\n}\n\n");

//line default
//line hidden


//line 464 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseAbstractStateCommandConverterTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 9 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractStateCommandConverterTemplate.tt"


        public class AggregateAbstractStateCommandConverterTemplate : EntityBaseAbstractStateCommandConverterTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateAbstractStateCommandConverterTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCommandConverterTemplate.tt"


        public class EntityAbstractStateCommandConverterTemplate : EntityBaseAbstractStateCommandConverterTemplate
        {

            Entity Entity { get; set; }

            public EntityAbstractStateCommandConverterTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"


        public class TreeAggregateStateQueryRepositoryInterfaceTemplate : CSharpTemplate
        {
            Aggregate NodeContentAggregate { get; set; }

            Aggregate StructureAggregate { get; set; }

            Aggregate StructureOrNodeContentAggregate { get { return StructureAggregate != null ? StructureAggregate : NodeContentAggregate; } }

            Tree Tree { get; set; }

            BoundedContext BoundedContext { get { return Tree.BoundedContext; } }

            public TreeAggregateStateQueryRepositoryInterfaceTemplate(Tree tree)
            {
                this.Tree = tree;
                this.NodeContentAggregate = tree.BoundedContext.GetAggregate(tree.NodeContentType);//tree.BoundedContext.Aggregates[tree.NodeContentType];
                this.StructureAggregate = tree.StructureType != null ? tree.BoundedContext.GetAggregate(tree.StructureType) : null;//tree.BoundedContext.Aggregates[tree.StructureType] : null;
            }

            public override string TransformText()
            {
                //base.TransformText();
                base.TransformText();
                var usingClassNames = StructureOrNodeContentAggregate.GetUsingClassNames("State", "");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 45 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("import org.dddml.support.criterion.Criterion;\nimport ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(".*;\n\npublic interface ");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.Name));

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("StateQueryRepository");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(" extends ");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.Name));

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("StateQueryRepository");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("\n{\n");

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                var parametersString = Tree.Parameters != null ? Tree.Parameters.GetParametersString() : String.Empty;
                var parametersStringEndsWithComma = !String.IsNullOrWhiteSpace(parametersString) ? parametersString + ", " : String.Empty;

                if (StructureAggregate != null && Tree.RootParentIdValues == null)
                {

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(NodeContentAggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(".");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(NodeContentAggregate.Name));

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> get");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Root");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.Pluralize(NodeContentAggregate.Name)));

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersStringEndsWithComma));

//line default
//line hidden


//line 57 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Criterion filter, List<String> orders, Integer firstResult, Integer maxResults);\n" +
                    "\n");

//line default
//line hidden


//line 59 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.Name));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> get");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Roots(");

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersStringEndsWithComma));

//line default
//line hidden


//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Criterion filter, List<String> orders, Integer firstResult, Integer maxResults);\n" +
                    "\n");

//line default
//line hidden


//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("    Iterable<");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.Name));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("> get");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("Children(");

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersStringEndsWithComma));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(NodeContentAggregate.Id.JavaType()));

//line default
//line hidden


//line 67 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(" parentId, Criterion filter, List<String> orders, Integer firstResult, Integer ma" +
                "xResults);\n\n");

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                if (StructureAggregate != null && Tree.RootParentIdValues == null)
                {

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(NodeContentAggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(".");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(NodeContentAggregate.Name));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> get");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Root");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.Pluralize(NodeContentAggregate.Name)));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersStringEndsWithComma));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter, List<String> orders, Integer firstRes" +
                    "ult, Integer maxResults);\n\n");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("    Iterable<");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.Name));

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("State");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("> get");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Roots(");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersStringEndsWithComma));

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                    this.Write("Iterable<Map.Entry<String, Object>> filter, List<String> orders, Integer firstRes" +
                    "ult, Integer maxResults);\n\n");

//line default
//line hidden


//line 80 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                }

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("    Iterable<");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.Name));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("State");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(StructureOrNodeContentAggregate.GetGenericTypeParametersString()));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("> get");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Tree.Name));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write("Children(");

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(parametersStringEndsWithComma));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(NodeContentAggregate.Id.JavaType()));

//line default
//line hidden


//line 83 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                this.Write(" parentId, Iterable<Map.Entry<String, Object>> filter, List<String> orders, Integ" +
                "er firstResult, Integer maxResults);\n\n}\n\n");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/TreeAggregateStateQueryRepositoryInterfaceTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"


        public class ConstObjectTemplate : CSharpTemplate
        {

            ConstObject ConstObject { get; set; }

            BoundedContext BoundedContext
            {
                get
                {
                    return ConstObject.BoundedContext;
                }
            }

            public ConstObjectTemplate(ConstObject constObject)
            {
                this.ConstObject = constObject;
            }

            public override string TransformText()
            {
                base.TransformText();
                //var constObjectUsingClassNames = ConstObject.Aggregate.GetUsingClassNames();

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write("\npackage ");

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ConstObject.GetDomainConstObjectPackage()));

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write(";\n");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                var className = ConstObject.Name;

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write("\npublic class ");

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(className));

//line default
//line hidden


//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write("\n{\n\n");

//line default
//line hidden


//line 41 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                foreach (var cv in ConstObject.Values.Values)
                {

//line default
//line hidden


//line 45 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write("\t\t\n    public static final ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaType(ConstObject.ValueType)));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write(" ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaConstValueName(cv.Name)));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write(" = ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ConstObject.IsValueString ? ("\"" + cv.StringValue + "\"") : (cv.Value.ToString())));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                    this.Write(";\n\n");

//line default
//line hidden


//line 48 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                }

//line default
//line hidden


//line 51 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                this.Write("}\n\n");

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/ConstObjectTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"


        public class EntityBaseStateEventDtoConverterTemplate : CSharpTemplate
        {

            EntityBase EntityBase { get; set; }

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            protected virtual bool IsEntityBaseSaveable
            {
                get
                {
                    return (this.EntityBase.Entities != null) && (this.EntityBase.Entities.Count > 0);
                }
            }

            // ///////////////////////////////////////////////////////////
            // 应该支持多态下的转换
            // 参考：EntityBaseStateDtoTemplate.tt 中 convertor 的处理
            // ///////////////////////////////////////////////////////////

            public EntityBaseStateEventDtoConverterTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }


            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "Dto");
                var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 45 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 50 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("import ");

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetJavaSpecializationPackage()));

//line default
//line hidden


//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".*;\n\n");

//line default
//line hidden


//line 55 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                string nameDeletedOrRemoved = (EntityBase is Aggregate) ? "Deleted" : "Removed";

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("public class ");

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 58 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDtoConverter {\n\n    public ");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto to");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto(Abstract");

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Event stateEvent) {\n");

//line default
//line hidden


//line 61 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                var typeNames = new List<string>();
                typeNames.Add(EntityBase.Name);
                if (EntityBase.IsPolymorphic())
                {
                    typeNames.AddRange(EntityBase.AllSubtypes.Values.Select(st => st.Name));//.Where(!st.Abstract)
                }
                typeNames.Reverse();
                for (int i = 0; i < typeNames.Count; i++)
                {
                    var typeName = typeNames[i];
                    string stateDeletedOrRemovedInterfaceName = (EntityBase is Aggregate) ? (typeName + "StateDeleted") : (typeName + "StateRemoved");
                    string ifOrElseIfString = i == 0 ? "if" : "} else if";

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        ");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ifOrElseIfString));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(" (stateEvent instanceof Abstract");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("Event.Abstract");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreated) {\n            ");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreated e = (");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 76 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreated) stateEvent;\n            return to");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreatedDto(e);\n");

//line default
//line hidden


//line 78 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("        } else if (stateEvent instanceof Abstract");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("Event.Abstract");

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 84 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatched) {\n            ");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatched e = (");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 85 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatched) stateEvent;\n            return to");

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 86 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatchedDto(e);\n");

//line default
//line hidden


//line 87 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!EntityBase.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("        } else if (stateEvent instanceof Abstract");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Event.Abstract");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 93 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(") {\n            ");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateDeletedOrRemovedInterfaceName));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(" e = (");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(stateDeletedOrRemovedInterfaceName));

//line default
//line hidden


//line 94 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(") stateEvent;\n            return to");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 95 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Dto(e);\n");

//line default
//line hidden


//line 96 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            // /////////////////////////////////////////////////////
                        } // end if (!Aggregate.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

                }


//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("        }\n\n        throw DomainError.named(\"invalidEventType\", String.format(\"Inv" +
                "alid state event type: %1$s\", stateEvent.getEventType()));\n    }\n\n");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                var subtypes = new List<EntityBaseSubtype>();
                subtypes.Add(null);
                if (EntityBase.IsPolymorphic())
                {
                    subtypes.AddRange(EntityBase.AllSubtypes.Values);
                }
                foreach (var subtype in subtypes)
                {
                    var typeName = subtype == null ? EntityBase.Name : subtype.Name;

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("    public ");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateEventDto.");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreatedDto to");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreatedDto(");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("Event.");

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 124 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreated e) {\n        ");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateEventDto.");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreatedDto dto = new ");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateEventDto.");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("StateCreatedDto();\n");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    if (false)
                    {

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("        dto.set");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("(new ");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventIdDtoWrapper(e.get");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("()));\n");

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    }
                    else
                    {

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("        dto.set");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("(e.get");

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 133 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("());\n");

//line default
//line hidden


//line 134 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    }

                    if (subtype == null)
                    {
                        WriteSetStateCreatedOrMergePatchedDtoProperties();
                        WriteSetStateCreatedEntityCollectionProperties();
                    }
                    else
                    {
                        WriteSetStateCreatedOrMergePatchedDtoProperties(subtype);
                        WriteSetStateCreatedEntityCollectionProperties(subtype);
                    }

//line default
//line hidden


//line 148 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        return dto;\n    }\n\n");

//line default
//line hidden


//line 151 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    ////////////////
                    if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                    {
                        ////////////////

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("    public ");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventDto.");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatchedDto to");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatchedDto(");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("Event.");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatched e) {\n        ");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventDto.");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatchedDto dto = new ");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventDto.");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateMergePatchedDto();\n");

//line default
//line hidden


//line 159 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        if (false)
                        {

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("        dto.set");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("(new ");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("StateEventIdDtoWrapper(e.get");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("()));\n");

//line default
//line hidden


//line 163 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        }
                        else
                        {

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("        dto.set");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("(e.get");

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 166 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("());\n");

//line default
//line hidden


//line 167 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        }

                        if (subtype == null)
                        {
                            WriteSetStateCreatedOrMergePatchedDtoProperties();
                            WriteSetStateMergePatchedDtoIsRemovedProperties();
                            WriteSetStateMergePatchedEntityCollectionProperties();
                        }
                        else
                        {
                            WriteSetStateCreatedOrMergePatchedDtoProperties(subtype);
                            WriteSetStateMergePatchedDtoIsRemovedProperties(subtype);
                            WriteSetStateMergePatchedEntityCollectionProperties(subtype);
                        }

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("        return dto;\n    }\n\n\n");

//line default
//line hidden


//line 187 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        // /////////////////////////////////////////////////////
                        if (!EntityBase.ReservedProperties.NoDeleted)
                        {
                            // /////////////////////////////////////////////////////

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("    public ");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("StateEventDto.");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Dto to");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Dto(");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Event.");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(typeName));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(" e) {\n        ");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("StateEventDto.");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Dto dto = new ");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("StateEventDto.");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("State");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(nameDeletedOrRemoved));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("Dto();\n");

//line default
//line hidden


//line 195 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            if (false)
                            {

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("        dto.set");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("(new ");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("StateEventIdDtoWrapper(e.get");

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 198 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("()));\n");

//line default
//line hidden


//line 199 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            }
                            else
                            {

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("        dto.set");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("(e.get");

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.GetStateEventIdPropertyName()));

//line default
//line hidden


//line 202 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                                this.Write("());\n");

//line default
//line hidden


//line 203 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            }

                            if (subtype == null)
                            {
                                WriteSetStateEventDtoReservedProperties();
                                WriteSetStateDeletedOrRemovedEntityCollectionProperties();
                            }
                            else
                            {
                                WriteSetStateEventDtoReservedProperties();
                                WriteSetStateDeletedOrRemovedEntityCollectionProperties(subtype);
                            }

//line default
//line hidden


//line 217 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            this.Write("        return dto;\n    }\n\n");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                            // /////////////////////////////////////////////////////
                        } // end if (!Aggregate.ReservedProperties.NoDeleted)
                          // /////////////////////////////////////////////////////

                        ////////////////
                    } //if (!EntityBase.IsImmutableOrOuterEntityImmutable())
                      ////////////////

//line default
//line hidden


//line 229 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }//end foreach (var subtype in subtypes)

//line default
//line hidden


//line 232 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                if (EntityBase.Entities != null)
                {
                    foreach (Entity e in EntityBase.Entities.Values)
                    {
                        //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }


//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("    protected ");

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventDtoConverter get");

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 240 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventDtoConverter() {\n        return new ");

//line default
//line hidden


//line 241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 241 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                        this.Write("StateEventDtoConverter();\n    }\n\n");

//line default
//line hidden


//line 244 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    }
                }

//line default
//line hidden


//line 248 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("}\n\n");

//line default
//line hidden


//line 250 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                //var stateCreatedOrMergePatchedOrDeletedOrRemovedDtoName = (EntityBase is Aggregate) ? EntityBase.Name + "StateCreatedOrMergePatchedOrDeleted" + "Dto" : EntityBase.Name + "StateCreatedOrMergePatchedOrRemoved" + "Dto";
                //var stateCreatedOrMergePatchedOrDeletedOrRemovedDtoCollectionName = stateCreatedOrMergePatchedOrDeletedOrRemovedDtoName + "s";
                //var stateEventDtoTypeDiscriminatorName = BoundedContext.GetEventTypeDiscriminatorName();
                //var stateEventDtoTypeDiscriminatorPrivateFieldName = BoundedContext.GetPrivateFieldName(stateEventDtoTypeDiscriminatorName);
                // BEGIN stateCreatedOrMergePatchedOrDeletedOrRemoved...
                //if (EntityBase is Entity)
                //{
                //}// END OF stateCreatedOrMergePatchedOrDeleted...

                return this.GenerationEnvironment.ToString();
            }


            // /////////////////////////////////////////
            // foreach properties, Write setXXXX()...
            // /////////////////////////////////////////

            private void WriteSetStateCreatedEntityCollectionProperties()
            {
                if (EntityBase.Entities != null)
                {
                    foreach (Entity entity in EntityBase.Entities.Values.Where(e => !e.IsHoisted || !EntityBase.IsPolymorphic()))
                    {
                        WriteSetEntityCollectionCreatedEventsProperty("e", entity);
                    }
                }
            }

            private void WriteSetStateCreatedEntityCollectionProperties(EntityBaseSubtype subtype)
            {
                if (subtype.Entities != null)
                {
                    foreach (Entity entity in subtype.GetAllEntities())
                    {
                        WriteSetEntityCollectionCreatedEventsProperty("e", entity);
                    }
                }
            }

            private void WriteSetStateMergePatchedEntityCollectionProperties()
            {
                if (EntityBase.Entities != null)
                {
                    foreach (Entity entity in EntityBase.Entities.Values.Where(e => !e.IsHoisted || !EntityBase.IsPolymorphic()))
                    {
                        //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                        WriteSetEntityCollectionMergePatchedEventsProperty("e", entity);
                    }
                }
            }

            private void WriteSetStateMergePatchedEntityCollectionProperties(EntityBaseSubtype subtype)
            {
                if (subtype.Entities != null)
                {
                    foreach (Entity entity in subtype.GetAllEntities())
                    {
                        WriteSetEntityCollectionMergePatchedEventsProperty("e", entity);
                    }
                }
            }

            private void WriteSetStateDeletedOrRemovedEntityCollectionProperties()
            {
                if (EntityBase.Entities != null)
                {
                    foreach (Entity entity in EntityBase.Entities.Values.Where(e => !e.IsHoisted || !EntityBase.IsPolymorphic()))
                    {
                        WriteSetEntityCollectionRemovedEventsProperty("e", entity);
                    }
                }
            }

            private void WriteSetStateDeletedOrRemovedEntityCollectionProperties(EntityBaseSubtype subtype)
            {
                if (subtype.Entities != null)
                {
                    foreach (Entity entity in subtype.GetAllEntities())
                    {
                        WriteSetEntityCollectionRemovedEventsProperty("e", entity);
                    }
                }
            }

            // ////////////////////

            private void WriteSetStateCreatedOrMergePatchedDtoProperties()
            {
                WriteSetStateEventDtoReservedProperties();

                foreach (Property p in EntityBase.Properties.Values.Where(p => !p.IsHoisted || !EntityBase.IsPolymorphic()))
                {
                    if (p.IsCollectionProperty) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {
                        WriteSetSimpleProperty("e", p);
                    }
                }

                foreach (Property p in EntityBase.Properties.Values.Where(p => !p.IsHoisted || !EntityBase.IsPolymorphic()))
                {
                    if (p.IsValueObjectCollectionProperty())
                    {
                        WriteSetVOCollectionProperty("e", p);
                    }
                }
            }

            private void WriteSetStateCreatedOrMergePatchedDtoProperties(EntityBaseSubtype subtype)
            {
                WriteSetStateEventDtoReservedProperties();

                foreach (Property p in subtype.GetAllProperties())
                {
                    if (p.IsCollectionProperty) { continue; }
                    if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                    {
                        WriteSetSimpleProperty("e", p);
                    }
                }

                foreach (Property p in subtype.GetAllProperties())
                {
                    if (p.IsValueObjectCollectionProperty())
                    {
                        WriteSetVOCollectionProperty("e", p);
                    }
                }
            }

            private void WriteSetStateMergePatchedDtoIsRemovedProperties()
            {
                foreach (Property p in EntityBase.Properties.Values.Where(p => !p.IsHoisted || !EntityBase.IsPolymorphic()))
                {
                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    WriteSetIsRemovedProperty("e", p);
                }
            }

            private void WriteSetStateMergePatchedDtoIsRemovedProperties(EntityBaseSubtype subtype)
            {
                foreach (Property p in subtype.GetAllProperties())
                {
                    if (p.IsCollectionProperty && !p.IsValueObjectCollectionProperty()) { continue; }
                    WriteSetIsRemovedProperty("e", p);
                }
            }

            ////////////////
            private void WriteSetStateEventDtoReservedProperties()
            {
                WriteSetStateEventDtoReservedProperties("e");
            }

            private void WriteSetStateEventDtoReservedProperties(string eventObjName)
            {

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("        dto.set");

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedAt));

//line default
//line hidden


//line 408 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("());\n        dto.set");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.CreatedBy));

//line default
//line hidden


//line 409 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("());\n");

//line default
//line hidden


//line 410 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                if (EntityBase is Entity)
                {

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        dto.set");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.ReservedProperties.Version));

//line default
//line hidden


//line 414 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("());\n");

//line default
//line hidden


//line 415 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("        dto.set");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("(");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(BoundedContext.GetCommandIdName()));

//line default
//line hidden


//line 418 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("());\n");

//line default
//line hidden


//line 419 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

            }
            ////////////////

            // ////////////////////////////////////
            // Write Set XXXXX Property
            // ////////////////////////////////////

            private void WriteSetEntityCollectionCreatedEventsProperty(string eventObjName, Entity e)
            {
                var eCollectionVarName = BoundedContext.GetCamelCaseName(e.Name + "Events");

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("        List<");

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto.");

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateCreatedDto> ");

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 431 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(" = new ArrayList<>();\n        for (");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Event.");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateCreated ee : ");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 432 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Events()) {\n            ");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto.");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateCreatedDto eeDto = get");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDtoConverter().to");

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 433 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateCreatedDto(ee);\n            ");

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 434 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".add(eeDto);\n        }\n        dto.set");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Events(");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".toArray(new ");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto.");

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 436 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateCreatedDto[0]));\n\n");

//line default
//line hidden


//line 438 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

            }

            private void WriteSetEntityCollectionMergePatchedEventsProperty(string eventObjName, Entity e)
            {
                var eCollectionVarName = BoundedContext.GetCamelCaseName(e.Name + "Events");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("        List<");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto> ");

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 445 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(" = new ArrayList<>();\n        for (");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Event ee : ");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 446 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Events()) {\n            ");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto eeDto = get");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDtoConverter().to");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto((Abstract");

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 447 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Event) ee);\n            ");

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 448 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".add(eeDto);\n        }\n        dto.set");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Events(");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".toArray(new ");

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 450 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto[0]));\n\n");

//line default
//line hidden


//line 452 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

            }

            private void WriteSetEntityCollectionRemovedEventsProperty(string eventObjName, Entity e)
            {
                if (e.Immutable) { return; }
                var eCollectionVarName = BoundedContext.GetCamelCaseName(e.Name + "Events");

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("        List<");

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto.");

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateRemovedDto> ");

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 460 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(" = new ArrayList<>();\n        for (");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Event.");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateRemoved ee : ");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".get");

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 461 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Events()) {\n            ");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto.");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateRemovedDto eeDto = get");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDtoConverter().to");

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 462 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateRemovedDto(ee);\n            ");

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 463 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".add(eeDto);\n        }\n        dto.set");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("Events(");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eCollectionVarName));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(".toArray(new ");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateEventDto.");

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(e.Name));

//line default
//line hidden


//line 465 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                this.Write("StateRemovedDto[0]));\n\n");

//line default
//line hidden


//line 467 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

            }

            // ///////////////////

            private void WriteSetIsRemovedProperty(string eventObjName, Property p)
            {
                if (!p.IsReservedProperty || p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                {

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        dto.setIsProperty");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("Removed(");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".getIsProperty");

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 477 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("Removed());\n");

//line default
//line hidden


//line 478 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }
            }

            private void WriteSetVOCollectionProperty(string eventObjName, Property p)
            {
                var vo = EntityBase.FindValueObject(p.ItemType);
                //bool needDto = (vo != null);
                bool needDto = false;
                if (needDto)
                {

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        dto.set");

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(" .get");

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 490 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("() == null ? null :\n                ");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("().stream().map(p -> p == null ? null : new ");

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 491 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("DtoWrapper(p))\n                        .toArray(");

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ItemType));

//line default
//line hidden


//line 492 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("DtoWrapper[]::new));\n");

//line default
//line hidden


//line 493 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }
                else
                {

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        dto.set");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("() == null ? null : ");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("().toArray(new ");

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.JavaItemType()));

//line default
//line hidden


//line 498 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("[0]));\n");

//line default
//line hidden


//line 499 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }
            }

            private void WriteSetSimpleProperty(string eventObjName, Property p)
            {
                bool needDto = false;
                //if (EntityBase.FindValueObject(p.Type) != null)
                //{
                //	needDto = true;
                //}
                if (needDto)
                {

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        dto.set");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("((");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("() == null) ? null : new ");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Type));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("DtoWrapper(");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 513 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("()));\n");

//line default
//line hidden


//line 514 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                }
                else
                {
                    //if (BoundedContext.IsClrValueType(p.Type))
                    //{

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("        dto.set");

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("(");

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(eventObjName));

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(".get");

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 521 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    this.Write("());\n");

//line default
//line hidden


//line 522 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseStateEventDtoConverterTemplate.tt"

                    //} else {
                    //}
                }
            }

        }


//line default
//line hidden


//line 9 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateEventDtoConverterTemplate.tt"


        public class AggregateStateEventDtoConverterTemplate : EntityBaseStateEventDtoConverterTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateStateEventDtoConverterTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateEventDtoConverterTemplate.tt"


        public class EntityStateEventDtoConverterTemplate : EntityBaseStateEventDtoConverterTemplate
        {

            Entity Entity { get; set; }

            public EntityStateEventDtoConverterTemplate(Entity entity) : base(entity)
            {
                this.Entity = entity;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"


        public class EntityBaseCommandDtosTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public bool OnlyDtos { get; set; }

            public EntityBaseCommandDtosTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                //var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "Dto");
                var usingClassNames = EntityBase.GetUsingClassNames("StateDto", "");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 36 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                }

//line default
//line hidden


//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                // ///////////////////////////
                if (EntityBase is Aggregate)
                {
                    var aggregate = EntityBase.Aggregate;

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write("\npublic class ");

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Name));

//line default
//line hidden


//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write("CommandDtos\n{\n    private ");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Name));

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write("CommandDtos() {\n    }\n\n");

//line default
//line hidden


//line 52 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    var es = new List<EntityBase>();
                    es.Add(aggregate);
                    es.AddRange(aggregate.GetAllNestedEntities().Values);

                    foreach (var e in es)
                    {
                        EntityBase entityBase = e;
                        var ms = entityBase.GetSelfAndAllSubtypeMethods();
                        if (ms != null && ms.Count > 0)
                        {
                            Entity entity = (entityBase is Entity) ? (Entity)entityBase : null;

                            foreach (var method in ms)
                            {
                                if (method.IsReservedMethod()) { continue; }
                                var extendsClassName = method.GetCommandDtoObjectExtendsClassFullName();
                                var extendsStr = !String.IsNullOrWhiteSpace(extendsClassName) ? " extends " + extendsClassName : String.Empty;

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write("    public static class ");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write("Dto");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(extendsStr));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write(" {\n\n        public String get");

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 73 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write("() {\n            return \"");

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 74 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write("\";\n        }\n\n");

//line default
//line hidden


//line 77 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                foreach (var p in method.Parameters.Values)
                                {
                                    if (!String.IsNullOrWhiteSpace(extendsClassName) && (p.IsCommandId || p.IsRequesterId))
                                    { continue; }

                                    string pType;
                                    if (!String.IsNullOrWhiteSpace(p.Type))
                                    {
                                        var vo = aggregate.FindValueObject(p.Type);
                                        //pType = vo == null ? p.JavaType() : (p.Type + "Dto");
                                        pType = vo == null ? p.JavaType() : (p.Type);
                                    }
                                    else if (!String.IsNullOrWhiteSpace(p.ItemType))
                                    {
                                        var vo = aggregate.FindValueObject(p.ItemType);
                                        //pType = vo == null ? (p.JavaItemType() + "[]") : (p.ItemType + "Dto[]");
                                        pType = vo == null ? (p.JavaItemType() + "[]") : (p.ItemType + "[]");
                                    }
                                    else if (String.IsNullOrWhiteSpace(p.Type) && p.IsRequesterId)
                                    {
                                        pType = BoundedContext.DefaultUserIdType;
                                    }
                                    else
                                    {
                                        pType = "String";
                                    }
                                    var pPrivateFieldName = aggregate.BoundedContext.GetPrivateFieldName(p.Name);
                                    var pParameterName = aggregate.BoundedContext.GetParameterOrArgumentName(p.Name);


//line default
//line hidden


//line 108 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("        /**\n         * ");

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 109 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("\n         */\n        private ");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pType));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pPrivateFieldName));

//line default
//line hidden


//line 111 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(";\n\n        public ");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pType));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(" get");

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 113 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("() {\n            return this.");

//line default
//line hidden


//line 114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pPrivateFieldName));

//line default
//line hidden


//line 114 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pType));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pParameterName));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(") {\n            this.");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pPrivateFieldName));

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(" = ");

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pParameterName));

//line default
//line hidden


//line 118 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(";\n        }\n\n");

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                }

                                //var commandIdParameter = method.Parameters.CommandIdParameter;
                                //var requesterIdParameter = method.Parameters.RequesterIdParameter;
                                //var aggregateIdParameter = method.Parameters.AggregateIdParameter;
                                //var entityGlobalIdParameter = method.Parameters.EntityGlobalIdParameter;
                                //var aggregateVersionParameter = method.Parameters.AggregateVersionParameter;

//line default
//line hidden


//line 130 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"


                                // /////////////////////
                                if (!OnlyDtos)
                                {
                                    // /////////////////////

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("       public ");

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Name));

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("Commands.");

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(" to");

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 136 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("() {\n            ");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Name));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("Commands.");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(" cmd = new ");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Name));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("Commands.");

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 137 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("();\n");

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    foreach (var p in method.Parameters.Values)
                                    {
                                        //if (aggregate.FindValueObject(p.Type) != null)
                                        //{

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                        this.Write("            cmd.set");

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                        this.Write("(");

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.ConvertParameterDtoToDomainModelTypeString("this.get" + p.Name + "()", true)));

//line default
//line hidden


//line 144 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                        this.Write(");\n");

//line default
//line hidden


//line 145 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                        //}
                                        //else
                                        //{
                                        //}
                                    }

//line default
//line hidden


//line 152 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    this.Write("            return cmd;\n        }\n\n");

//line default
//line hidden


//line 155 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                    // /////////////////////
                                } // end if (!OnlyDtos)
                                  // /////////////////////

//line default
//line hidden


//line 160 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                                this.Write("    }\n\n");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                            }//end foreach (var method in entityBase.Methods.Values)

                        }//end if (entityBase.Methods != null && entityBase.Methods.Count > 0)

                    }//end foreach (var e in es)

//line default
//line hidden


//line 169 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                    this.Write("}\n\n");

//line default
//line hidden


//line 171 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                }//end if (EntityBase is Aggregate) 

//line default
//line hidden


//line 174 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandDtosTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToCamelCase(string name)
            {
                return BoundedContext.GetCamelCaseName(name);
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }
        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCommandDtosTemplate.tt"


        public class AggregateCommandDtosTemplate : EntityBaseCommandDtosTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateCommandDtosTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"


        public class EntityBaseCommandsTemplate : CSharpTemplate
        {

            BoundedContext BoundedContext { get { return EntityBase.Aggregate.BoundedContext; } }

            EntityBase EntityBase { get; set; }

            public EntityBaseCommandsTemplate(EntityBase entityBase)
            {
                this.EntityBase = entityBase;
            }

            public override string TransformText()
            {
                //base.TransformText();
                var usingClassNames = EntityBase.GetUsingClassNames("State", String.Empty);

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                this.Write("package ");

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Aggregate.GetDomainAggregatePackage()));

//line default
//line hidden


//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                this.Write(";\n\nimport java.util.*;\n");

//line default
//line hidden


//line 29 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                foreach (var n in usingClassNames)
                {

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write("import ");

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(n));

//line default
//line hidden


//line 33 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write(";\n");

//line default
//line hidden


//line 34 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                }

//line default
//line hidden


//line 37 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                // ///////////////////////////
                if (EntityBase is Aggregate)
                {
                    var aggregate = EntityBase.Aggregate;

//line default
//line hidden


//line 43 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write("\npublic class ");

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write("Commands\n{\n    private ");

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(EntityBase.Name));

//line default
//line hidden


//line 46 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write("Commands() {\n    }\n\n");

//line default
//line hidden


//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    var es = new List<EntityBase>();
                    es.Add(aggregate);
                    es.AddRange(aggregate.GetAllNestedEntities().Values);

                    foreach (var e in es)
                    {
                        EntityBase entityBase = e;
                        var ms = entityBase.GetSelfAndAllSubtypeMethods();
                        if (ms != null && ms.Count > 0)
                        {
                            Entity entity = (entityBase is Entity) ? (Entity)entityBase : null;

                            foreach (var method in ms)
                            {
                                if (method.IsReservedMethod()) { continue; }
                                var extendsClassName = method.GetCommandObjectExtendsClassFullName();
                                var extendsStr = !String.IsNullOrWhiteSpace(extendsClassName) ? " extends " + extendsClassName : String.Empty;
                                var implementsStr = !method.NotInstanceMethod ? " implements " + EntityBase.Name + "Command" : String.Empty;

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write("    public static class ");

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(extendsStr));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(implementsStr));

//line default
//line hidden


//line 69 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(" {\n\n        public String get");

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 71 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write("() {\n            return \"");

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(method.Name));

//line default
//line hidden


//line 72 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write("\";\n        }\n\n        public void set");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write("(String ");

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetCommandTypeDiscriminatorName())));

//line default
//line hidden


//line 75 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write(") {\n            //do nothing\n        }\n\n");

//line default
//line hidden


//line 79 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                foreach (var p in method.Parameters.Values)
                                {
                                    if (!String.IsNullOrWhiteSpace(extendsClassName) && (p.IsCommandId || p.IsRequesterId))
                                    { continue; }

                                    string pType;
                                    if (!String.IsNullOrWhiteSpace(p.Type))
                                    {
                                        var vo = aggregate.FindValueObject(p.Type);
                                        pType = vo == null ? p.JavaType() : (p.Type);
                                    }
                                    //参数可能是集合
                                    else if (!String.IsNullOrWhiteSpace(p.ItemType))
                                    {
                                        var vo = aggregate.FindValueObject(p.ItemType);
                                        //pType = vo == null ? ("List<" + p.JavaItemType() + ">") : ("List<" + p.ItemType + ">");
                                        pType = vo == null ? ("" + p.JavaItemType() + "[]") : ("" + p.ItemType + "[]");
                                    }
                                    else if (String.IsNullOrWhiteSpace(p.Type) && p.IsRequesterId)
                                    {
                                        pType = BoundedContext.DefaultUserIdType;
                                    }
                                    else
                                    {
                                        pType = "String";
                                    }
                                    var pPrivateFieldName = aggregate.BoundedContext.GetPrivateFieldName(p.Name);
                                    var pParameterName = aggregate.BoundedContext.GetParameterOrArgumentName(p.Name);
                                    // /////////////////////////////////////////////////////////////
                                    if (pType == method.Name)
                                    {
                                        throw new NotSupportedException(String.Format("parameter.Type == method.Name, name:'{0}'", method.Name));
                                    }
                                    // /////////////////////////////////////////////////////////////


//line default
//line hidden


//line 116 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("        /**\n         * ");

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.GetComment()));

//line default
//line hidden


//line 117 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("\n         */\n        private ");

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pType));

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pPrivateFieldName));

//line default
//line hidden


//line 119 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(";\n\n        public ");

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pType));

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(" get");

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 121 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("() {\n            return this.");

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pPrivateFieldName));

//line default
//line hidden


//line 122 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(";\n        }\n\n        public void set");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(p.Name));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pType));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(" ");

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pParameterName));

//line default
//line hidden


//line 125 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(") {\n            this.");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pPrivateFieldName));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(" = ");

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(pParameterName));

//line default
//line hidden


//line 126 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(";\n        }\n\n");

//line default
//line hidden


//line 129 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                }

                                var commandIdParameter = method.Parameters.CommandIdParameter;
                                var requesterIdParameter = method.Parameters.RequesterIdParameter;
                                var aggregateIdParameter = method.Parameters.AggregateIdParameter;
                                var entityGlobalIdParameter = method.Parameters.EntityGlobalIdParameter;
                                var aggregateVersionParameter = method.Parameters.AggregateVersionParameter;

//line default
//line hidden


//line 138 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                if (commandIdParameter.Name != BoundedContext.GetCommandIdName())
                                {

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("        public String get");

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 142 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("() {\n            return this.get");

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandIdParameter.Name));

//line default
//line hidden


//line 143 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("();\n        }\n\n        public void set");

//line default
//line hidden


//line 146 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 146 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(String ");

//line default
//line hidden


//line 146 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 146 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(") {\n            this.set");

//line default
//line hidden


//line 147 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(commandIdParameter.Name));

//line default
//line hidden


//line 147 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 147 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetCommandIdName())));

//line default
//line hidden


//line 147 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(");\n        }\n\n");

//line default
//line hidden


//line 150 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                }

//line default
//line hidden


//line 153 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                if (requesterIdParameter.Name != BoundedContext.GetRequesterIdName())
                                {

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("        public String get");

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetRequesterIdName())));

//line default
//line hidden


//line 157 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("() {\n            return this.get");

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdParameter.Name));

//line default
//line hidden


//line 158 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("();\n        }\n\n        public void set");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToPascalCase(BoundedContext.GetRequesterIdName())));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(String ");

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetRequesterIdName())));

//line default
//line hidden


//line 161 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(") {\n            this.set");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(requesterIdParameter.Name));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(ToCamelCase(BoundedContext.GetRequesterIdName())));

//line default
//line hidden


//line 162 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(");\n        }\n\n");

//line default
//line hidden


//line 165 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                }

//line default
//line hidden


//line 168 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                if (aggregateVersionParameter != null && aggregateVersionParameter.Name != aggregate.Properties.VersionProperty.Name)
                                {

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("        public ");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Properties.VersionProperty.JavaType()));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(" get");

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Properties.VersionProperty.Name));

//line default
//line hidden


//line 172 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("() {\n            return this.get");

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameter.Name));

//line default
//line hidden


//line 173 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("();\n        }\n\n        public void set");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Properties.VersionProperty.Name));

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(");

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Properties.VersionProperty.JavaType()));

//line default
//line hidden


//line 176 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(" version) {\n            this.set");

//line default
//line hidden


//line 177 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateVersionParameter.Name));

//line default
//line hidden


//line 177 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    this.Write("(version);\n        }\n\n");

//line default
//line hidden


//line 180 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                }

//line default
//line hidden


//line 183 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                if (entityBase is Aggregate)
                                {
                                    if (aggregateIdParameter != null && aggregateIdParameter.Name != aggregate.Id.Name)
                                    {

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("        public ");

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.JavaType()));

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(" get");

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.Name));

//line default
//line hidden


//line 189 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("() {\n            return this.get");

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateIdParameter.Name));

//line default
//line hidden


//line 190 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("();\n        }\n\n        public void set");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.Name));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("(");

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.JavaType()));

//line default
//line hidden


//line 193 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(" id) {\n            this.set");

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregateIdParameter.Name));

//line default
//line hidden


//line 194 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("(id);\n        }\n\n");

//line default
//line hidden


//line 197 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    }
                                }
                                else if (entityBase is Entity)
                                {
                                    //foreach (var p in BoundedContext.GetAllNestedValueObjects()[entity.GlobalId.Type].Properties.Values)
                                    //{
                                    //var originProperty = p.OriginalProperty;
                                    //if (originProperty == null) { originProperty = p; }
                                    //}
                                    if (entityGlobalIdParameter != null)
                                    {
                                        var entityGlobalIdAggregateIdProperty = entity.GetGlobalIdValueObjectAggregateIdProperty();

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("        public ");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.JavaType()));

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(" get");

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.Name));

//line default
//line hidden


//line 211 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("() {\n            if (this.get");

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdParameter.Name));

//line default
//line hidden


//line 212 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("() != null) {\n                return this.get");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdParameter.Name));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("().get");

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdAggregateIdProperty.Name));

//line default
//line hidden


//line 213 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("();\n            } else {\n                return null;\n            }\n        }\n\n  " +
                                        "      public void set");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.Name));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("(");

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(aggregate.Id.JavaType()));

//line default
//line hidden


//line 219 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(" id) {\n            if (this.get");

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdParameter.Name));

//line default
//line hidden


//line 220 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("() == null) {\n                this.set");

//line default
//line hidden


//line 221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdParameter.Name));

//line default
//line hidden


//line 221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("(new ");

//line default
//line hidden


//line 221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entity.GetGlobalIdValueObject().Name));

//line default
//line hidden


//line 221 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("());\n            }\n            this.get");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdParameter.Name));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("().set");

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write(global::Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(entityGlobalIdAggregateIdProperty.Name));

//line default
//line hidden


//line 223 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                        this.Write("(id);\n        }\n\n");

//line default
//line hidden


//line 226 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                    }
                                }//end if (entityBase is Entity)

//line default
//line hidden


//line 230 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                                this.Write("    }\n\n");

//line default
//line hidden


//line 232 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                            }
                        }
                    }

//line default
//line hidden


//line 237 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                    this.Write("}\n\n");

//line default
//line hidden


//line 239 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                }//end if (EntityBase is Aggregate) 

//line default
//line hidden


//line 242 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseCommandsTemplate.tt"

                return this.GenerationEnvironment.ToString();
            }

            private string ToCamelCase(string name)
            {
                return BoundedContext.GetCamelCaseName(name);
            }

            private string ToPascalCase(string name)
            {
                return BoundedContext.GetPascalCaseName(name);
            }

        }

//line default
//line hidden


//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCommandsTemplate.tt"


        public class AggregateCommandsTemplate : EntityBaseCommandsTemplate
        {

            Aggregate Aggregate { get; set; }

            public AggregateCommandsTemplate(Aggregate aggregate) : base(aggregate)
            {
                this.Aggregate = aggregate;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseSubtypeStateInterfaceTemplate.tt"


        public class EntityBaseSubtypeStateInterfaceTemplate : EntityBaseStateInterfaceTemplate
        {
            EntityBaseSubtype Subtype { get; set; }

            protected override IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsCollectionProperty) { continue; }
                            //if (!p.IsReservedProperty || (p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                            //    || p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) 
                            //{
                            properties.Add(p);
                            //}		
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsValueObjectCollectionProperty())
                            {
                                properties.Add(p);
                            }
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Property> DerivedCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (var p in Subtype.GetDerivedCollectionProperties())
                    {
                        //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                        properties.Add(p);
                    }
                    return properties;
                }
            }

            protected override IList<Property> JavaDerivedProperties
            {
                get
                {
                    return Subtype.GetJavaDerivedProperties().ToList();
                }
            }

            protected override IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (Subtype.Properties != null)
                    {
                        if (Subtype.Entities != null)
                        {
                            foreach (Entity e in Subtype.Entities.Values)
                            {
                                //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                                es.Add(e);
                            }
                        }
                    }
                    return es;
                }
            }

            protected override string TypeName
            {
                get
                {
                    return Subtype.Name;
                }
            }

            protected override string TypeNameForEvent
            {
                get
                {
                    return Subtype.GetNameForEvent();
                }
            }

            protected override bool IsInSubtype
            {
                get
                {
                    return true;
                }
            }

            protected override string ExtendsBaseInterfaceString
            {
                get
                {
                    return " extends " + BaseInterfaceName;
                }
            }

            protected override string MutableStateBaseInterfaceString
            {
                get
                {
                    return ", " + ((INamed)this.Subtype.Supertype).Name + "State.Mutable" + ((INamed)this.Subtype.Supertype).Name + "State";
                }
            }

            protected override string BaseSqlStateInterfaceString
            {
                get
                {
                    return ", " + ((INamed)this.Subtype.Supertype).Name + "State.Sql" + ((INamed)this.Subtype.Supertype).Name + "State";
                }
            }

            // ////////////////////

            protected virtual string BaseInterfaceName
            {
                get
                {
                    return ((INamed)this.Subtype.Supertype).Name + "State" + EntityBase.GetGenericTypeParametersString();
                }
            }

            // ///////////////////

            public EntityBaseSubtypeStateInterfaceTemplate(EntityBase entityBase, EntityBaseSubtype subtype) : base(entityBase)
            {
                this.Subtype = subtype;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseSubtypeAbstractStateTemplate.tt"


        public class EntityBaseSubtypeAbstractStateTemplate : EntityBaseAbstractStateTemplate
        {

            EntityBaseSubtype Subtype { get; set; }

            protected override IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsCollectionProperty) { continue; }
                            //if (!p.IsReservedProperty || (p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                            //    || p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) 
                            //{
                            properties.Add(p);
                            //}		
                        }
                    }
                    return properties;
                }
            }


            protected override IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsValueObjectCollectionProperty())
                            {
                                properties.Add(p);
                            }
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Property> JavaDerivedProperties
            {
                get
                {
                    return Subtype.GetJavaDerivedProperties().ToList();
                }
            }

            protected override IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    if (Subtype.Properties != null)
                    {
                        if (Subtype.Entities != null)
                        {
                            foreach (Entity e in Subtype.Entities.Values)
                            {
                                //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                                es.Add(e);
                            }
                        }
                    }
                    return es;
                }
            }


            protected override IList<Entity> SelfAndSupertypeInnerEntities
            {
                get { return Subtype.GetAllEntities(); }
            }

            protected override string TypeName
            {
                get
                {
                    return Subtype.Name;
                }
            }

            protected override string TypeNameForEvent
            {
                get
                {
                    return Subtype.GetNameForEvent();
                }
            }

            protected override bool IsInSubtype
            {
                get
                {
                    return true;
                }
            }

            protected override IList<Property> DerivedCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    foreach (var p in Subtype.GetDerivedCollectionProperties())
                    {
                        properties.Add(p);
                    }
                    return properties;
                }
            }

            protected override IList<Property> PropertiesSetByStateCreatedEvent
            {
                get
                {
                    return EntityBase.GetPropertiesSetByStateCreatedEvent(this.Subtype);
                }
            }

            protected override IList<Property> PropertiesSetByStateMergePatchedEvent
            {
                get
                {
                    return this.PropertiesSetByStateCreatedEvent;
                }
            }

            protected override IList<Entity> EntitiesToRemoved
            {
                get
                {
                    return Subtype.GetAllEntities();
                }
            }

            public override bool IsAbstract
            {
                get
                {
                    return Subtype.Abstract;
                }
            }

            protected override string ExtendsBaseClassString
            {
                get
                {
                    string baseClassName = "Abstract" + ((INamed)this.Subtype.Supertype).Name + "State";
                    if (this.EntityBase.IsPolymorphic() && this.EntityBase.Subtypes != null && this.EntityBase.Subtypes.Count > 0
                            && this.EntityBase.IsInheritanceMappingStrategyTpcc()
                            && !BoundedContext.IsAbstractType((INamed)this.Subtype.Supertype)
                    )
                    {
                        baseClassName = baseClassName + ".Simple" + ((INamed)this.Subtype.Supertype).Name + "State";
                    }
                    return " extends " + baseClassName + EntityBase.GetGenericTypeParametersString();
                }
            }

            public EntityBaseSubtypeAbstractStateTemplate(EntityBase entityBase, EntityBaseSubtype subtype) : base(entityBase)
            {
                this.Subtype = subtype;
            }

        }


//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseSubtypeEventInterfaceTemplate.tt"


        public class EntityBaseSubtypeEventInterfaceTemplate : EntityBaseEventInterfaceTemplate
        {

            EntityBaseSubtype Subtype { get; set; }

            protected override IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsCollectionProperty) { continue; }
                            //if (!p.IsReservedProperty || (p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                            //    || p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) 
                            //{
                            properties.Add(p);
                            //}		
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsValueObjectCollectionProperty())
                            {
                                properties.Add(p);
                            }
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    es.AddRange(base.InnerEntities);
                    if (Subtype.Properties != null)
                    {
                        if (Subtype.Entities != null)
                        {
                            foreach (Entity e in Subtype.Entities.Values)
                            {
                                //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                                es.Add(e);
                            }
                        }
                    }
                    return es;
                }
            }

            protected override IList<Property> RemovableProperties
            {
                get
                {
                    return this.Subtype.GetAllRemovableProperties();
                }
            }

            protected override string TypeName
            {
                get
                {
                    return Subtype.Name;
                }
            }

            protected override string BaseInterfaceName
            {
                get
                {
                    return ((INamed)this.Subtype.Supertype).Name + "Event" + EntityBase.GetGenericTypeParametersString();
                }
            }

            protected override string StateEventBaseInterfaceNames
            {
                get
                {
                    return ((INamed)this.Subtype.Supertype).Name + "StateEvent" + EntityBase.GetGenericTypeParametersString()
                        + ", " + this.TypeName + "Event" + EntityBase.GetGenericTypeParametersString();
                }
            }

            protected override bool IsInSubtype
            {
                get
                {
                    return true;
                }
            }

            public EntityBaseSubtypeEventInterfaceTemplate(EntityBase entityBase, EntityBaseSubtype subtype) : base(entityBase)
            {
                this.Subtype = subtype;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseSubtypeAbstractEventTemplate.tt"


        public class EntityBaseSubtypeAbstractEventTemplate : EntityBaseAbstractEventTemplate
        {

            EntityBaseSubtype Subtype { get; set; }

            protected override IList<Property> ValueObjectProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsCollectionProperty) { continue; }
                            //if (!p.IsReservedProperty || (p.IsReservedPropertyActive && !EntityBase.ReservedProperties.NoActive)
                            //    || p.IsReservedPropertyCreatedBy || p.IsReservedPropertyCreatedAt) 
                            //{
                            properties.Add(p);
                            //}		
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Property> ValueObjectCollectionProperties
            {
                get
                {
                    var properties = new List<Property>();
                    if (Subtype.Properties != null)
                    {
                        foreach (Property p in Subtype.Properties.Values)
                        {
                            //if (p.IsHoisted && ! this.IncludingHoistedProperties) { continue; }

                            if (p.IsValueObjectCollectionProperty())
                            {
                                properties.Add(p);
                            }
                        }
                    }
                    return properties;
                }
            }

            protected override IList<Entity> InnerEntities
            {
                get
                {
                    var es = new List<Entity>();
                    es.AddRange(base.InnerEntities);
                    if (Subtype.Properties != null)
                    {
                        if (Subtype.Entities != null)
                        {
                            foreach (Entity e in Subtype.Entities.Values)
                            {
                                //if (e.IsHoisted && ! this.IncludingHoistedProperties) { continue; }
                                es.Add(e);
                            }
                        }
                    }
                    return es;
                }
            }

            protected override IList<Property> RemovableProperties
            {
                get
                {
                    return this.Subtype.GetAllRemovableProperties();
                }
            }

            protected override string TypeName
            {
                get
                {
                    return Subtype.Name;
                }
            }

            protected override string BaseInterfaceName
            {
                get
                {
                    return ((INamed)this.Subtype.Supertype).Name + "Event" + EntityBase.GetGenericTypeParametersString();
                }
            }

            protected override string BaseClassName
            {
                get
                {
                    return "Abstract" + ((INamed)this.Subtype.Supertype).Name + "Event" + EntityBase.GetGenericTypeParametersString();
                }
            }

            protected override string StateEventBaseClassName
            {
                get
                {
                    return "Abstract" + ((INamed)this.Subtype.Supertype).Name + "StateEvent";
                }
            }


            protected override bool IsInSubtype
            {
                get
                {
                    return true;
                }
            }

            public override bool IsAbstract
            {
                get
                {
                    return this.Subtype.Abstract;
                }
            }

            // //////////////////////

            public EntityBaseSubtypeAbstractEventTemplate(EntityBase entityBase, EntityBaseSubtype subtype) : base(entityBase)
            {
                this.Subtype = subtype;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityBaseSubtypeStateDtoTemplate.tt"


        public class EntityBaseSubtypeStateDtoTemplate : EntityBaseStateDtoTemplate
        {
            EntityBaseSubtype Subtype { get; set; }

            protected override string TypeName
            {
                get
                {
                    return Subtype.Name;
                }
            }

            protected override bool IsInSubtype
            {
                get
                {
                    return true;
                }
            }

            protected override string ExtendsBaseInterfaceString
            {
                get
                {
                    return " extends " + BaseInterfaceName;
                }
            }

            // ////////////////////

            protected virtual string BaseInterfaceName
            {
                get
                {
                    return ((INamed)this.Subtype.Supertype).Name + "StateDto";// + EntityBase.GetGenericTypeParametersString();
                }
            }

            protected override IList<Property> JavaDerivedProperties
            {
                get
                {
                    return Subtype.GetJavaDerivedProperties().ToList();
                }
            }

            public EntityBaseSubtypeStateDtoTemplate(EntityBase entityBase, EntityBaseSubtype subtype) : base(entityBase)
            {
                this.Subtype = subtype;
            }

        }

//line default
//line hidden


//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateSubtypeStateQueryRepositoryInterfaceTemplate.tt"


        public class AggregateSubtypeStateQueryRepositoryInterfaceTemplate : AggregateStateQueryRepositoryInterfaceTemplate
        {

            EntityBaseSubtype Subtype { get; set; }

            protected override string TypeName
            {
                get
                {
                    return Subtype.Name;
                }
            }

            protected override bool IsInSubtype
            {
                get
                {
                    return true;
                }
            }

            public AggregateSubtypeStateQueryRepositoryInterfaceTemplate(Aggregate aggregate, EntityBaseSubtype subtype) : base(aggregate)
            {
                this.Subtype = subtype;
            }

        }

//line default
//line hidden


        public override string TransformText()
        {
            this.GenerationEnvironment = null;

//line 2 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlCore.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractCommandDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 10 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractCommandDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 12 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCreateOrMergePatchCommandDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 14 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityCreateOrMergePatchCommandDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 16 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDeleteCommandDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 18 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityRemoveCommandDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 20 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateEventDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 22 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventDtoTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 24 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateEventInterfaceTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 26 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityEventInterfaceTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 28 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateInterfaceTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 30 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateInterfaceTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 32 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractStateTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 38 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 40 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractEventTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 42 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractEventTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 44 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCommandInterfaceTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 47 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityCommandInterfaceTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 49 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractCommandTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 51 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 6 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractCommandTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 53 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateAbstractStateCommandConverterTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityAbstractStateCommandConverterTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 60 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 62 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 64 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 8 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateStateEventDtoConverterTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 66 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/EntityStateEventDtoConverterTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 68 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateDomainGenerator.tt"
            this.Write(" \r\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCommandDtosTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 7 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/Domain/AggregateCommandsTemplate.tt"
            this.Write("\n");

//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden

//line 4 "/Users/yangjiefeng/GitHub/dddml-dotnet-tools/Dddml.T4.Templates.Java/DddmlT4.tc"



//line default
//line hidden
            return this.GenerationEnvironment.ToString();
        }

        public override void Initialize()
        {
            base.Initialize();
        }
    }
}
